"use strict";(self.webpackChunknarrative_docs=self.webpackChunknarrative_docs||[]).push([[3168],{28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>d});var a=n(96540);const r={},o=a.createContext(r);function i(e){const t=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),a.createElement(o.Provider,{value:t},e.children)}},43639:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>d,default:()=>c,frontMatter:()=>i,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"tales/changelog/version-3.7.0","title":"3.7.0 Code Changes","description":"Narrative.uplugin","source":"@site/docs/tales/changelog/version-3.7.0.md","sourceDirName":"tales/changelog","slug":"/tales/changelog/version-3.7.0","permalink":"/tales/changelog/version-3.7.0","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"sidebar_label":"3.7.0 Code Changes"},"sidebar":"tutorialSidebar","previous":{"title":"3.6.0 Code Changes","permalink":"/tales/changelog/version-3.6.0"},"next":{"title":"Conditions","permalink":"/tales/conditions/"}}');var r=n(74848),o=n(28453);const i={sidebar_label:"3.7.0 Code Changes"},d="3.7.0 Code Changes",s={},l=[{value:"Narrative.uplugin",id:"narrativeuplugin",level:3},{value:"NarrativeDialogueEditor.Build.cs",id:"narrativedialogueeditorbuildcs",level:3},{value:"DialogueBlueprint.cpp",id:"dialogueblueprintcpp",level:3},{value:"IDialogueEditor.h",id:"idialogueeditorh",level:3},{value:"DialogueBlueprint.h",id:"dialogueblueprinth",level:3},{value:"DialogueEditorModes.cpp",id:"dialogueeditormodescpp",level:3},{value:"DialogueGraphNode_NPC.cpp",id:"dialoguegraphnode_npccpp",level:3},{value:"DialogueGraphEditor.h",id:"dialoguegrapheditorh",level:3},{value:"DialogueEditorSettings.cpp",id:"dialogueeditorsettingscpp",level:3},{value:"DialogueConnectionDrawingPolicy.cpp",id:"dialogueconnectiondrawingpolicycpp",level:3},{value:"NarrativeDialogueEditorModule.cpp",id:"narrativedialogueeditormodulecpp",level:3},{value:"DialogueEditorSettings.h",id:"dialogueeditorsettingsh",level:3},{value:"DialogueGraphNode.cpp",id:"dialoguegraphnodecpp",level:3},{value:"DialogueEditorToolbar.cpp",id:"dialogueeditortoolbarcpp",level:3},{value:"DialogueBlueprintCompiler.cpp",id:"dialogueblueprintcompilercpp",level:3},{value:"DialogueGraphSchema.cpp",id:"dialoguegraphschemacpp",level:3},{value:"DialogueAssetFactory.h",id:"dialogueassetfactoryh",level:3},{value:"DialogueEditorTabFactories.cpp",id:"dialogueeditortabfactoriescpp",level:3},{value:"AssetTypeActions_DialogueBlueprint.cpp",id:"assettypeactions_dialogueblueprintcpp",level:3},{value:"DialogueGraph.cpp",id:"dialoguegraphcpp",level:3},{value:"DialogueEditorDetails.h",id:"dialogueeditordetailsh",level:3},{value:"DialogueEditorTabs.cpp",id:"dialogueeditortabscpp",level:3},{value:"DialogueEditorDetails.cpp",id:"dialogueeditordetailscpp",level:3},{value:"DialogueGraphEditor.cpp",id:"dialoguegrapheditorcpp",level:3},{value:"SDialogueGraphNode.h",id:"sdialoguegraphnodeh",level:3},{value:"DialogueGraphNode_Root.cpp",id:"dialoguegraphnode_rootcpp",level:3},{value:"DialogueGraphSchema.h",id:"dialoguegraphschemah",level:3},{value:"AssetTypeActions_DialogueAsset.cpp",id:"assettypeactions_dialogueassetcpp",level:3},{value:"DialogueGraph.h",id:"dialoguegraphh",level:3},{value:"DialogueEditorCommands.h",id:"dialogueeditorcommandsh",level:3},{value:"DialogueGraphNode_Player.cpp",id:"dialoguegraphnode_playercpp",level:3},{value:"DialogueConnectionDrawingPolicy.h",id:"dialogueconnectiondrawingpolicyh",level:3},{value:"DialogueEditorStyle.cpp",id:"dialogueeditorstylecpp",level:3},{value:"DialogueNodeUserWidget.cpp",id:"dialoguenodeuserwidgetcpp",level:3},{value:"DialogueEditorCommands.cpp",id:"dialogueeditorcommandscpp",level:3},{value:"SDialogueGraphPin.cpp",id:"sdialoguegraphpincpp",level:3},{value:"DialogueAssetFactory.cpp",id:"dialogueassetfactorycpp",level:3},{value:"DialogueEditorModes.h",id:"dialogueeditormodesh",level:3},{value:"DialogueGraphNode.h",id:"dialoguegraphnodeh",level:3},{value:"DialogueEditorTypes.cpp",id:"dialogueeditortypescpp",level:3},{value:"SDialogueGraphNode.cpp",id:"sdialoguegraphnodecpp",level:3},{value:"NarrativeQuestEditor.Build.cs",id:"narrativequesteditorbuildcs",level:3},{value:"QuestBlueprint.h",id:"questblueprinth",level:3},{value:"QuestNodeUserWidget.h",id:"questnodeuserwidgeth",level:3},{value:"QuestGraphSchema.h",id:"questgraphschemah",level:3},{value:"QuestGraphNode.cpp",id:"questgraphnodecpp",level:3},{value:"AssetTypeActions_NarrativeQuestTask.cpp",id:"assettypeactions_narrativequesttaskcpp",level:3},{value:"QuestGraphNode_Action.cpp",id:"questgraphnode_actioncpp",level:3},{value:"AssetTypeActions_QuestAction.cpp",id:"assettypeactions_questactioncpp",level:3},{value:"K2Node_CompleteNarrativeTask.cpp",id:"k2node_completenarrativetaskcpp",level:3},{value:"QuestAssetFactory.cpp",id:"questassetfactorycpp",level:3},{value:"QuestGraph.h",id:"questgraphh",level:3},{value:"QuestGraphNode_Root.cpp",id:"questgraphnode_rootcpp",level:3},{value:"QuestConnectionDrawingPolicy.cpp",id:"questconnectiondrawingpolicycpp",level:3},{value:"QuestEditorTabs.cpp",id:"questeditortabscpp",level:3},{value:"QuestActionFactory.cpp",id:"questactionfactorycpp",level:3},{value:"QuestBlueprintCompiler.cpp",id:"questblueprintcompilercpp",level:3},{value:"QuestEditorSettings.cpp",id:"questeditorsettingscpp",level:3},{value:"QuestEditorCommands.h",id:"questeditorcommandsh",level:3},{value:"SQuestGraphNode.h",id:"squestgraphnodeh",level:3},{value:"QuestEditorModes.h",id:"questeditormodesh",level:3},{value:"QuestEditorCommands.cpp",id:"questeditorcommandscpp",level:3},{value:"QuestGraphEditor.cpp",id:"questgrapheditorcpp",level:3},{value:"QuestEditorTabFactories.cpp",id:"questeditortabfactoriescpp",level:3},{value:"QuestGraph.cpp",id:"questgraphcpp",level:3},{value:"QuestGraphNode_Failure.cpp",id:"questgraphnode_failurecpp",level:3},{value:"K2Node_CompleteNarrativeTask.h",id:"k2node_completenarrativetaskh",level:3},{value:"QuestGraphNode_Success.cpp",id:"questgraphnode_successcpp",level:3},{value:"AssetTypeActions_QuestAsset.cpp",id:"assettypeactions_questassetcpp",level:3},{value:"QuestGraphEditor.h",id:"questgrapheditorh",level:3},{value:"SQuestGraphNode.cpp",id:"squestgraphnodecpp",level:3},{value:"QuestGraphNode_PersistentTasks.cpp",id:"questgraphnode_persistenttaskscpp",level:3},{value:"NarrativeQuestEditorModule.cpp",id:"narrativequesteditormodulecpp",level:3},{value:"QuestEditorDetails.cpp",id:"questeditordetailscpp",level:3},{value:"QuestEditorModes.cpp",id:"questeditormodescpp",level:3},{value:"QuestEditorSettings.h",id:"questeditorsettingsh",level:3},{value:"QuestGraphNode_State.cpp",id:"questgraphnode_statecpp",level:3},{value:"QuestEditorStyle.cpp",id:"questeditorstylecpp",level:3},{value:"QuestGraphNode.h",id:"questgraphnodeh",level:3},{value:"QuestEditorTypes.cpp",id:"questeditortypescpp",level:3},{value:"QuestBlueprintCompiler.h",id:"questblueprintcompilerh",level:3},{value:"QuestEditorToolbar.cpp",id:"questeditortoolbarcpp",level:3},{value:"QuestNodeUserWidget.cpp",id:"questnodeuserwidgetcpp",level:3},{value:"QuestGraphSchema.cpp",id:"questgraphschemacpp",level:3},{value:"Narrative.Build.cs",id:"narrativebuildcs",level:3},{value:"Narrative.h",id:"narrativeh",level:3},{value:"NarrativeQuestSettings.h",id:"narrativequestsettingsh",level:3},{value:"Quest.h",id:"questh",level:3},{value:"NarrativeEvent.h",id:"narrativeeventh",level:3},{value:"NarrativeDialogueSequence.h",id:"narrativedialoguesequenceh",level:3},{value:"NarrativeComponent.h",id:"narrativecomponenth",level:3},{value:"NarrativeCondition.h",id:"narrativeconditionh",level:3},{value:"QuestTask.h",id:"questtaskh",level:3},{value:"NarrativeDefaultCinecam.h",id:"narrativedefaultcinecamh",level:3},{value:"NarrativePartyComponent.h",id:"narrativepartycomponenth",level:3},{value:"Dialogue.h",id:"dialogueh",level:3},{value:"NarrativeNodeBase.h",id:"narrativenodebaseh",level:3},{value:"NarrativeDialogueSettings.h",id:"narrativedialoguesettingsh",level:3},{value:"NarrativeFunctionLibrary.h",id:"narrativefunctionlibraryh",level:3},{value:"DialogueSM.h",id:"dialoguesmh",level:3},{value:"QuestTask.cpp",id:"questtaskcpp",level:3},{value:"DialogueBlueprintGeneratedClass.cpp",id:"dialogueblueprintgeneratedclasscpp",level:3},{value:"NarrativeDialogueSequence.cpp",id:"narrativedialoguesequencecpp",level:3},{value:"NarrativeCondition.cpp",id:"narrativeconditioncpp",level:3},{value:"NarrativeDataTask.cpp",id:"narrativedatataskcpp",level:3},{value:"DialogueSM.cpp",id:"dialoguesmcpp",level:3},{value:"NarrativeNodeBase.cpp",id:"narrativenodebasecpp",level:3},{value:"Narrative.cpp",id:"narrativecpp",level:3},{value:"NarrativeComponent.cpp",id:"narrativecomponentcpp",level:3},{value:"NarrativeEvent.cpp",id:"narrativeeventcpp",level:3},{value:"NarrativePartyComponent.cpp",id:"narrativepartycomponentcpp",level:3},{value:"NarrativeDialogueSettings.cpp",id:"narrativedialoguesettingscpp",level:3},{value:"QuestBlueprintGeneratedClass.cpp",id:"questblueprintgeneratedclasscpp",level:3},{value:"NarrativeSaveGame.cpp",id:"narrativesavegamecpp",level:3},{value:"QuestSM.cpp",id:"questsmcpp",level:3},{value:"NarrativeTaskManager.cpp",id:"narrativetaskmanagercpp",level:3},{value:"NarrativeDefaultCinecam.cpp",id:"narrativedefaultcinecamcpp",level:3},{value:"NarrativeFunctionLibrary.cpp",id:"narrativefunctionlibrarycpp",level:3},{value:"Quest.cpp",id:"questcpp",level:3},{value:"NarrativeQuestSettings.cpp",id:"narrativequestsettingscpp",level:3},{value:"Dialogue.cpp",id:"dialoguecpp",level:3},{value:"DialogueAsset.cpp",id:"dialogueassetcpp",level:3},{value:"W_NarrativeMenu_Dialogue.uasset",id:"w_narrativemenu_dialogueuasset",level:3},{value:"WBP_NarrativeButton_DialogueOption.uasset",id:"wbp_narrativebutton_dialogueoptionuasset",level:3},{value:"BP_Narrative3Overlay.uasset",id:"bp_narrative3overlayuasset",level:3},{value:"W_NarrativeMenu_QuestJournal.uasset",id:"w_narrativemenu_questjournaluasset",level:3},{value:"NE_BeginQuest.uasset",id:"ne_beginquestuasset",level:3},{value:"NE_BeginDialogue.uasset",id:"ne_begindialogueuasset",level:3},{value:"BPT_FinishDialogue.uasset",id:"bpt_finishdialogueuasset",level:3},{value:"BPT_PlayDialogueNode.uasset",id:"bpt_playdialoguenodeuasset",level:3},{value:"BPT_GoToLocation.uasset",id:"bpt_gotolocationuasset",level:3}];function u(e){const t={code:"code",h1:"h1",h3:"h3",header:"header",li:"li",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"370-code-changes",children:"3.7.0 Code Changes"})}),"\n",(0,r.jsx)(t.h3,{id:"narrativeuplugin",children:"Narrative.uplugin"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Narrative.uplugin" showLineNumbers',children:'\n {\n \t"FileVersion": 3,\n \t"Version": 3,\n// removed-start\n\t"VersionName": "3.6.1",\n// removed-end\n// added-start\n\t"VersionName": "3.7.0",\n// added-end\n\n...\n\n// removed-start\n\t"SupportURL": "mailto:contact@reubs.io",\n// removed-end\n// added-start\n\t"SupportURL": "mailto:contact@narrativetools.io",\n// added-end\n \t"EngineVersion": "5.1.0",\n \t"CanContainContent": true,\n \t"Installed": false,\n// added-start\n\t\t\t],\n\t\t\t"Dependencies": [\n\t\t\t\t"GameplayTags"\n// added-end\n// added-start\n\t\t},\n\t\t{\n\t\t\t"Name": "NarrativePreEditor",\n\t\t\t"Type": "Editor",\n\t\t\t"LoadingPhase": "PreDefault"\n// added-end\n\n...\n'})}),"\n",(0,r.jsx)(t.h3,{id:"narrativedialogueeditorbuildcs",children:"NarrativeDialogueEditor.Build.cs"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/NarrativeDialogueEditor.Build.cs" showLineNumbers',children:' using UnrealBuildTool;\n \n// added-start\n                "BlueprintGraph",\n                "GraphEditor",\n                "GameplayTags",\n// added-end\n\n...\n\n// removed-start\n                "UMG"\n            }\n// removed-end\n// added-start\n                "UMG",\n                "ToolMenus", "NarrativePreEditor"\n\t\t\t}\n// added-end\n \t\t\t);\n'})}),"\n",(0,r.jsx)(t.h3,{id:"dialogueblueprintcpp",children:"DialogueBlueprint.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Public/DialogueBlueprint.cpp" showLineNumbers',children:'\n #include "DialogueBlueprint.h"\n\n...\n\n// removed-start\n#include "DialogueSM.h"\n// removed-end\n #include "DialogueBlueprintGeneratedClass.h"\n \n UDialogueBlueprint::UDialogueBlueprint()\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"idialogueeditorh",children:"IDialogueEditor.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Public/IDialogueEditor.h" showLineNumbers',children:"#pragma once\n \n...\n\n// removed-start\n};// removed-end\n// added-start\n\t// called when the dialogue icon is clicked on\n\tvirtual void JumpOrAddDialogueNode(FName NodeID) = 0;\n\t\n};\n// added-end\n\n\n"})}),"\n",(0,r.jsx)(t.h3,{id:"dialogueblueprinth",children:"DialogueBlueprint.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Public/DialogueBlueprint.h" showLineNumbers',children:"#pragma once\n \n...\n\n// removed-start\n\tvirtual bool CanAlwaysRecompileWhilePlayingInEditor() const override { return true; }\n// removed-end\n// added-start\n\tvirtual bool CanAlwaysRecompileWhilePlayingInEditor() const override { return false; }\n// added-end\n \n \tvirtual void PostLoad() override;\n \tvirtual bool IsValidForBytecodeOnlyRecompile() const override { return false; }\n\n\n"})}),"\n",(0,r.jsx)(t.h3,{id:"dialogueeditormodescpp",children:"DialogueEditorModes.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/DialogueEditorModes.cpp" showLineNumbers',children:'#include "DialogueEditorModes.h"\n// removed-start\n#include "DialogueEditorTabs.h"\n#include "DialogueEditorToolbar.h"\n#include "DialogueEditorDetails.h"\n// removed-end\n #include "DialogueEditorTabFactories.h"\n// removed-start\n#include "BlueprintEditorTabs.h"\n// removed-end\n\n...\n\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"dialoguegraphnode_npccpp",children:"DialogueGraphNode_NPC.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/DialogueGraphNode_NPC.cpp" showLineNumbers',children:' #include "DialogueGraphNode_NPC.h"\n// removed-start\n#include "DialogueGraph.h"\n// removed-end\n #include "EdGraph/EdGraphSchema.h"\n\n...\n\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"dialoguegrapheditorh",children:"DialogueGraphEditor.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/DialogueGraphEditor.h" showLineNumbers',children:'#pragma once\n \n...\n\n// removed-start\n#include "UObject/NoExportTypes.h"\n// removed-end\n #include "Misc/NotifyHook.h"\n #include "EditorUndoClient.h"\n #include "Widgets/SWidget.h"\n// added-start\n\tvoid SwitchToQuestAsset();\n\tbool CanSwitchToQuestAsset();\n\n// added-end\n\n...\n\n// removed-start\n\t/** Check to see if we can create a new state node */\n\tbool CanCreateNewState() const;\n\n\t/** Check to see if we can create a new action node */\n\tbool CanCreateNewAction() const;\n\n\t/** Create the menu used to make a new state node */\n\tTSharedRef<SWidget> HandleCreateNewStateMenu() const;\n\n\t/** Create the menu used to make a new action node */\n\tTSharedRef<SWidget> HandleCreateNewActionMenu() const;\n\n\t/** Handler for when a node class is picked */\n\tvoid HandleNewNodeClassPicked(UClass* InClass) const;\n\n// removed-end\n \tvirtual void OnCreateComment() override;\n \n// added-start\n\t// adds new nodes to the graph from given assets\n\tvoid AddNodesFromAssets(const TArray<FAssetData>& Assets, const FVector2D& GraphPosition, UEdGraph* DestinationGraph, UEdGraphNode* SelectedNode) const;\n\n\tvoid SetGraphEditable(const bool Editable);\n\tbool IsGraphEditable() const;\n\n\t/* IDialogueEditor */\n\tvirtual void JumpOrAddDialogueNode(FName NodeID) override;\n\t/* IDialogueEditor */\n\t\n// added-end\n protected:\n// added-start\n\n\tvoid OnBeginPIE(bool bSimulating);\n\tvoid OnEndPIE(bool bSimulating);\n// added-end\n// added-start\n\n\n#if WITH_EDITORONLY_DATA\n\t/// debugger instance for this graph\n\tTSharedPtr<class FDialogueDebugger> Debugger;\n#endif\n// added-end\n\n...\n\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"dialogueeditorsettingscpp",children:"DialogueEditorSettings.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/DialogueEditorSettings.cpp" showLineNumbers',children:' \n #include "DialogueEditorSettings.h"\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"dialogueconnectiondrawingpolicycpp",children:"DialogueConnectionDrawingPolicy.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/DialogueConnectionDrawingPolicy.cpp" showLineNumbers',children:' #include "DialogueConnectionDrawingPolicy.h"\n// removed-start\n#include "QuestSM.h"\n// removed-end\n #include "NarrativeDialogueSettings.h"\n// removed-start\n#include "DialogueGraphNode_NPC.h"\n// removed-end\n// added-start\n#if ENGINE_MAJOR_VERSION == 5 && ENGINE_MINOR_VERSION >= 6\nusing FGraphLocationType = FVector2f;\n#else\nusing FGraphLocationType = FVector2D;\n#endif\n// added-end\n\n...\n\n// removed-start\nFVector2D FDialogueGraphConnectionDrawingPolicy::ComputeSplineTangent(const FVector2D& Start, const FVector2D& End) const\n// removed-end\n// added-start\nFGraphLocationType FDialogueGraphConnectionDrawingPolicy::ComputeSplineTangent(const FGraphLocationType& Start, const FGraphLocationType& End) const\n// added-end\n {\n \n \tif (const UNarrativeDialogueSettings* DialogueSettings = GetDefault<UNarrativeDialogueSettings>())\n\n...\n\n// removed-start\n\t\tconst FVector2D DeltaPos = End - Start;\n// removed-end\n// added-start\n\t\tconst FGraphLocationType DeltaPos = End - Start;\n// added-end\n \t\tconst bool bGoingForward = DialogueSettings->bEnableVerticalWiring ? DeltaPos.Y >= 0.f : DeltaPos.X >= 0.0f;\n \n \t\tif (const UDialogueEditorSettings* DialogueEditorSettings = GetDefault<UDialogueEditorSettings>())\n\n...\n\n// removed-start\n\t\t\t\treturn Result.GetRotated(90.f);\n// removed-end\n// added-start\n\t\t\t\treturn FGraphLocationType(Result.GetRotated(90.f));\n// added-end\n \t\t\t}\n \t\t\telse\n \t\t\t{\n// removed-start\n\t\t\t\treturn Result;\n// removed-end\n// added-start\n\t\t\t\treturn FGraphLocationType(Result);\n// added-end\n\n...\n\n// removed-start\nvoid FDialogueGraphConnectionDrawingPolicy::DrawConnection(int32 LayerId, const FVector2D& Start, const FVector2D& End, const FConnectionParams& Params)\n// removed-end\n// added-start\nvoid FDialogueGraphConnectionDrawingPolicy::DrawConnection(int32 LayerId, const FGraphLocationType& Start, const FGraphLocationType& End, const FConnectionParams& Params)\n// added-end\n {\n \tif (const UNarrativeDialogueSettings* DialogueSettings = GetDefault<UNarrativeDialogueSettings>())\n \t{\n\n...\n\n// removed-start\n\t\t\tFVector2D Halfway = (Start + End) / 2;\n// removed-end\n// added-start\n\t\t\tFGraphLocationType Halfway = (Start + End) / 2;\n// added-end\n \n \t\t\tif (DialogueSettings->bEnableVerticalWiring)\n \t\t\t{\n\n...\n\n// removed-start\n\t\t\t\tFVector2D ArrowPoint = Halfway - ArrowRadius * 2.f;\n// removed-end\n// added-start\n\t\t\t\tFGraphLocationType ArrowPoint = Halfway - ArrowRadius * 2.f;\n// added-end\n \n \t\t\t\tconst float Angle = DialogueSettings->bEnableVerticalWiring ? -HALF_PI : PI;\n \n\n...\n\n// removed-start\n\t\t\t\t\tTOptional<FVector2D>(),\n// removed-end\n// added-start\n\t\t\t\t\tTOptional<FGraphLocationType>(),\n// added-end\n \t\t\t\t\tFSlateDrawElement::RelativeToElement,\n \t\t\t\t\tParams.WireColor\n \t\t\t\t);\n\n...\n\n// removed-start\n\t\t\t//Pivot for wires isnt correct so shift it, kinda hacky but works so meh\n\t\t\tif (DialogueSettings->bEnableVerticalWiring)\n\t\t\t{\n\t\t\t\tFConnectionDrawingPolicy::DrawConnection(LayerId, Start - FVector2D(12.f * ZoomFactor, 0.f), End + FVector2D(16.f * ZoomFactor, 0.f), Params);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tFConnectionDrawingPolicy::DrawConnection(LayerId, Start, End, Params);\n\t\t\t}\n// removed-end\n// added-start\n\t\t\tFConnectionDrawingPolicy::DrawConnection(LayerId, Start, End, Params);\n// added-end\n \t\t}\n \t}\n \n// added-start\n\n\nvoid FDialogueGraphConnectionDrawingPolicy::DrawPreviewConnector(const FGeometry& PinGeometry, const FGraphLocationType& StartPoint, const FGraphLocationType& EndPoint, UEdGraphPin* Pin)\n{\n\tbool bDrawVerticalWiring = false;\n\n\tif (const UNarrativeDialogueSettings* DialogueSettings = GetDefault<UNarrativeDialogueSettings>())\n\t{\n\t\t bDrawVerticalWiring = DialogueSettings->bEnableVerticalWiring;\n\t}\n\n\tFGraphLocationType AdjustedStartPoint = StartPoint;\n\n\tif (bDrawVerticalWiring)\n\t{\n\t\tAdjustedStartPoint.X -= PinGeometry.GetDrawSize().X / 2;\n\t\tAdjustedStartPoint.Y -= PinGeometry.GetDrawSize().Y / 2;\n\t}\n\t\n\tFConnectionDrawingPolicy::DrawPreviewConnector(PinGeometry, AdjustedStartPoint, EndPoint, Pin);\n}\n\nvoid FDialogueGraphConnectionDrawingPolicy::DrawSplineWithArrow(const FGeometry& StartGeom, const FGeometry& EndGeom, const FConnectionParams& Params)\n{\n\tbool bDrawVerticalWiring = false;\n\n\tif (const UNarrativeDialogueSettings* DialogueSettings = GetDefault<UNarrativeDialogueSettings>())\n\t{\n\t\t bDrawVerticalWiring = DialogueSettings->bEnableVerticalWiring;\n\t}\n\n\tif (bDrawVerticalWiring)\n\t{\n\n\t\tconst FGraphLocationType StartPoint = FNarrativeGeometryHelper::HorizontalBottomOf(StartGeom);\n\t\tconst FGraphLocationType EndPoint = FNarrativeGeometryHelper::HorizontalTopOf(EndGeom);\n\n\t\tFConnectionDrawingPolicy::DrawSplineWithArrow(StartPoint, EndPoint, Params);\n\t}\n\telse\n\t{\n\t\t//@TODO: These values should be pushed into the Slate style, they are compensating for a bit of\n\t\t// empty space inside of the pin brush images.\n\t\tconst float StartFudgeX = 4.0f;\n\t\tconst float EndFudgeX = 4.0f;\n\t\tconst FGraphLocationType StartPoint = FGeometryHelper::VerticalMiddleRightOf(StartGeom) - FVector2D(StartFudgeX, 0.0f);\n\t\tconst FGraphLocationType EndPoint = FGeometryHelper::VerticalMiddleLeftOf(EndGeom) - FVector2D(ArrowRadius.X - EndFudgeX, 0);\n\n\t\tFConnectionDrawingPolicy::DrawSplineWithArrow(StartPoint, EndPoint, Params);\n\t}\n}\n\n...\n\n// added-end\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"narrativedialogueeditormodulecpp",children:"NarrativeDialogueEditorModule.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/NarrativeDialogueEditorModule.cpp" showLineNumbers',children:' #include "NarrativeDialogueEditorModule.h"\n #include "IDialogueEditor.h"\n\n...\n\n// removed-start\n#include "DialogueEditorDetails.h"\n// removed-end\n #include "DialogueEditorSettings.h"\n #include "NarrativeDialogueSettings.h"\n #include "EdGraphUtilities.h"\n\n...\n\n// removed-start\n#include "ISettingsSection.h"\n#include "ISettingsContainer.h"\n#include <ISettingsCategory.h>\n// removed-end\n #include "KismetCompiler.h"\n #include "Engine/World.h"\n #include "DialogueBlueprintCompiler.h"\n// added-start\n#include "NodeSelector/DialogueNodeSelectorPropertyCustomization.h"\n#include "NodeSelector/GraphPin_DialogueNodeSelector.h"\n// added-end\n\n...\n\n// removed-start\n\n\n// removed-end\n void FNarrativeDialogueEditorModule::StartupModule()\n {\n \tFDialogueEditorStyle::Initialize();\n// added-start\n\t\n\tFEdGraphUtilities::RegisterVisualPinFactory(MakeShared<FPinFactoryDialogueNodeSelector>());\n// added-end\n\n...\n\n// removed-start\n\tPropertyModule.RegisterCustomClassLayout("DialogueNode_NPC", FOnGetDetailCustomizationInstance::CreateStatic(&FDialogueEditorDetails::MakeInstance));\n\tPropertyModule.RegisterCustomClassLayout("DialogueNode_Player", FOnGetDetailCustomizationInstance::CreateStatic(&FDialogueEditorDetails::MakeInstance));\n// removed-end\n// added-start\n\t//PropertyModule.RegisterCustomClassLayout("DialogueNode_NPC", FOnGetDetailCustomizationInstance::CreateStatic(&FDialogueEditorDetails::MakeInstance));\n\t//PropertyModule.RegisterCustomClassLayout("DialogueNode_Player", FOnGetDetailCustomizationInstance::CreateStatic(&FDialogueEditorDetails::MakeInstance));\n// added-end\n \t//PropertyModule.RegisterCustomPropertyTypeLayout("SpeakerSelector", FOnGetPropertyTypeCustomizationInstance::CreateStatic(&FSpeakerSelectorCustomization::MakeInstance));\n// added-start\n\n\t// Register custom property layout for FDialogueNodeSelector\n\tPropertyModule.RegisterCustomPropertyTypeLayout(\n\t\t"DialogueNodeSelector",\n\t\tFOnGetPropertyTypeCustomizationInstance::CreateStatic(&FDialogueNodeSelectorPropertyTypeCustomization::MakeInstance)\n\t);\n\t\n// added-end\n \tPropertyModule.NotifyCustomizationModuleChanged();\n \n// added-start\n\n\tPropertyModule.UnregisterCustomPropertyTypeLayout("DialogueNodeSelector");\n\n\tFEdGraphUtilities::UnregisterVisualPinFactory(MakeShared<FPinFactoryDialogueNodeSelector>());\n// added-end\n\n...\n\n// removed-start\nIMPLEMENT_MODULE(FNarrativeDialogueEditorModule, NarrativeDialogueEditor)// removed-end\n// added-start\nIMPLEMENT_MODULE(FNarrativeDialogueEditorModule, NarrativeDialogueEditor)\n// added-end\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"dialogueeditorsettingsh",children:"DialogueEditorSettings.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/DialogueEditorSettings.h" showLineNumbers',children:'#pragma once\n \n...\n\n// removed-start\n#include "UObject/NoExportTypes.h"\n// removed-end\n #include "DialogueEditorSettings.generated.h"\n \n /**\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"dialoguegraphnodecpp",children:"DialogueGraphNode.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/DialogueGraphNode.cpp" showLineNumbers',children:' #include "DialogueGraphNode.h"\n #include "DialogueGraph.h"\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"dialogueeditortoolbarcpp",children:"DialogueEditorToolbar.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/DialogueEditorToolbar.cpp" showLineNumbers',children:' #include "DialogueEditorToolbar.h"\n #include "Misc/Attribute.h"\n\n...\n\n// removed-start\n#include "EditorStyleSet.h"\n// removed-end\n #include "Framework/MultiBox/MultiBoxBuilder.h"\n #include "DialogueGraphEditor.h"\n #include "WorkflowOrientedApp/SModeWidget.h"\n// removed-start\n#include "DialogueEditorCommands.h"\n// removed-end\n\n...\n\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"dialogueblueprintcompilercpp",children:"DialogueBlueprintCompiler.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/DialogueBlueprintCompiler.cpp" showLineNumbers',children:' \n #include "DialogueBlueprintCompiler.h"\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"dialoguegraphschemacpp",children:"DialogueGraphSchema.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/DialogueGraphSchema.cpp" showLineNumbers',children:' #include "DialogueGraphSchema.h"\n #include "DialogueGraphNode_Root.h"\n// added-start\n#include "Sound/SoundBase.h"\n// added-end\n\n...\n\n// removed-start\n\nvoid UDialogueGraphSchema::SetNodePosition(UEdGraphNode* Node, const FVector2D& Position) const\n// removed-end\n// added-start\n#if ENGINE_MAJOR_VERSION == 5 && ENGINE_MINOR_VERSION >= 6\nusing FGraphLocationType = FVector2f;\n#else\nusing FGraphLocationType = FVector2D;\n#endif\n\nvoid UDialogueGraphSchema::SetNodePosition(UEdGraphNode* Node, const FGraphLocationType& Position) const\n// added-end\n {\n \tSuper::SetNodePosition(Node, Position);\n \n// added-start\n#if ENGINE_MAJOR_VERSION == 5 && ENGINE_MINOR_VERSION >= 6\n\t\t\t// Graph API gives FVector2f \u2192 convert to FVector2D for your data\n\t\t\tDNode->DialogueNode->NodePos = FVector2D(Position);\n#else\n\t\t\t// Pre-5.6 NodePos already matches type\n// added-end\n// added-start\n#endif\n// added-end\n// added-start\nvoid UDialogueGraphSchema::BreakPinLinks(UEdGraphPin& TargetPin, bool bSendsNodeNotifcation) const\n{\n\tconst FScopedTransaction Transaction(NSLOCTEXT("DialogueGraphSchema", "DialogueGraphSchema_BreakPinLinks", "Break Pin Links"));\n\t\n\tSuper::BreakPinLinks(TargetPin, bSendsNodeNotifcation);\n}\n\nvoid UDialogueGraphSchema::DroppedAssetsOnGraph(const TArray<FAssetData>& Assets, const FVector2D& GraphPosition, UEdGraph* Graph) const\n{\n\tUAssetEditorSubsystem* AssetEditorSubsystem = GEditor? GEditor->GetEditorSubsystem<UAssetEditorSubsystem>() : nullptr;\n\tif (!AssetEditorSubsystem)\n\t{\n\t\treturn;\n\t}\n\t\n\tif (FDialogueGraphEditor* DialogueGraphEditor = static_cast<FDialogueGraphEditor*>(AssetEditorSubsystem->FindEditorForAsset(Graph->GetOuter(), true)))\n\t{\n\t\tDialogueGraphEditor->AddNodesFromAssets(Assets, GraphPosition, Graph, nullptr);\n\t}\n}\n\nvoid UDialogueGraphSchema::DroppedAssetsOnNode(const TArray<FAssetData>& Assets, const FVector2D& GraphPosition, UEdGraphNode* Node) const\n{\n\tUAssetEditorSubsystem* AssetEditorSubsystem = GEditor? GEditor->GetEditorSubsystem<UAssetEditorSubsystem>() : nullptr;\n\tif (!AssetEditorSubsystem)\n\t{\n\t\treturn;\n\t}\n\t\n\tUEdGraph* Graph = Node->GetGraph();\n\tif (FDialogueGraphEditor* DialogueGraphEditor = static_cast<FDialogueGraphEditor*>(AssetEditorSubsystem->FindEditorForAsset(Graph->GetOuter(), true)))\n\t{\n\t\tDialogueGraphEditor->AddNodesFromAssets(Assets, GraphPosition, Graph, Node);\n\t}\n}\n\nvoid UDialogueGraphSchema::DroppedAssetsOnPin(const TArray<FAssetData>& Assets, const FVector2D& GraphPosition, UEdGraphPin* Pin) const\n{\n\tUAssetEditorSubsystem* AssetEditorSubsystem = GEditor? GEditor->GetEditorSubsystem<UAssetEditorSubsystem>() : nullptr;\n\tif (!AssetEditorSubsystem)\n\t{\n\t\treturn;\n\t}\n\n\tUEdGraph* Graph = Pin->GetOwningNode()->GetGraph();\n\tif (FDialogueGraphEditor* DialogueGraphEditor = static_cast<FDialogueGraphEditor*>(AssetEditorSubsystem->FindEditorForAsset(Graph->GetOuter(), true)))\n\t{\n\t\tDialogueGraphEditor->AddNodesFromAssets(Assets, GraphPosition, Graph, Pin->GetOwningNode());\n\t}\n}\n\nvoid UDialogueGraphSchema::GetAssetsGraphHoverMessage(const TArray<FAssetData>& Assets, const UEdGraph* HoverGraph, FString& OutTooltipText, bool& OutOkIcon) const\n{\n\tGetHoverMessage(Assets, OutTooltipText, OutOkIcon);\n}\n\nvoid UDialogueGraphSchema::GetAssetsNodeHoverMessage(const TArray<FAssetData>& Assets, const UEdGraphNode* HoverNode, FString& OutTooltipText, bool& OutOkIcon) const\n{\n\tGetHoverMessage(Assets, OutTooltipText, OutOkIcon);\n}\n\nvoid UDialogueGraphSchema::GetAssetsPinHoverMessage(const TArray<FAssetData>& Assets, const UEdGraphPin* HoverPin, FString& OutTooltipText, bool& OutOkIcon) const\n{\n\tGetHoverMessage(Assets, OutTooltipText, OutOkIcon);\n}\n\n// added-end\n// added-start\nvoid UDialogueGraphSchema::GetHoverMessage(const TArray<struct FAssetData>& Assets, FString& OutTooltipText, bool& OutOkIcon) const \n{\n\tint32 NumSoundWaves = 0;\n\tfor (const FAssetData& Asset : Assets)\n\t{\n\t\tif (UObject* AssetObject = Asset.GetAsset(); AssetObject && AssetObject->IsA<USoundBase>())\n\t\t{\n\t\t\tNumSoundWaves++;\n\t\t}\n\t}\n\n\tif (NumSoundWaves > 0)\n\t{\n\t\tOutOkIcon = true;\n\t\tOutTooltipText = NumSoundWaves > 1? "Create nodes using sound waves." : "Create node using sound wave.";\n\t}\n}\n\n// added-end\n\n...\n\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"dialogueassetfactoryh",children:"DialogueAssetFactory.h"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.strong,{children:"REMOVED"})}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"dialogueeditortabfactoriescpp",children:"DialogueEditorTabFactories.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/DialogueEditorTabFactories.cpp" showLineNumbers',children:' #include "DialogueEditorTabFactories.h"\n #include "DialogueBlueprint.h"\n\n...\n\n// removed-start\n#include "EditorStyleSet.h"\n// removed-end\n #include "Engine/Blueprint.h"\n #include "DialogueEditorStyle.h"\n #include "DialogueGraphEditor.h"\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"assettypeactions_dialogueblueprintcpp",children:"AssetTypeActions_DialogueBlueprint.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/AssetTypeActions_DialogueBlueprint.cpp" showLineNumbers',children:' \n #include "AssetTypeActions_DialogueBlueprint.h"\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"dialoguegraphcpp",children:"DialogueGraph.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/DialogueGraph.cpp" showLineNumbers',children:' #include "DialogueGraph.h"\n #include "Dialogue.h"\n// removed-start\n#include "NarrativeFunctionLibrary.h"\n#include "NarrativeComponent.h"\n// removed-end\n// added-start\n#include "GraphEditAction.h"\n// added-end\n\n...\n\n// removed-start\n#undef LOCTEXT_NAMESPACE // removed-end\n// added-start\n#undef LOCTEXT_NAMESPACE \n// added-end\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"dialogueeditordetailsh",children:"DialogueEditorDetails.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/DialogueEditorDetails.h" showLineNumbers',children:' #pragma once\n \n// added-start\n#include "IDetailChildrenBuilder.h"\n#include "IDetailPropertyRow.h"\n#include "PropertyHandle.h"\n// added-end\n\n...\n\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"dialogueeditortabscpp",children:"DialogueEditorTabs.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/DialogueEditorTabs.cpp" showLineNumbers',children:' #include "DialogueEditorTabs.h"\n \n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"dialogueeditordetailscpp",children:"DialogueEditorDetails.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/DialogueEditorDetails.cpp" showLineNumbers',children:' #include "DialogueEditorDetails.h"\n #include "DetailLayoutBuilder.h"\n\n...\n\n// removed-start\n#include "DialogueBlueprint.h"\n#include "DetailCategoryBuilder.h"\n#include "DetailWidgetRow.h"\n// removed-end\n #include "Widgets/Input/SComboBox.h"\n// removed-start\n#include "IPropertyUtilities.h"\n// removed-end\n// added-start\n#include "PropertyHandle.h"\n// added-end\n \n #define LOCTEXT_NAMESPACE "DialogueEditorDetails"\n\n...\n\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"dialoguegrapheditorcpp",children:"DialogueGraphEditor.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/DialogueGraphEditor.cpp" showLineNumbers',children:' #include "DialogueGraphEditor.h"\n #include "NarrativeDialogueEditorModule.h"\n// added-start\n\n#include "DialogueDebugger.h"\n#include "DialogueEditorStyle.h"\n// added-end\n// added-start\n#include "SNodePanel.h"\n// added-end\n// added-start\n#include "Sound/SoundBase.h"\n// added-end\n// added-start\n\tFEditorDelegates::BeginPIE.RemoveAll(this);\n\tFEditorDelegates::EndPIE.RemoveAll(this);\n\n\tSetGraphEditable(true);\n\t\n// added-end\n// added-start\nvoid FDialogueGraphEditor::SwitchToQuestAsset()\n{\n\tif (!DialogueBlueprint)\n\t{\n\t\treturn;\n\t}\n\t\n\tUDialogue* Dialogue = Cast<UDialogue>(DialogueBlueprint->GeneratedClass.GetDefaultObject());\n\t\n#if ENGINE_MAJOR_VERSION == 5 && ENGINE_MINOR_VERSION >= 2\n\tif (GEditor)\n\t{\n\t\tUAssetEditorSubsystem* AssetEditorSubsystem = GEditor->GetEditorSubsystem<UAssetEditorSubsystem>();\n\t\tif (AssetEditorSubsystem && Dialogue)\n\t\t{\n\t\t\tAssetEditorSubsystem->OpenEditorForAsset(UBlueprint::GetBlueprintFromClass(Dialogue->EditorLinkedQuest));\n\t\t}\n\t}\n#else\n\t// UE 5.1 fallback (AssetEditorSubsystem does not exist)\n\tif (GEditor)\n\t{\n\t\tGEditor->EditObject(Dialogue->EditorLinkedQuest);\n\t}\n#endif\n}\n\nbool FDialogueGraphEditor::CanSwitchToQuestAsset()\n{\n\tif (!DialogueBlueprint)\n\t{\n\t\treturn false;\n\t}\n\t\n\tUDialogue* Dialogue = Cast<UDialogue>(DialogueBlueprint->GeneratedClass.GetDefaultObject());\n\treturn Dialogue? Dialogue->EditorLinkedQuest != nullptr : false;\n}\n\n// added-end\n// added-start\n\t// dialogue assets cannot be edited during PIE\n\tFEditorDelegates::BeginPIE.AddRaw(this, &FDialogueGraphEditor::OnBeginPIE);\n\tFEditorDelegates::EndPIE.AddRaw(this, &FDialogueGraphEditor::OnEndPIE);\n\t\n// added-end\n// added-start\n\t// create a debugger instance before binding commands\n\tDebugger = MakeShareable(new FDialogueDebugger);\n\t\n// added-end\n\n...\n\n// removed-start\n\t//BindCommands();\n// removed-end\n \tRegisterMenus();\n// removed-start\n\n// removed-end\n// added-start\n\t\n// added-end\n \tCreateInternalWidgets();\n \n// added-start\n\t// setup debugger\n\tDebugger->Setup(DialogueBlueprint, SharedThis(this));\n\n\tif (UToolMenu* EditorToolbar = UToolMenus::Get()->FindMenu("AssetEditor.Dialogue Editor.Toolbar.DialogueEditor"))\n\t{\n\t\tDebugger->RegisterDebuggerToolbar(EditorToolbar);\n\n\t\tFToolMenuSection& Section = EditorToolbar->AddSection("EditQuestAsset", FText::GetEmpty(), {"Debugging", EToolMenuInsertType::After});\n\t\tSection.AddEntry(FToolMenuEntry::InitToolBarButton(\n\t\t\tFDialogueEditorCommands::Get().OpenLinkedQuest,\n\t\t\tLOCTEXT("DialogueGraphEditor_EditQuest", "Edit Quest"),\n\t\t\tLOCTEXT("DialogueGraphEditor_EditQuest_ToolTip", "When A quest has this Dialogue Asset class is selected, this will switch to that quest."),\n\t\t\tFSlateIcon(FDialogueEditorStyle::GetStyleSetName(), "DialogueEditor.QuestIcon"))\n\t\t);\n\t}\n\n// added-end\n// added-start\n\t\n\tif (!FDialogueDebugger::IsPIENotSimulating())\n\t{\n\t\tSetGraphEditable(false);\n\t}\n// added-end\n// added-start\n\n\t\tToolkitCommands->MapAction(\n\t\tFDialogueEditorCommands::Get().OpenLinkedQuest,\n\t\tFExecuteAction::CreateSP(this, &FDialogueGraphEditor::SwitchToQuestAsset),\n\t\tFCanExecuteAction::CreateSP(this, &FDialogueGraphEditor::CanSwitchToQuestAsset));\n// added-end\n// added-start\n\t\t\t// walk nodes to be pasted, and accumulate their position \n\t\t\tFVector2D AvgNodePosition(0.0f, 0.0f);\n\t\t\tfor (TSet<UEdGraphNode*>::TIterator It(PastedNodes); It; ++It)\n\t\t\t{\n\t\t\t\tUEdGraphNode* Node = *It;\n\t\t\t\tAvgNodePosition.X += Node->NodePosX;\n\t\t\t\tAvgNodePosition.Y += Node->NodePosY;\n\t\t\t}\n\t\t\t// average the accumulated node positions\n\t\t\tfloat InvNumNodes = 1.0f / static_cast<float>(PastedNodes.Num());\n\t\t\tAvgNodePosition.X *= InvNumNodes;\n\t\t\tAvgNodePosition.Y *= InvNumNodes;\n\t\t\t\n// added-end\n\n...\n\n// removed-start\n\t\t\t\t\tPasteNode->NodePosX += 100.f;\n\t\t\t\t\tPasteNode->NodePosY += 100.f;\n\n\t\t\t\t\tPasteNode->SnapToGrid(16);\n// removed-end\n// added-start\n\t\t\t\t\t// set new paste node position, accounting for selected nodes average position\n\t\t\t\t\tPasteNode->NodePosX = static_cast<int32>((PasteNode->NodePosX - AvgNodePosition.X) + GraphLocation.X);\n\t\t\t\t\tPasteNode->NodePosY = static_cast<int32>((PasteNode->NodePosY - AvgNodePosition.Y) + GraphLocation.Y);\n\n\t\t\t\t\tPasteNode->SnapToGrid(SNodePanel::GetSnapGridSize());\n// added-end\n \n \t\t\t\t\t// Give new node a different Guid from the old one\n \t\t\t\t\tPasteNode->CreateNewGuid();\n// added-start\n\n\tFDialogueEditorCommands::Register();\n\t\n\tif (Debugger)\n\t{\n\t\tDebugger->BindCommands(ToolkitCommands);\n\t}\n// added-end\n// added-start\n\t// read only\n\tif (!IsGraphEditable())\n\t{\n\t\treturn;\n\t}\n\t\n// added-end\n// added-start\n\t\t\t\t\t\tconst FScopedTransaction Transaction(NSLOCTEXT("DialogueGraphEditor", "DialogueGraphEditor_EventFromNode", "Create event for node"));\n\t\t\t\t\t\tDialogueBlueprint->Modify();\n\t\t\t\t\t\t\n// added-end\n// added-start\nvoid FDialogueGraphEditor::AddNodesFromAssets(const TArray<FAssetData>& Assets, const FVector2D& GraphPosition, UEdGraph* DestinationGraph, UEdGraphNode* SelectedNode) const\n{\n\tif (Assets.IsEmpty() || !DestinationGraph || !GEditor)\n\t{\n\t\treturn;\n\t}\n\n\tTSharedPtr<SGraphEditor> FocusedGraph = FocusedGraphEdPtr.Pin();\n\tif (!FocusedGraph.IsValid())\n\t{\n\t\treturn;\n\t}\n\n\t// get dialogue\n\tUDialogue* Dialogue = GetDialogueAsset()? Cast<UDialogue>(GetDialogueAsset()->GeneratedClass->GetDefaultObject()) : nullptr;\n\t\t\n\tconst FScopedTransaction Transaction(NSLOCTEXT("FDialogueGraphEditor", "FDialogueGraphEditor_NodeFromAssets", "Create nodes from assets"));\n\tDestinationGraph->Modify();\n\n\t// pin to connect to\n\tUEdGraphPin* ConnectedPin = SelectedNode? SelectedNode->FindPin(NAME_None, EGPD_Output) : nullptr;\n\n\tFocusedGraph->ClearSelectionSet();\n\t\n\tFVector2D NewNodePos = GraphPosition;\n\tfor (const FAssetData& Asset : Assets)\n\t{\n\t\t// currently sound waves are only supported\n\t\tif (USoundBase* SoundWave = Cast<USoundBase>(Asset.GetAsset()))\n\t\t{\t\t\t\n\t\t\t// check if there is a speaker in the asset name\n\t\t\tconst FString WavName = SoundWave->GetFName().ToString();\n\t\t\tconst FSpeakerInfo* Speaker = Dialogue->Speakers.FindByPredicate([&WavName](const FSpeakerInfo& SpeakerInfo)\n\t\t\t{\n\t\t\t\treturn WavName.Contains(SpeakerInfo.SpeakerID.ToString());\n\t\t\t});\n\n\t\t\t// create new graph node\n\t\t\tconst UClass* NodeClass = (Speaker && Speaker->bIsPlayer) || WavName.Contains("Player")? UDialogueGraphNode_Player::StaticClass() : UDialogueGraphNode_NPC::StaticClass();\n\t\t\tUDialogueGraphNode* NewGraphNode = NewObject<UDialogueGraphNode>(DestinationGraph, NodeClass);\n\t\t\tif (!NewGraphNode)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tFDialogueSchemaAction_NewNode AddNewNode;\n\t\t\tAddNewNode.NodeTemplate = NewGraphNode;\n\n\t\t\t// create node and assign sound wave\n\t\t\tAddNewNode.PerformAction(DestinationGraph, ConnectedPin, NewNodePos);\n\t\t\tNewGraphNode->DialogueNode->Line.DialogueSound = SoundWave;\n\n\t\t\t// offset next node position\n\t\t\tNewNodePos.X += 500.0f;\n\n\t\t\t// when node is a npc node, set the speaker to the found speaker if any\n\t\t\tif (UDialogueNode_NPC* NPCNode = Cast<UDialogueNode_NPC>(NewGraphNode->DialogueNode))\n\t\t\t{\n\t\t\t\tFName SpeakerID = Dialogue->Speakers.IsValidIndex(0)? Dialogue->Speakers[0].SpeakerID : NAME_None;\n\n\t\t\t\tif (Speaker)\n\t\t\t\t{\n\t\t\t\t\tSpeakerID = Speaker->SpeakerID;\n\t\t\t\t}\n\n\t\t\t\tNPCNode->SetSpeakerID(SpeakerID);\n\t\t\t}\n\n\t\t\t// generate an id\n\t\t\tNewGraphNode->DialogueNode->GenerateIDFromText();\n\t\t\t\n\t\t\tDestinationGraph->NotifyGraphChanged();\n\t\t\t\n\t\t\t// add new node to selection\n\t\t\tFocusedGraph->SetNodeSelection(NewGraphNode, true);\n\t\t\t\n\t\t\tGetDialogueAsset()->PostEditChange();\n\t\t\tGetDialogueAsset()->MarkPackageDirty();\n\t\t\t\n\t\t}\n\t}\n}\n\nvoid FDialogueGraphEditor::SetGraphEditable(const bool Editable)\n{\n\tif (IsValid(DialogueBlueprint) && IsValid(DialogueBlueprint->DialogueGraph))\n\t{\n\t\tDialogueBlueprint->DialogueGraph->bEditable = Editable;\n\t}\n}\n\nbool FDialogueGraphEditor::IsGraphEditable() const\n{\n\treturn IsValid(DialogueBlueprint) && IsValid(DialogueBlueprint->DialogueGraph)? DialogueBlueprint->DialogueGraph->bEditable : false;\n}\n\nvoid FDialogueGraphEditor::JumpOrAddDialogueNode(FName NodeID)\n{\n\t// get dialogue\n\tUDialogue* Dialogue = GetDialogueAsset()? Cast<UDialogue>(GetDialogueAsset()->GeneratedClass->GetDefaultObject()) : nullptr;\n\tUEdGraph* DestinationGraph = Dialogue? GetDialogueAsset()->DialogueGraph : nullptr;\n\tif (!DestinationGraph)\n\t{\n\t\treturn;\n\t}\n\n\t// check if a node with the state ID already exists\n\tTObjectPtr<UEdGraphNode>* ExistingNode = DialogueBlueprint->DialogueGraph->Nodes.FindByPredicate([this, &NodeID](const UEdGraphNode* Node)\n\t{\n\t\tconst UDialogueGraphNode* DialogueNode = Cast<UDialogueGraphNode>(Node);\n\t\treturn DialogueNode? DialogueNode->DialogueNode->GetID() == NodeID : false;\n\t});\n\n\t// when no existing node was found, create a new one\n\tif (!ExistingNode)\n\t{\n\t\tconst FScopedTransaction Transaction(NSLOCTEXT("FDialogueGraphEditor", "FDialogueGraphEditor_NewNodeFromQuest", "Create node from Quest State"));\n\t\tDialogueBlueprint->Modify();\n\t\tDestinationGraph->Modify();\n\t\n\t\t// create new graph node\n\t\tUDialogueGraphNode* NewGraphNode = NewObject<UDialogueGraphNode>(DestinationGraph, UDialogueGraphNode_NPC::StaticClass());\n\t\tif (!NewGraphNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tFDialogueSchemaAction_NewNode AddNewNode;\n\t\tAddNewNode.NodeTemplate = NewGraphNode;\n\n\t\t// create node\n\t\tAddNewNode.PerformAction(DestinationGraph, nullptr, {});\n\n\t\t// set NPC speaker\n\t\tif (UDialogueNode_NPC* NPCNode = Cast<UDialogueNode_NPC>(NewGraphNode->DialogueNode))\n\t\t{\n\t\t\tconst FName SpeakerID = Dialogue->Speakers.IsValidIndex(0)? Dialogue->Speakers[0].SpeakerID : NAME_None;\n\t\t\tNPCNode->SetSpeakerID(SpeakerID);\n\t\t}\n\t\t\n\t\t// generate an id\n\t\tNewGraphNode->DialogueNode->SetID(NodeID);\n\t\t\n\t\tDestinationGraph->NotifyGraphChanged();\n\t\t\t\t\t\t\n\t\tGetDialogueAsset()->PostEditChange();\n\t\tGetDialogueAsset()->MarkPackageDirty();\n\t\t\n\t\tJumpToNode(NewGraphNode);\n\t}\n\telse\n\t{\n\t\tJumpToNode(*ExistingNode);\n\t}\n}\n\nvoid FDialogueGraphEditor::OnBeginPIE(bool bSimulating)\n{\n\tSetGraphEditable(false);\n}\n\nvoid FDialogueGraphEditor::OnEndPIE(bool bSimulating)\n{\n\tSetGraphEditable(true);\n}\n\n// added-end\n\n...\n\n// removed-start\n\n\tCreateDialogueCommandList();\n// removed-end\n \n \tSGraphEditor::FGraphEditorEvents InEvents;\n \tInEvents.OnSelectionChanged = SGraphEditor::FOnSelectionChanged::CreateSP(this, &FDialogueGraphEditor::OnSelectedNodesChanged);\n\n...\n\n// removed-start\n\n// removed-end\n void FDialogueGraphEditor::ExtendToolbar()\n {\n \n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"sdialoguegraphnodeh",children:"SDialogueGraphNode.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/SDialogueGraphNode.h" showLineNumbers',children:" #pragma once\n \n// added-start\n\tEVisibility GetActiveStateImageVisibility() const;\n\n// added-end\n\n...\n\n\n\n"})}),"\n",(0,r.jsx)(t.h3,{id:"dialoguegraphnode_rootcpp",children:"DialogueGraphNode_Root.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/DialogueGraphNode_Root.cpp" showLineNumbers',children:' #include "DialogueGraphNode_Root.h"\n #include "DialogueEditorTypes.h"\n// removed-start\n#include "DialogueEditorSettings.h"\n// removed-end\n\n...\n\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"dialoguegraphschemah",children:"DialogueGraphSchema.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/DialogueGraphSchema.h" showLineNumbers',children:"#pragma once\n \n...\n\n// removed-start\n\tvirtual void SetNodePosition(UEdGraphNode* Node, const FVector2D& Position) const;\n// removed-end\n// added-start\n#if ENGINE_MAJOR_VERSION == 5 && ENGINE_MINOR_VERSION >= 6\n\tvirtual void SetNodePosition(UEdGraphNode* Node, const FVector2f& GraphLocation) const;\n#else\n\tvirtual void SetNodePosition(UEdGraphNode* Node, const FVector2D& GraphLocation) const;\n#endif\n// added-end\n \tvirtual EGraphType GetGraphType(const UEdGraph* TestEdGraph) const;\n// added-start\n\tvirtual void BreakPinLinks(UEdGraphPin& TargetPin, bool bSendsNodeNotifcation) const override;\n\tvirtual void DroppedAssetsOnGraph(const TArray<FAssetData>& Assets, const FVector2D& GraphPosition, UEdGraph* Graph) const override;\n\tvirtual void DroppedAssetsOnNode(const TArray<FAssetData>& Assets, const FVector2D& GraphPosition, UEdGraphNode* Node) const override;\n\tvirtual void DroppedAssetsOnPin(const TArray<FAssetData>& Assets, const FVector2D& GraphPosition, UEdGraphPin* Pin) const override;\n\tvirtual void GetAssetsGraphHoverMessage(const TArray<FAssetData>& Assets, const UEdGraph* HoverGraph, FString& OutTooltipText, bool& OutOkIcon) const override;\n\tvirtual void GetAssetsNodeHoverMessage(const TArray<FAssetData>& Assets, const UEdGraphNode* HoverNode, FString& OutTooltipText, bool& OutOkIcon) const override;\n\tvirtual void GetAssetsPinHoverMessage(const TArray<FAssetData>& Assets, const UEdGraphPin* HoverPin, FString& OutTooltipText, bool& OutOkIcon) const override;\n// added-end\n \t//~ End EdGraphSchema Interface\n \n// added-start\n\t\n\tvoid GetHoverMessage(const TArray<FAssetData>& Assets, FString& OutTooltipText, bool& OutOkIcon) const;\n// added-end\n\n...\n\n\n\n"})}),"\n",(0,r.jsx)(t.h3,{id:"assettypeactions_dialogueassetcpp",children:"AssetTypeActions_DialogueAsset.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/AssetTypeActions_DialogueAsset.cpp" showLineNumbers',children:' \n #include "AssetTypeActions_DialogueAsset.h"\n// removed-start\n#include "DialogueGraphEditor.h"\n// removed-end\n\n...\n\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"dialoguegraphh",children:"DialogueGraph.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/DialogueGraph.h" showLineNumbers',children:'#pragma once\n \n...\n\n// removed-start\n#include "GraphEditAction.h"\n// removed-end\n #include "DialogueGraph.generated.h"\n \n class UDialogueGraphNode;\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"dialogueeditorcommandsh",children:"DialogueEditorCommands.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/DialogueEditorCommands.h" showLineNumbers',children:" #pragma once\n \n// added-start\n\t// jumps to the current active node\n\tTSharedPtr<FUICommandInfo> JumpToActiveNode;\n\t\n\t// When A quest has this Dialogue Asset class is selected, this will switch to that quest.\n\tTSharedPtr<FUICommandInfo> OpenLinkedQuest;\n\n// added-end\n\n...\n\n\n\n"})}),"\n",(0,r.jsx)(t.h3,{id:"dialoguegraphnode_playercpp",children:"DialogueGraphNode_Player.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/DialogueGraphNode_Player.cpp" showLineNumbers',children:' #include "DialogueGraphNode_Player.h"\n// removed-start\n#include "DialogueGraph.h"\n// removed-end\n #include "EdGraph/EdGraphSchema.h"\n\n...\n\n// removed-start\n#include "DialogueSM.h"\n#include "Dialogue.h"\n#include "DialogueGraphNode.h"\n// removed-end\n #include "DialogueEditorSettings.h"\n \n #define LOCTEXT_NAMESPACE "DialogueGraphNode_Player"\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"dialogueconnectiondrawingpolicyh",children:"DialogueConnectionDrawingPolicy.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/DialogueConnectionDrawingPolicy.h" showLineNumbers',children:" #pragma once\n \n// added-start\n\nclass FNarrativeGeometryHelper\n{\n\npublic: \n#if ENGINE_MAJOR_VERSION == 5 && ENGINE_MINOR_VERSION >= 6\n\tstatic FVector2f HorizontalBottomOf(const FGeometry& SomeGeometry)\n\t{\n\t\tconst FVector2f GeometryDrawSize = SomeGeometry.GetDrawSize();\n\t\treturn FVector2f(\n\t\t\tSomeGeometry.AbsolutePosition.X + (GeometryDrawSize.X / 2.f),\n\t\t\tSomeGeometry.AbsolutePosition.Y + GeometryDrawSize.Y);\n\t};\n\n\tstatic FVector2f HorizontalTopOf(const FGeometry& SomeGeometry)\n\t{\n\t\tconst FVector2f GeometryDrawSize = SomeGeometry.GetDrawSize();\n\t\treturn FVector2f(\n\t\t\tSomeGeometry.AbsolutePosition.X + (GeometryDrawSize.X / 2.f),\n\t\t\tSomeGeometry.AbsolutePosition.Y);\n\t};\n#else\n\tstatic FVector2d HorizontalBottomOf(const FGeometry& SomeGeometry)\n\t{\n\t\tconst FVector2d GeometryDrawSize = SomeGeometry.GetDrawSize();\n\t\treturn FVector2d(\n\t\t\tSomeGeometry.AbsolutePosition.X + (GeometryDrawSize.X / 2.f),\n\t\t\tSomeGeometry.AbsolutePosition.Y + GeometryDrawSize.Y);\n\t};\n\n\tstatic FVector2d HorizontalTopOf(const FGeometry& SomeGeometry)\n\t{\n\t\tconst FVector2d GeometryDrawSize = SomeGeometry.GetDrawSize();\n\t\treturn FVector2d(\n\t\t\tSomeGeometry.AbsolutePosition.X + (GeometryDrawSize.X / 2.f),\n\t\t\tSomeGeometry.AbsolutePosition.Y);\n\t};\n#endif\n\n};\n// added-end\n\n...\n\n// removed-start\n\tvirtual FVector2D ComputeSplineTangent(const FVector2D& Start, const FVector2D& End) const override;\n// removed-end\n \tvoid DetermineWiringStyle(UEdGraphPin* OutputPin, UEdGraphPin* InputPin, /*inout*/ FConnectionParams& Params);\n// removed-start\n\tvirtual void DrawConnection(int32 LayerId, const FVector2D& Start, const FVector2D& End, const FConnectionParams& Params) override;\n// removed-end\n// added-start\n\n#if ENGINE_MAJOR_VERSION == 5 && ENGINE_MINOR_VERSION >= 6\n\tusing FGraphLocationType = FVector2f;\n#else\n\tusing FGraphLocationType = FVector2D;\n#endif\n\t\n\tvirtual FGraphLocationType ComputeSplineTangent(const FGraphLocationType& Start, const FGraphLocationType& End) const override;\n\tvirtual void DrawConnection(int32 LayerId, const FGraphLocationType& Start, const FGraphLocationType& End, const FConnectionParams& Params) override;\n\tvirtual void DrawPreviewConnector(const FGeometry& PinGeometry, const FGraphLocationType& StartPoint, const FGraphLocationType& EndPoint, UEdGraphPin* Pin) override;\n\n\tvirtual void DrawSplineWithArrow(const FGeometry& StartGeom, const FGeometry& EndGeom, const FConnectionParams& Params);\n// added-end\n \n \tconst FSlateBrush* BacklinkImage;\n\n...\n\n// removed-start\n};// removed-end\n// added-start\n};\n// added-end\n\n\n"})}),"\n",(0,r.jsx)(t.h3,{id:"dialogueeditorstylecpp",children:"DialogueEditorStyle.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/DialogueEditorStyle.cpp" showLineNumbers',children:' #include "DialogueEditorStyle.h"\n #include "Styling/SlateStyle.h"\n// added-start\n\t// edit quest asset icon\n\tStyleSet->Set(FName(TEXT("DialogueEditor.QuestIcon")), new IMAGE_BRUSH("Quest", FVector2D(64.f, 64.f)));\n\n// added-end\n\n...\n\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"dialoguenodeuserwidgetcpp",children:"DialogueNodeUserWidget.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/DialogueNodeUserWidget.cpp" showLineNumbers ',children:' #include "DialogueNodeUserWidget.h"\n// removed-start\n#include <Components/VerticalBox.h>\n#include <Components/Overlay.h>\n#include <Components/VerticalBoxSlot.h>\n#include <Blueprint/WidgetTree.h>\n// removed-end\n\n...\n\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"dialogueeditorcommandscpp",children:"DialogueEditorCommands.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/DialogueEditorCommands.cpp" showLineNumbers',children:' #include "DialogueEditorCommands.h"\n #include "DialogueEditorStyle.h"\n// added-start\n\tUI_COMMAND(JumpToActiveNode, "Jump To Active Node", "Jumps to the active node.", EUserInterfaceActionType::Button, FInputChord());\n\tUI_COMMAND(OpenLinkedQuest, "Edit Quest", "open connected quest.", EUserInterfaceActionType::Button, FInputChord());\n// added-end\n\n...\n\n// removed-start\n#undef LOCTEXT_NAMESPACE // removed-end\n// added-start\n#undef LOCTEXT_NAMESPACE \n// added-end\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"sdialoguegraphpincpp",children:"SDialogueGraphPin.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/SDialogueGraphPin.cpp" showLineNumbers',children:' \n \n #include "SDialogueGraphPin.h"\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"dialogueassetfactorycpp",children:"DialogueAssetFactory.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/DialogueAssetFactory.cpp" showLineNumbers',children:' \n #include "DialogueAssetFactory.h"\n\n...\n\n// removed-start\n#include "BlueprintEditorSettings.h"\n#include "DialogueGraph.h"\n#include "DialogueGraphSchema.h"\n#include "Kismet2/BlueprintEditorUtils.h"\n// removed-end\n #include "DialogueEditorSettings.h"\n \n #define LOCTEXT_NAMESPACE "DialogueAssetFactory"\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"dialogueeditormodesh",children:"DialogueEditorModes.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/DialogueEditorModes.h" showLineNumbers',children:'#pragma once\n \n...\n\n// removed-start\n#include "WorkflowOrientedApp/ApplicationMode.h"\n// removed-end\n #include "BlueprintEditorModes.h"\n \n /** Application mode for main behavior tree editing mode */\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"dialoguegraphnodeh",children:"DialogueGraphNode.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/DialogueGraphNode.h" showLineNumbers',children:"#pragma once\n \n...\n\n// removed-start\n\t\tclass UK2Node_CustomEvent* OnPlayedCustomNode;\n// removed-end\n// added-start\n\tclass UK2Node_CustomEvent* OnPlayedCustomNode;\n// added-end\n \n \tUFUNCTION()\n// removed-start\n\t\tvoid OnStartedOrFinished(UDialogueNode* Node, bool bStarted);\n// removed-end\n// added-start\n\tvoid OnStartedOrFinished(UDialogueNode* Node, bool bStarted);\n\n\tuint8 bActiveNode : 1;\n// added-end\n \n\n...\n\n\n\n"})}),"\n",(0,r.jsx)(t.h3,{id:"dialogueeditortypescpp",children:"DialogueEditorTypes.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/DialogueEditorTypes.cpp" showLineNumbers',children:' #include "DialogueEditorTypes.h"\n \n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"sdialoguegraphnodecpp",children:"SDialogueGraphNode.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeDialogueEditor/Private/SDialogueGraphNode.cpp" showLineNumbers',children:' #include "SDialogueGraphNode.h"\n #include "DialogueGraphNode.h"\n\n...\n\n// removed-start\n#include "DialogueGraph.h"\n// removed-end\n #include "SGraphPanel.h"\n #include "ScopedTransaction.h"\n #include "DialogueSM.h"\n\n...\n\n// removed-start\n#include "DialogueEditorStyle.h"\n// removed-end\n #include "DialogueEditorSettings.h"\n #include <Blueprint/UserWidget.h>\n #include "Components/VerticalBox.h"\n// removed-start\n#include <Slate/SObjectWidget.h>\n// removed-end\n// added-start\n#include "DialogueDebugger.h"\n// added-end\n// added-start\n\t\t\t\t\n\t\t\t\t// dialogue widget\n// added-end\n\n...\n\n// removed-start\n\t\t\t[\n\t\t\t\tDialogueNodeWidgetRef.ToSharedRef()\n\t\t\t]\n// removed-end\n// added-start\n\t\t\t\t[\n\t\t\t\t\tDialogueNodeWidgetRef.ToSharedRef()\n\t\t\t\t]\n\n\t\t\t\t// debugger overlay\n\t\t\t\t+ SOverlay::Slot()\n\t\t\t\t[\n\t\t\t\t\tSNew(SImage)\n\t\t\t\t\t.Image(FAppStyle::GetBrush(TEXT("Graph.Node.DiffHighlight")))\n\t\t\t\t\t// yellow\n\t\t\t\t\t.ColorAndOpacity(FLinearColor(0.0f, 1.0f, 0.0f, 0.75f))\n\t\t\t\t\t.Visibility_Raw(this, &SDialogueGraphNode::GetActiveStateImageVisibility)\n\t\t\t\t]\n// added-end\n \t\t\t];\n \t}\n \telse // Old style yucky slate ones\n// added-start\nEVisibility SDialogueGraphNode::GetActiveStateImageVisibility() const\n{\n\tconst UDialogueGraphNode* DialogueGraphNode = Cast<UDialogueGraphNode>(GraphNode);\n\treturn DialogueGraphNode && DialogueGraphNode->bActiveNode? EVisibility::HitTestInvisible : EVisibility::Collapsed;\n}\n\n// added-end\n\n...\n\n// removed-start\n#undef LOCTEXT_NAMESPACE// removed-end\n// added-start\n#undef LOCTEXT_NAMESPACE\n// added-end\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"narrativequesteditorbuildcs",children:"NarrativeQuestEditor.Build.cs"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/NarrativeQuestEditor.Build.cs" showLineNumbers',children:' using UnrealBuildTool;\n \n// added-start\n                "GameplayTags",\n// added-end\n\n...\n\n// removed-start\n                "UMG"\n// removed-end\n// added-start\n                "UMG",\n                "ToolMenus", \n                "NarrativeDialogueEditor", "NarrativePreEditor" // NOTE: here for quick creating dialogue nodes from quest states\n// added-end\n             }\n \t\t\t);\n \t\t\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questblueprinth",children:"QuestBlueprint.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Public/QuestBlueprint.h" showLineNumbers',children:" #pragma once\n \n\n\n"})}),"\n",(0,r.jsx)(t.h3,{id:"questnodeuserwidgeth",children:"QuestNodeUserWidget.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Public/QuestNodeUserWidget.h" showLineNumbers protected:',children:' \n// added-start\n\tUFUNCTION(BlueprintCallable, Category="Dialogue", meta=(DevelopmentOnly))\n\tvoid AddOrJumpToMatchingDialogueNode();\n\t\n\tUFUNCTION(BlueprintCallable, Category="Dialogue", meta=(DevelopmentOnly))\n\tbool DoesMatchingDialogueNodeExist();\n\n// added-end\n\n...\n\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questgraphschemah",children:"QuestGraphSchema.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/QuestGraphSchema.h" showLineNumbers',children:" #pragma once\n \n// added-start\n\tvirtual void BreakPinLinks(UEdGraphPin& TargetPin, bool bSendsNodeNotifcation) const override;\n// added-end\n\n...\n\n\n\n"})}),"\n",(0,r.jsx)(t.h3,{id:"questgraphnodecpp",children:"QuestGraphNode.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/QuestGraphNode.cpp" showLineNumbers',children:' #include "QuestGraphNode.h"\n #include "QuestGraph.h"\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"assettypeactions_narrativequesttaskcpp",children:"AssetTypeActions_NarrativeQuestTask.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/AssetTypeActions_NarrativeQuestTask.cpp" showLineNumbers',children:' #include "AssetTypeActions_NarrativeQuestTask.h"\n// removed-start\n#include "NarrativeDataTask.h"\n// removed-end\n #include "NarrativeCondition.h"\n\n...\n\n// removed-start\n#include "QuestTask.h"\n// removed-end\n #include "NarrativeQuestTaskBlueprint.h"\n #include <Factories/BlueprintFactory.h>\n \n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questgraphnode_actioncpp",children:"QuestGraphNode_Action.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/QuestGraphNode_Action.cpp" showLineNumbers',children:' #include "QuestGraphNode_Action.h"\n #include "QuestEditorTypes.h"\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"assettypeactions_questactioncpp",children:"AssetTypeActions_QuestAction.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/AssetTypeActions_QuestAction.cpp" showLineNumbers',children:' #include "AssetTypeActions_QuestAction.h"\n #include "NarrativeDataTask.h"\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"k2node_completenarrativetaskcpp",children:"K2Node_CompleteNarrativeTask.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/K2Node_CompleteNarrativeTask.cpp" showLineNumbers',children:' \n #include "K2Node_CompleteNarrativeTask.h"\n// removed-start\n#include "EdGraphSchema_K2_Actions.h"\n// removed-end\n\n...\n\n// removed-start\n#include "BlueprintActionMenuBuilder.h"\n// removed-end\n #include "NarrativeFunctionLibrary.h"\n #include "NarrativeComponent.h"\n #include "NarrativeDataTask.h"\n// added-start\n#include "K2Node_CallFunction.h"\n// added-end\n\n...\n\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questassetfactorycpp",children:"QuestAssetFactory.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/QuestAssetFactory.cpp" showLineNumbers',children:' #include "QuestAssetFactory.h"\n #include "Editor/ClassViewer/Public/ClassViewerModule.h"\n\n...\n\n// removed-start\n#include "Kismet2/SClassPickerDialog.h"\n// removed-end\n #include "Kismet2/KismetEditorUtilities.h"\n #include "QuestBlueprintGeneratedClass.h"\n #include "Quest.h"\n// removed-start\n#include "BlueprintEditorSettings.h"\n// removed-end\n\n...\n\n// removed-start\n#include "QuestGraph.h"\n#include "QuestGraphSchema.h"\n#include "Kismet2/BlueprintEditorUtils.h"\n// removed-end\n \n #define LOCTEXT_NAMESPACE "QuestAssetFactory"\n \n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questgraphh",children:"QuestGraph.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/QuestGraph.h" showLineNumbers',children:'#pragma once\n \n...\n\n// removed-start\n#include "GraphEditAction.h"\n// removed-end\n #include "QuestGraph.generated.h"\n \n class UQuestGraphNode;\n// added-start\n\tvirtual bool Modify(bool bAlwaysMarkDirty = true) override;\n// added-end\n// added-start\n\t\n\tUQuestNode* DuplicateNode(const UQuestNode* OldNode);\n// added-end\n\n...\n\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questgraphnode_rootcpp",children:"QuestGraphNode_Root.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/QuestGraphNode_Root.cpp" showLineNumbers',children:' #include "QuestGraphNode_Root.h"\n #include "QuestEditorTypes.h"\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questconnectiondrawingpolicycpp",children:"QuestConnectionDrawingPolicy.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/QuestConnectionDrawingPolicy.cpp" showLineNumbers',children:' #include "QuestConnectionDrawingPolicy.h"\n #include "QuestGraphNode_Action.h"\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questeditortabscpp",children:"QuestEditorTabs.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/QuestEditorTabs.cpp" showLineNumbers',children:' #include "QuestEditorTabs.h"\n \n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questactionfactorycpp",children:"QuestActionFactory.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/QuestActionFactory.cpp" showLineNumbers',children:' #include "QuestActionFactory.h"\n #include "NarrativeDataTask.h"\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questblueprintcompilercpp",children:"QuestBlueprintCompiler.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/QuestBlueprintCompiler.cpp" showLineNumbers',children:' \n #include "QuestBlueprintCompiler.h"\n// added-start\nvoid FQuestBlueprintCompilerContext::CreateClassVariablesFromBlueprint()\n{\n\tSuper::CreateClassVariablesFromBlueprint();\n\n\n}\n\n// added-end\n\n...\n\n// removed-start\n\t\t}\n// removed-end\n// added-start\n\t\t} \n// added-end\n \n \t\tFixAbandonedQuestTemplate(QuestBP);\n \n\n...\n\n// removed-start\n#undef LOCTEXT_NAMESPACE// removed-end\n// added-start\n#undef LOCTEXT_NAMESPACE\n// added-end\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questeditorsettingscpp",children:"QuestEditorSettings.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/QuestEditorSettings.cpp" showLineNumbers',children:' \n #include "QuestEditorSettings.h"\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questeditorcommandsh",children:"QuestEditorCommands.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/QuestEditorCommands.h" showLineNumbers',children:" #pragma once\n \n// added-start\n\t// jumps to the current active node\n\tTSharedPtr<FUICommandInfo> JumpToActiveNode;\n\n\t// When A Dialogue Asset class is selected for this quest, this will switch to that dialogue.\n\tTSharedPtr<FUICommandInfo> OpenQuestDialogue;\n\n// added-end\n\n...\n\n\n\n"})}),"\n",(0,r.jsx)(t.h3,{id:"squestgraphnodeh",children:"SQuestGraphNode.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/SQuestGraphNode.h" showLineNumbers',children:" #pragma once\n \n// added-start\n\tEVisibility GetActiveStateImageVisibility() const;\n// added-end\n\n...\n\n\n\n"})}),"\n",(0,r.jsx)(t.h3,{id:"questeditormodesh",children:"QuestEditorModes.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/QuestEditorModes.h" showLineNumbers',children:'#pragma once\n \n...\n\n// removed-start\n#include "WorkflowOrientedApp/ApplicationMode.h"\n// removed-end\n #include "BlueprintEditorModes.h"\n \n /** Application mode for main behavior tree editing mode */\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questeditorcommandscpp",children:"QuestEditorCommands.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/QuestEditorCommands.cpp" showLineNumbers',children:' #include "QuestEditorCommands.h"\n #include "QuestEditorStyle.h"\n// added-start\n\tUI_COMMAND(JumpToActiveNode, "Jump To Active Node", "Jumps to the active node.", EUserInterfaceActionType::Button, FInputChord());\n\tUI_COMMAND(OpenQuestDialogue, "Edit Quest", "Opens Quest Dialogue", EUserInterfaceActionType::Button, FInputChord());\n// added-end\n\n...\n\n// removed-start\n#undef LOCTEXT_NAMESPACE // removed-end\n// added-start\n#undef LOCTEXT_NAMESPACE \n// added-end\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questgrapheditorcpp",children:"QuestGraphEditor.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/QuestGraphEditor.cpp" showLineNumbers',children:' #include "QuestGraphEditor.h"\n #include "NarrativeQuestEditorModule.h"\n\n...\n\n// removed-start\n#include "GraphEditorActions.h"\n// removed-end\n #include "Framework/Commands/GenericCommands.h"\n #include "QuestGraphNode.h"\n #include "Widgets/Layout/SBorder.h"\n\n...\n\n// removed-start\n#include <SKismetInspector.h>\n// removed-end\n #include "Kismet2/DebuggerCommands.h"\n #include "EdGraphSchema_K2_Actions.h"\n #include "K2Node_CustomEvent.h"\n// added-start\n#include "QuestDebugger.h"\n#include "QuestEditorStyle.h"\n#include "SNodePanel.h"\n// added-end\n\n...\n\n// removed-start\nstatic const FString NarrativeHelpURL("http://www.google.com");\n// removed-end\n// added-start\nstatic const FString NarrativeHelpURL("https://docs.narrativetools.io/tales/");\n// added-end\n \n FQuestGraphEditor::FQuestGraphEditor()\n {\n// added-start\n\tFEditorDelegates::BeginPIE.RemoveAll(this);\n\tFEditorDelegates::EndPIE.RemoveAll(this);\n\t\n// added-end\n// added-start\n\t// kept separate from debugger because regardless of a debugger, quest assets cannot be edited during PIE \n\tFEditorDelegates::BeginPIE.AddRaw(this, &FQuestGraphEditor::OnBeginPIE);\n\tFEditorDelegates::EndPIE.AddRaw(this, &FQuestGraphEditor::OnEndPIE);\n\t\n// added-end\n// added-start\n\t// create a debugger instance before binding commands\n\tDebugger = MakeShareable(new FQuestDebugger);\n\n// added-end\n\n...\n\n// removed-start\n\n\n// removed-end\n// added-start\n\t\n// added-end\n \tCreateDefaultCommands();\n// removed-start\n\t//BindCommands();\n// removed-end\n \tRegisterMenus();\n \n\n...\n\n// removed-start\n\n\n// removed-end\n// added-start\n\t\t\n\t// setup debugger\n\tDebugger->Setup(QuestBlueprint, SharedThis(this));\n\t\n\tif (UToolMenu* EditorToolbar = UToolMenus::Get()->FindMenu("AssetEditor.Quest Editor.Toolbar.QuestEditor"))\n\t{\n\t\t// TODO: update this to use ui commands so that it isn\'t global just like the edit dialogue asset\n\t\tDebugger->RegisterDebuggerToolbar(EditorToolbar);\n\n\t\t// add dialogue asset button\n\t\tFToolMenuSection& Section = EditorToolbar->AddSection("EditDialogueAsset", FText::GetEmpty(), {"Debugging", EToolMenuInsertType::After});\n\t\tSection.AddEntry(FToolMenuEntry::InitToolBarButton(\n\t\t\tFQuestEditorCommands::Get().OpenQuestDialogue,\n\t\t\tLOCTEXT("QuestGraphEditor_EditDialogue", "Edit Dialogue"),\n\t\t\tLOCTEXT("QuestGraphEditor_EditDialogue_ToolTip", "When A Dialogue Asset class is selected for this quest, this will switch to that dialogue."),\n\t\t\tFSlateIcon(FQuestEditorStyle::GetStyleSetName(), "QuestEditor.DialogueIcon"))\n\t\t);\n\t}\n\t\n\tSetGraphEditable(FQuestDebugger::IsPIENotSimulating());\n\t\n// added-end\n \t//Load all Quest Tasks into memory since we need them for editing quests \n \tFAssetRegistryModule& AssetRegistryModule = FModuleManager::LoadModuleChecked<FAssetRegistryModule>("AssetRegistry");\n \tTArray<FAssetData> AssetData;\n\n...\n\n// removed-start\n\t\t\t\t\tCommentAction.PerformAction(Graph, NULL, GraphEditor->GetPasteLocation());\n// removed-end\n// added-start\n#if ENGINE_MAJOR_VERSION == 5 && ENGINE_MINOR_VERSION >= 6\n\t\t\t\t\tCommentAction.PerformAction(Graph, nullptr, GraphEditor->GetPasteLocation2f());\n#else\n\t\t\t\t\tCommentAction.PerformAction(Graph, nullptr, GraphEditor->GetPasteLocation());\n#endif\n// added-end\n \t\t\t\t}\n \n \t\t\t}\n\n...\n\n// removed-start\n\n\t// Do not allow root or PT nodes to be copied\n// removed-end\n// added-start\n\t// Do not allow root or PT nodes to be copied.\n// added-end\n \tconst FGraphPanelSelectionSet SelectedNodes = GetSelectedNodes();\n \tfor (FGraphPanelSelectionSet::TConstIterator SelectedIter(SelectedNodes); SelectedIter; ++SelectedIter)\n \t{\n// added-start\n\t\t\tFNotificationInfo Info(NSLOCTEXT("QuestGraphEditor", "RootAndPersistantNodesCopyWarning", "Root and PersistentTask nodes can not be copied!"));\n\t\t\tInfo.ExpireDuration = 3.0f;\n\t\t\tInfo.bUseLargeFont = false;\n\t\t\tInfo.Image = FCoreStyle::Get().GetBrush(TEXT("MessageLog.Warning"));\n\t\t\tTSharedPtr<SNotificationItem> Notification = FSlateNotificationManager::Get().AddNotification(Info);\n\t\t\tif (Notification.IsValid())\n\t\t\t{\n\t\t\t\tNotification->SetCompletionState(SNotificationItem::CS_None);\n\t\t\t}\n// added-end\n\n...\n\n// removed-start\n{\n\tif (UQuestGraph* DGraph = Cast<UQuestGraph>(DestinationGraph))\n\t{\n\t\t//Pasting quest nodes has caused more trouble than it has been worth - uncomment at your own risk! \n\t\t//Quest_PasteNodesHere(Location);\n// removed-end\n// added-start\n{\t\n\tif (UQuestGraph* QuestGraph = Cast<UQuestGraph>(DestinationGraph))\n\t{\n\t\t// Undo/Redo support\n\t\tconst FScopedTransaction Transaction(FGenericCommands::Get().Paste->GetDescription());\n\t\tTSharedPtr<SGraphEditor> CurrentGraphEditor = FocusedGraphEdPtr.Pin();\n\t\t\n\t\tif (!CurrentGraphEditor.IsValid())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tQuestGraph->Modify();\n\n\t\tUQuestGraphNode* SelectedParent = NULL;\n\t\tbool bHasMultipleNodesSelected = false;\n\n\t\tconst FGraphPanelSelectionSet SelectedNodes = GetSelectedNodes();\n\n\t\t// Clear the selection set (newly pasted stuff will be selected)\n\t\tCurrentGraphEditor->ClearSelectionSet();\n\n\t\t// Grab the text to paste from the clipboard.\n\t\tFString TextToImport;\n\t\tFPlatformApplicationMisc::ClipboardPaste(TextToImport);\n\n\t\t// Import the nodes\n\t\tTSet<UEdGraphNode*> PastedNodes;\n\t\tFEdGraphUtilities::ImportNodesFromText(QuestGraph, TextToImport, /*out*/ PastedNodes);\n\n\t\t// walk nodes to be pasted, and accumulate their position \n\t\tFVector2D AvgNodePosition(0.0f, 0.0f);\n\t\tfor (TSet<UEdGraphNode*>::TIterator It(PastedNodes); It; ++It)\n\t\t{\n\t\t\tUEdGraphNode* Node = *It;\n\t\t\tAvgNodePosition.X += Node->NodePosX;\n\t\t\tAvgNodePosition.Y += Node->NodePosY;\n\t\t}\n\t\t// average the accumulated node positions\n\t\tfloat InvNumNodes = 1.0f / static_cast<float>(PastedNodes.Num());\n\t\tAvgNodePosition.X *= InvNumNodes;\n\t\tAvgNodePosition.Y *= InvNumNodes;\n\n\t\tfor (TSet<UEdGraphNode*>::TIterator It(PastedNodes); It; ++It)\n\t\t{\n\t\t\tUEdGraphNode* PasteNode = *It;\n\n\t\t\t// node is null, skip and remove it\n\t\t\tif (!PasteNode)\n\t\t\t{\n\t\t\t\tIt.RemoveCurrent();\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// set new paste node position, accounting for selected nodes average position\n\t\t\tPasteNode->NodePosX = static_cast<int32>((PasteNode->NodePosX - AvgNodePosition.X) + GraphLocation.X);\n\t\t\tPasteNode->NodePosY = static_cast<int32>((PasteNode->NodePosY - AvgNodePosition.Y) + GraphLocation.Y);\n\n\t\t\tPasteNode->SnapToGrid(SNodePanel::GetSnapGridSize());\n\n\t\t\t// Give new node a different Guid from the old one\n\t\t\tPasteNode->CreateNewGuid();\n\n\t\t\t// update if node is a quest node\n\t\t\tif (UQuestGraphNode* PasteQuestNode = Cast<UQuestGraphNode>(PasteNode))\n\t\t\t{\n\t\t\t\t// New Quest graph node will point to old quest node, duplicate a new one for our new node\n\t\t\t\tUQuestNode* DupNode = QuestGraph->DuplicateNode(PasteQuestNode->QuestNode);\n\t\t\t\t\n\t\t\t\t// update the paste node with the newly created node\n\t\t\t\tPasteQuestNode->QuestNode = DupNode;\n\n\t\t\t\t// remove old on entered node\n\t\t\t\tPasteQuestNode->OnEnteredCustomNode = nullptr;\n\t\t\t}\n\n\t\t\t// Select the newly pasted stuff\n\t\t\tCurrentGraphEditor->SetNodeSelection(PasteNode, true);\n\t\t}\n\n\t\t//Now that everything has been pasted, iterate a second time to rebuild the new nodes connections \n\t\tfor (TSet<UEdGraphNode*>::TIterator It(PastedNodes); It; ++It)\n\t\t{\n\t\t\tUEdGraphNode* PasteNode = *It;\n\n\t\t\t// although the node exists, we need to ensure that it is set up and actually added to the underlying quest\n\t\t\tQuestGraph->NodeAdded(PasteNode);\n\n\t\t\t// we only want to rewire nodes that can be, comment nodes cannot be for example\n\t\t\tif (UQuestGraphNode* PasteQuestNode = Cast<UQuestGraphNode>(PasteNode))\n\t\t\t{\n\t\t\t\t// check that we aren\'t trying to wire a node output when none should exist.\n\t\t\t\tUQuestGraphNode_State* FromState = Cast<UQuestGraphNode_State>(PasteNode);\n\t\t\t\tif (UQuestState* NodeQuestState = FromState ? FromState->State : nullptr)\n\t\t\t\t{\n\t\t\t\t\tswitch (NodeQuestState->StateNodeType)\n\t\t\t\t\t{\n\t\t\t\t\tcase EStateNodeType::Failure: // fallthrough\n\t\t\t\t\tcase EStateNodeType::Success: continue;\n\t\t\t\t\tdefault: break;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//Quest nodes connections will still be outdated, update these to the new connections\n\t\t\t\tQuestGraph->PinRewired(PasteQuestNode, PasteQuestNode->GetOutputPin());\n\t\t\t}\n\t\t}\n\n\t\t// Update UI\n\t\tCurrentGraphEditor->NotifyGraphChanged();\n\t\tif (UObject* GraphOwner = QuestGraph->GetOuter())\n\t\t{\n\t\t\tGraphOwner->PostEditChange();\n\t\t\tGraphOwner->MarkPackageDirty();\n\t\t}\n// added-end\n \t}\n \telse\n \t{\n// removed-start\n#if ENGINE_MAJOR_VERSION == 5 && ENGINE_MINOR_VERSION >= 6\n\t\tFVector2f Location = FVector2f(GraphLocation); // Handles FVector2f\n\t\tFBlueprintEditor::PasteNodesHere(DestinationGraph, Location);\n#else\n\t\tFVector2D Location = FVector2D(GraphLocation); // Handles FVector2D\n\t\tFBlueprintEditor::PasteNodesHere(DestinationGraph, Location);\n#endif\n\t}\n}\n\nvoid FQuestGraphEditor::Quest_SelectAllNodes()\n// removed-end\n// added-start\n\t\tFBlueprintEditor::PasteNodesHere(DestinationGraph, GraphLocation);\n\t}\n}\n\n/*void FQuestGraphEditor::Quest_SelectAllNodes()\n// added-end\n\n...\n\n// removed-start\n}\n\nbool FQuestGraphEditor::Quest_CanSelectAllNodes() const\n// removed-end\n// added-start\n}*/\n\n/*bool FQuestGraphEditor::Quest_CanSelectAllNodes() const\n// added-end\n {\n \treturn true;\n// removed-start\n}\n\nvoid FQuestGraphEditor::Quest_DeleteSelectedNodes()\n// removed-end\n// added-start\n}*/\n\n/*void FQuestGraphEditor::Quest_DeleteSelectedNodes()\n// added-end\n {\n\n...\n\n// removed-start\n}\n\nbool FQuestGraphEditor::Quest_CanDeleteNodes() const\n// removed-end\n// added-start\n}*/\n\n/*bool FQuestGraphEditor::Quest_CanDeleteNodes() const\n// added-end\n {\n \t// If any of the nodes can be deleted then we should allow deleting\n \tconst FGraphPanelSelectionSet SelectedNodes = GetSelectedNodes();\n\n...\n\n// removed-start\n}\n\nvoid FQuestGraphEditor::Quest_DeleteSelectedDuplicatableNodes()\n// removed-end\n// added-start\n}*/\n\n/*void FQuestGraphEditor::Quest_DeleteSelectedDuplicatableNodes()\n// added-end\n {\n \tTSharedPtr<SGraphEditor> CurrentGraphEditor = UpdateGraphEdPtr.Pin();\n \tif (!CurrentGraphEditor.IsValid())\n\n...\n\n// removed-start\n}\n\nvoid FQuestGraphEditor::Quest_CutSelectedNodes()\n// removed-end\n// added-start\n}*/\n\n/*void FQuestGraphEditor::Quest_CutSelectedNodes()\n// added-end\n {\n \tCopySelectedNodes();\n \tDeleteSelectedDuplicatableNodes();\n// removed-start\n}\n\nbool FQuestGraphEditor::Quest_CanCutNodes() const\n// removed-end\n// added-start\n}*/\n\n/*bool FQuestGraphEditor::Quest_CanCutNodes() const\n// added-end\n\n...\n\n// removed-start\n}\n\nvoid FQuestGraphEditor::Quest_CopySelectedNodes()\n// removed-end\n// added-start\n}*/\n\n/*void FQuestGraphEditor::Quest_CopySelectedNodes()\n// added-end\n {\n \t// Export the selected nodes and place the text on the clipboard\n \tFGraphPanelSelectionSet SelectedNodes = GetSelectedNodes();\n\n...\n\n// removed-start\n}\n\nbool FQuestGraphEditor::Quest_CanCopyNodes() const\n// removed-end\n// added-start\n}*/\n\n/*bool FQuestGraphEditor::Quest_CanCopyNodes() const\n// added-end\n {\n \n \t//Copying nodes is disabled for now\n\n...\n\n// removed-start\n}\n\nvoid FQuestGraphEditor::Quest_PasteNodes()\n// removed-end\n// added-start\n}*/\n\n/*void FQuestGraphEditor::Quest_PasteNodes()\n// added-end\n {\n \n \tif (TSharedPtr<SGraphEditor> CurrentGraphEditor = UpdateGraphEdPtr.Pin())\n\n...\n\n// removed-start\n}\n\nvoid FQuestGraphEditor::Quest_PasteNodesHere(const FVector2D& Location)\n// removed-end\n// added-start\n}*/\n\n/*void FQuestGraphEditor::Quest_PasteNodesHere(const FVector2D& Location)\n// added-end\n {\n \tTSharedPtr<SGraphEditor> CurrentGraphEditor = FocusedGraphEdPtr.Pin();\n \tif (!CurrentGraphEditor.IsValid())\n\n...\n\n// removed-start\n\tFEdGraphUtilities::ImportNodesFromText(QuestGraph, TextToImport, /*out*/ PastedNodes);\n// removed-end\n// added-start\n\tFEdGraphUtilities::ImportNodesFromText(QuestGraph, TextToImport, out PastedNodes);\n// added-end\n \n \tfor (TSet<UEdGraphNode*>::TIterator It(PastedNodes); It; ++It)\n \t{\n\n...\n\n// removed-start\n}\n\nbool FQuestGraphEditor::Quest_CanPasteNodes() const\n// removed-end\n// added-start\n}*/\n\n/*bool FQuestGraphEditor::Quest_CanPasteNodes() const\n// added-end\n {\n \t//Pasting nodes is disabled for now\n \treturn false;\n\n...\n\n// removed-start\n}\n\nvoid FQuestGraphEditor::Quest_DuplicateNodes()\n// removed-end\n// added-start\n}*/\n\n/*void FQuestGraphEditor::Quest_DuplicateNodes()\n// added-end\n {\n \tCopySelectedNodes();\n \tPasteNodes();\n// removed-start\n}\n\nbool FQuestGraphEditor::Quest_CanDuplicateNodes() const\n// removed-end\n// added-start\n}*/\n\n/*bool FQuestGraphEditor::Quest_CanDuplicateNodes() const\n// added-end\n\n...\n\n// removed-start\n}\n\nvoid FQuestGraphEditor::Quest_CreateComment()\n// removed-end\n// added-start\n}*/\n\n/*void FQuestGraphEditor::Quest_CreateComment()\n// added-end\n {\n \tTSharedPtr<SGraphEditor> GraphEditor = UpdateGraphEdPtr.Pin();\n \tif (GraphEditor.IsValid())\n\n...\n\n// removed-start\n}\n\nbool FQuestGraphEditor::Quest_CanCreateComment() const\n// removed-end\n// added-start\n}*/\n\n/*bool FQuestGraphEditor::Quest_CanCreateComment() const\n// added-end\n {\n \treturn true;\n// removed-start\n}\n// removed-end\n// added-start\n}*/\n// added-end\n \n// added-start\n}\n\nvoid FQuestGraphEditor::SwitchToDialogueAsset()\n{\n\tif (!QuestBlueprint)\n\t{\n\t\treturn;\n\t}\n\t\n\tUQuest* Quest = Cast<UQuest>(QuestBlueprint->GeneratedClass.GetDefaultObject());\n\t\n#if ENGINE_MAJOR_VERSION == 5 && ENGINE_MINOR_VERSION >= 2\n\tif (GEditor)\n\t{\n\t\tUAssetEditorSubsystem* AssetEditorSubsystem = GEditor->GetEditorSubsystem<UAssetEditorSubsystem>();\n\t\tif (AssetEditorSubsystem && Quest)\n\t\t{\n\t\t\tAssetEditorSubsystem->OpenEditorForAsset(UBlueprint::GetBlueprintFromClass(Quest->GetQuestDialogueClass()));\n\t\t}\n\t}\n#else\n\t// UE 5.1 fallback (AssetEditorSubsystem does not exist)\n\tif (GEditor)\n\t{\n\t\tGEditor->EditObject(Quest->GetQuestDialogueClass());\n\t}\n#endif\n}\n\nbool FQuestGraphEditor::CanSwitchToDialogueAsset()\n{\n\tif (!QuestBlueprint)\n\t{\n\t\treturn false;\n\t}\n\t\n\tUQuest* Quest = Cast<UQuest>(QuestBlueprint->GeneratedClass.GetDefaultObject());\n\treturn Quest? Quest->GetQuestDialogueClass() != nullptr : false;\n// added-end\n\n...\n\n// removed-start\n\n// removed-end\n// added-start\n\t\n\tToolkitCommands->MapAction(FQuestEditorCommands::Get().OpenQuestDialogue,\n\t\tFExecuteAction::CreateSP(this, &FQuestGraphEditor::SwitchToDialogueAsset),\n\t\tFCanExecuteAction::CreateSP(this, &FQuestGraphEditor::CanSwitchToDialogueAsset));\n\n\tif (Debugger.IsValid())\n\t{\n\t\tDebugger->BindCommands(ToolkitCommands);\n\t}\n\t\n// added-end\n \tFBlueprintEditor::CreateDefaultCommands();\n }\n \n// added-start\n\t// read only \n\tif (!IsGraphEditable())\n\t{\n\t\treturn;\n\t}\n\t\n// added-end\n// added-start\n\t\t\t\t\tconst FScopedTransaction Transaction(NSLOCTEXT("QuestGraphEditor", "QuestGraphEditor_EventFromNode", "Create event for node"));\n\t\t\t\t\tQuestBlueprint->Modify();\n\t\t\t\t\t\n// added-end\n// added-start\nvoid FQuestGraphEditor::SetGraphEditable(const bool Editable)\n{\n\tif (IsValid(QuestBlueprint) && IsValid(QuestBlueprint->QuestGraph))\n\t{\n\t\tQuestBlueprint->QuestGraph->bEditable = Editable;\n\t}\n}\n\nbool FQuestGraphEditor::IsGraphEditable() const\n{\n\tconst UEdGraph* EdGraph = IsValid(QuestBlueprint) ? QuestBlueprint->QuestGraph : nullptr;\n\treturn EdGraph? EdGraph->bEditable : false;\n}\n\n// added-end\n\n...\n\n// removed-start\n\n#undef LOCTEXT_NAMESPACE// removed-end\n// added-start\nvoid FQuestGraphEditor::OnBeginPIE(bool bSimulating)\n{\n\tSetGraphEditable(false);\n}\n\nvoid FQuestGraphEditor::OnEndPIE(bool bSimulating)\n{\n\tSetGraphEditable(true);\n}\n\n#undef LOCTEXT_NAMESPACE\n// added-end\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questeditortabfactoriescpp",children:"QuestEditorTabFactories.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/QuestEditorTabFactories.cpp" showLineNumbers',children:' #include "QuestEditorTabFactories.h"\n #include "QuestBlueprint.h"\n\n...\n\n// removed-start\n#include "EditorStyleSet.h"\n// removed-end\n #include "Engine/Blueprint.h"\n #include "QuestEditorStyle.h"\n  \n// added-start\n#if ENGINE_MAJOR_VERSION == 5 && ENGINE_MINOR_VERSION >= 6\nusing FGraphLocationType = FVector2f;\n#else\nusing FGraphLocationType = FVector2D;\n#endif\n\n// added-end\n\n...\n\n// removed-start\n\tFVector2D ViewLocation;\n// removed-end\n// added-start\n\tFGraphLocationType ViewLocation;\n// added-end\n \tfloat ZoomAmount;\n \tGraphEditor->GetViewLocation(ViewLocation, ZoomAmount);\n \n\n...\n\n// removed-start\n#undef LOCTEXT_NAMESPACE// removed-end\n// added-start\n#undef LOCTEXT_NAMESPACE\n// added-end\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questgraphcpp",children:"QuestGraph.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/QuestGraph.cpp" showLineNumbers',children:' #include "QuestGraph.h"\n// added-start\n\n#include "GraphEditAction.h"\n// added-end\n #include "Quest.h"\n\n...\n\n// removed-start\n#include "NarrativeFunctionLibrary.h"\n#include "NarrativeDataTask.h"\n// removed-end\n #include "NarrativeComponent.h"\n #include "QuestEditorSettings.h"\n \n// added-start\n\nbool UQuestGraph::Modify(bool bAlwaysMarkDirty)\n{\n\tconst bool bSavedToTransactionBuffer = Super::Modify(bAlwaysMarkDirty);\n\n\tif (UQuestBlueprint* QuestAsset = Cast<UQuestBlueprint>(GetOuter()))\n\t{\n\t\t// we are changing the quest template too\n\t\tif (QuestAsset->QuestTemplate)\n\t\t{\n\t\t\tQuestAsset->QuestTemplate->Modify(true);\n\t\t}\n\t}\n\treturn bSavedToTransactionBuffer;\n}\n// added-end\n\n...\n\n// removed-start\n\tUQuest* Quest = QuestAsset->QuestTemplate;\n\n// removed-end\n \t//If we rewired a pin, we need to update the quest nodes to match the graph nodes\n// removed-start\n\tif (Quest)\n// removed-end\n// added-start\n\tif (UQuest* Quest = QuestAsset? QuestAsset->QuestTemplate : nullptr)\n// added-end\n \t{\n \t\tif (Pin->Direction == EEdGraphPinDirection::EGPD_Output)\n\n...\n\n// removed-start\n\n// removed-end\n \tUQuestBlueprint* QuestAsset = CastChecked<UQuestBlueprint>(GetOuter());\n \tUQuest* Quest = QuestAsset->QuestTemplate;\n \n\n...\n\n// removed-start\n\t\t}\n// removed-end\n// added-start\n\t\t\treturn;\n\t\t}\n\n\t\t// node quest is the correct state\n\t\tif (StateNode->State != StateNode->QuestNode)\n\t\t{\n\t\t\tStateNode->State = Cast<UQuestState>(StateNode->QuestNode);\n\t\t}\n\t\tQuest->AddState(StateNode->State);\n// added-end\n \t}\n \telse if (UQuestGraphNode_Action* ActionNode = Cast<UQuestGraphNode_Action>(AddedNode))\n \t{\n// removed-start\n\t\tif (!ActionNode->Branch)\n// removed-end\n// added-start\n\t\t// if the branch is null then a new one is needed\n\t\tconst bool bBranchIsNull = ActionNode->Branch == nullptr;\n\t\tif (bBranchIsNull)\n// added-end\n\n...\n\n// removed-start\n\t\t}\n\t\telse\n\t\t{\n\t\t\t//Node already has a branch set, was probably created from context menu \n\t\t\tif (ActionNode->Branch)\n\t\t\t{\n\t\t\t\tQuest->AddBranch(ActionNode->Branch);\n\n\t\t\t\t//Use rename to fix a bug where old outer wasnt being set properly\n\t\t\t\tActionNode->Branch->Rename(nullptr, Quest);\n\t\t\t}\n\t\t}\n\t}\n// removed-end\n// added-start\n\t\t\treturn;\n\t\t}\n\n\t\t// node quest is the correct branch\n\t\tif (ActionNode->Branch != ActionNode->QuestNode)\n\t\t{\n\t\t\tActionNode->Branch = Cast<UQuestBranch>(ActionNode->QuestNode);\n\t\t}\n\n\t\t//Use rename to fix a bug where old outer wasn\'t being set properly\n\t\tActionNode->Branch->Rename(nullptr, Quest);\n\t\tQuest->AddBranch(ActionNode->Branch);\n\t}\n}\n\nUQuestNode* UQuestGraph::DuplicateNode(const UQuestNode* OldNode)\n{\n\tif (OldNode)\n\t{\n\t\tif (UQuestBlueprint* QuestAsset = Cast<UQuestBlueprint>(GetOuter()); QuestAsset && QuestAsset->QuestTemplate)\n\t\t{\n\t\t\tUQuestNode* DupNode = DuplicateObject<UQuestNode>(OldNode, OldNode->GetOuter());\n\t\t\tDupNode->EnsureUniqueID();\n\n\t\t\t// clear event name\n\t\t\tDupNode->OnEnteredFuncName = NAME_None;\n\t\t\t\n\t\t\treturn DupNode;\n\t\t}\n\t}\n\n\treturn nullptr;\n// added-end\n }\n \n void UQuestGraph::PIEStarted(bool bIsSimulating)\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questgraphnode_failurecpp",children:"QuestGraphNode_Failure.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/QuestGraphNode_Failure.cpp" showLineNumbers',children:' #include "QuestGraphNode_Failure.h"\n #include "QuestEditorSettings.h"\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"k2node_completenarrativetaskh",children:"K2Node_CompleteNarrativeTask.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/K2Node_CompleteNarrativeTask.h" showLineNumbers',children:'#pragma once\n \n...\n\n// removed-start\n#include "K2Node_CallFunction.h"\n// removed-end\n #include "K2Node_CompleteNarrativeTask.generated.h"\n \n /**\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questgraphnode_successcpp",children:"QuestGraphNode_Success.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/QuestGraphNode_Success.cpp" showLineNumbers',children:' #include "QuestGraphNode_Success.h"\n #include "QuestEditorSettings.h"\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"assettypeactions_questassetcpp",children:"AssetTypeActions_QuestAsset.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/AssetTypeActions_QuestAsset.cpp" showLineNumbers',children:' #include "AssetTypeActions_QuestAsset.h"\n #include "QuestBlueprint.h"\n\n...\n\n// removed-start\n#include "QuestAssetFactory.h"\n// removed-end\n #include <Engine/BlueprintCore.h>\n// removed-start\n#include <Animation/AnimBlueprint.h>\n// removed-end\n \n #define LOCTEXT_NAMESPACE "AssetTypeActions"\n\n...\n\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questgrapheditorh",children:"QuestGraphEditor.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/QuestGraphEditor.h" showLineNumbers',children:'#pragma once\n \n...\n\n// removed-start\n#include "UObject/NoExportTypes.h"\n// removed-end\n #include "Misc/NotifyHook.h"\n #include "EditorUndoClient.h"\n #include "Widgets/SWidget.h"\n// added-start\n\n// added-end\n\n...\n\n// removed-start\n\t\n\t//Not all of these are used yet\n\tvoid Quest_SelectAllNodes();\n\tbool Quest_CanSelectAllNodes() const;\n\tvoid Quest_DeleteSelectedNodes();\n\tbool Quest_CanDeleteNodes() const;\n\tvoid Quest_DeleteSelectedDuplicatableNodes();\n\tvoid Quest_CutSelectedNodes();\n\tbool Quest_CanCutNodes() const;\n\tvoid Quest_CopySelectedNodes();\n\tbool Quest_CanCopyNodes() const;\n\tvoid Quest_PasteNodes();\n\tvoid Quest_PasteNodesHere(const FVector2D& Location);\n\tbool Quest_CanPasteNodes() const;\n\tvoid Quest_DuplicateNodes();\n\tbool Quest_CanDuplicateNodes() const;\n\tvoid Quest_CreateComment();\n\tbool Quest_CanCreateComment() const;\n// removed-end\n \n// added-start\n\t//none of these are used anymore\n\t//void Quest_SelectAllNodes();\n\t//bool Quest_CanSelectAllNodes() const;\n\t//void Quest_DeleteSelectedNodes();\n\t//bool Quest_CanDeleteNodes() const;\n\t//void Quest_DeleteSelectedDuplicatableNodes();\n\t//void Quest_CutSelectedNodes();\n\t//bool Quest_CanCutNodes() const;\n\t//void Quest_CopySelectedNodes();\n\t//bool Quest_CanCopyNodes() const;\n\t//void Quest_PasteNodes();\n\t//void Quest_PasteNodesHere(const FVector2D& Location);\n\t//bool Quest_CanPasteNodes() const;\n\t//void Quest_DuplicateNodes();\n\t//bool Quest_CanDuplicateNodes() const;\n\t//void Quest_CreateComment();\n\t//bool Quest_CanCreateComment() const;\n// added-end\n \n \tvoid OnWorldChange(UWorld* World, EMapChangeType MapChangeType);\n// removed-start\n\n// removed-end\n// added-start\n\t\n\tvoid SwitchToDialogueAsset();\n\tbool CanSwitchToDialogueAsset();\n// added-end\n// added-start\n\tvoid SetGraphEditable(const bool Editable);\n\tbool IsGraphEditable() const;\n\n// added-end\n// added-start\n\tvoid OnBeginPIE(bool bSimulating);\n\tvoid OnEndPIE(bool bSimulating);\n\t\n// added-end\n// added-start\n\t/// debugger instance for this graph\n\tTSharedPtr<class FQuestDebugger> Debugger;\n\t\n// added-end\n\n...\n\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"squestgraphnodecpp",children:"SQuestGraphNode.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/SQuestGraphNode.cpp" showLineNumbers',children:' #include "SQuestGraphNode.h"\n #include "QuestGraphNode.h"\n\n...\n\n// removed-start\n#include "QuestGraph.h"\n// removed-end\n #include "SGraphPanel.h"\n #include "ScopedTransaction.h"\n #include "QuestSM.h"\n// removed-start\n#include "QuestEditorStyle.h"\n// removed-end\n\n...\n\n// removed-start\n#include "QuestGraphNode_State.h"\n// removed-end\n #include "NarrativeEvent.h"\n #include "QuestEditorSettings.h"\n #include <Blueprint/UserWidget.h>\n\n...\n\n// removed-start\n#include <Slate/SObjectWidget.h>\n// removed-end\n #include "QuestNodeUserWidget.h"\n #include "QuestBlueprint.h"\n \n\n...\n\n// removed-start\n\t\t\t\t+ SOverlay::Slot()\n\t\t\t[\n\t\t\t\tQuestNodeWidgetRef.ToSharedRef()\n\t\t\t]\n// removed-end\n// added-start\n\t\t\t\t\n\t\t\t\t// quest node widget\n\t\t\t\t+SOverlay::Slot()\n\t\t\t\t[\n\t\t\t\t\tQuestNodeWidgetRef.ToSharedRef()\n\t\t\t\t]\n\n\t\t\t\t// debugger overlay\n\t\t\t\t+SOverlay::Slot()\n\t\t\t\t[\n\t\t\t\t\tSNew(SImage)\n\t\t\t\t\t.Image(FAppStyle::GetBrush(TEXT("Graph.Node.DiffHighlight")))\n\t\t\t\t\t// yellow\n\t\t\t\t\t.ColorAndOpacity(FLinearColor(0.0f, 1.0f, 0.0f, 0.75f))\n\t\t\t\t\t.Visibility_Raw(this, &SQuestGraphNode::GetActiveStateImageVisibility)\n\t\t\t\t]\n// added-end\n \t\t\t];\n \t}\n \telse // Old style yucky slate ones\n\n...\n\n// removed-start\n\n// removed-end\n \tif (UQuestGraphNode* QuestGraphNode = Cast<UQuestGraphNode>(GraphNode))\n \t{\n \t\treturn QuestGraphNode->GetGraphNodeColor();\n// added-start\n}\n\nEVisibility SQuestGraphNode::GetActiveStateImageVisibility() const\n{\n\tconst UQuestGraphNode* QuestGraphNode = Cast<UQuestGraphNode>(GraphNode);\n\treturn QuestGraphNode && QuestGraphNode->bActiveNode? EVisibility::HitTestInvisible : EVisibility::Collapsed;\n// added-end\n\n...\n\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questgraphnode_persistenttaskscpp",children:"QuestGraphNode_PersistentTasks.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/QuestGraphNode_PersistentTasks.cpp" showLineNumbers',children:' #include "QuestGraphNode_PersistentTasks.h"\n #include "QuestEditorTypes.h"\n\n...\n\n// removed-start\n#include "QuestSM.h"\n// removed-end\n \n void UQuestGraphNode_PersistentTasks::AllocateDefaultPins()\n {\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"narrativequesteditormodulecpp",children:"NarrativeQuestEditorModule.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/NarrativeQuestEditorModule.cpp" showLineNumbers',children:' #include "NarrativeQuestEditorModule.h"\n #include "IQuestEditor.h"\n\n...\n\n// removed-start\n#include "QuestTask.h"\n// removed-end\n #include "EdGraphUtilities.h"\n #include "SQuestGraphNode.h"\n #include "QuestGraphNode.h"\n\n...\n\n// removed-start\n#include "ISettingsSection.h"\n#include "ISettingsContainer.h"\n#include <ISettingsCategory.h>\n// removed-end\n #include "KismetCompiler.h"\n #include "QuestBlueprintCompiler.h"\n// removed-start\n#include <AssetRegistry/AssetRegistryModule.h>\n// removed-end\n// added-start\n\n#include "NodeSelector/GraphPin_QuestNodeSelector.h"\n#include "NodeSelector/QuestNodeSelectorPropertyCustomization.h"\n// added-end\n #include "UObject/CoreRedirects.h"\n// added-start\n\tFEdGraphUtilities::RegisterVisualPinFactory(MakeShared<FPinFactoryQuestNodeSelector>());\n\n// added-end\n// added-start\n\n\t// Register custom property layout for FQuestStateSelector\n\tPropertyModule.RegisterCustomPropertyTypeLayout(\n\t\t"QuestStateSelector",\n\t\tFOnGetPropertyTypeCustomizationInstance::CreateStatic(&FQuestStateSelectorPropertyTypeCustomization::MakeInstance)\n\t);\n\n\t// Register custom property layout for FQuestBranchSelector\n\tPropertyModule.RegisterCustomPropertyTypeLayout(\n\t\t"QuestBranchSelector",\n\t\tFOnGetPropertyTypeCustomizationInstance::CreateStatic(&FQuestBranchSelectorPropertyTypeCustomization::MakeInstance)\n\t);\n\t\n// added-end\n// added-start\n\t\t\n\t\tPropertyModule.UnregisterCustomPropertyTypeLayout("DialogueNodeSelector");\n\n// added-end\n// added-start\n\n\tFEdGraphUtilities::UnregisterVisualPinFactory(MakeShared<FPinFactoryQuestNodeSelector>());\n// added-end\n\n...\n\n// removed-start\nIMPLEMENT_MODULE(FNarrativeQuestEditorModule, NarrativeQuestEditor)// removed-end\n// added-start\nIMPLEMENT_MODULE(FNarrativeQuestEditorModule, NarrativeQuestEditor)\n// added-end\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questeditordetailscpp",children:"QuestEditorDetails.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/QuestEditorDetails.cpp" showLineNumbers',children:' #include "QuestEditorDetails.h"\n #include "DetailLayoutBuilder.h"\n// removed-start\n#include "DetailWidgetRow.h"\n// removed-end\n\n...\n\n// removed-start\n#include "Quest.h"\n#include "QuestBlueprint.h"\n#include "DetailCategoryBuilder.h"\n#include "NarrativeDataTask.h"\n// removed-end\n// added-start\n#include "PropertyHandle.h"\n// added-end\n \n #define LOCTEXT_NAMESPACE "QuestEditorDetails"\n \n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questeditormodescpp",children:"QuestEditorModes.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/QuestEditorModes.cpp" showLineNumbers',children:' #include "QuestEditorModes.h"\n// removed-start\n#include "QuestEditorTabs.h"\n// removed-end\n #include "QuestEditorToolbar.h"\n// removed-start\n#include "QuestEditorDetails.h"\n// removed-end\n\n...\n\n// removed-start\n#include "BlueprintEditorTabs.h"\n// removed-end\n \n #define LOCTEXT_NAMESPACE "QuestGraphApplicationMode"\n \n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questeditorsettingsh",children:"QuestEditorSettings.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/QuestEditorSettings.h" showLineNumbers',children:'#pragma once\n \n...\n\n// removed-start\n#include "UObject/NoExportTypes.h"\n// removed-end\n #include "QuestEditorSettings.generated.h"\n \n /**\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questgraphnode_statecpp",children:"QuestGraphNode_State.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/QuestGraphNode_State.cpp" showLineNumbers',children:' #include "QuestGraphNode_State.h"\n #include "QuestEditorTypes.h"\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questeditorstylecpp",children:"QuestEditorStyle.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/QuestEditorStyle.cpp" showLineNumbers',children:' #include "QuestEditorStyle.h"\n #include "Styling/SlateStyle.h"\n\n...\n\n// removed-start\n\tStyleSet->Set(FName(TEXT("ClassThumbnail.NarrativePartyComponent")), new IMAGE_BRUSH("NarrativePartyLogo", FVector2D(64, 64)));\n\tStyleSet->Set(FName(TEXT("ClassIcon.NarrativePartyComponent")), new IMAGE_BRUSH("NarrativePartyLogo", FVector2D(16, 16)));\n// removed-end\n// added-start\n\tStyleSet->Set(FName(TEXT("ClassThumbnail.NarrativeTalesPartyComponent")), new IMAGE_BRUSH("NarrativePartyLogo", FVector2D(64, 64)));\n\tStyleSet->Set(FName(TEXT("ClassIcon.NarrativeTalesPartyComponent")), new IMAGE_BRUSH("NarrativePartyLogo", FVector2D(16, 16)));\n// added-end\n \n \t//Toolbar buttons\n \tStyleSet->Set(FName(TEXT("QuestEditor.Common.ShowQuestDetails")), new IMAGE_BRUSH("QuestEditor/Icons/ShowQuestDetails_40x", FVector2D(40.f, 40.f)));\n// added-start\n\tStyleSet->Set(FName(TEXT("QuestEditor.DialogueIcon")), new IMAGE_BRUSH("Dialogue", FVector2D(64.f, 64.f)));\n// added-end\n\n...\n\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questgraphnodeh",children:"QuestGraphNode.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/QuestGraphNode.h" showLineNumbers',children:" #pragma once\n \n// added-start\nclass FQuestGraphEditor;\n// added-end\n// added-start\n\n\tUQuestGraphNode()\n\t: ParentNode(nullptr), QuestNode(nullptr), OnEnteredCustomNode(nullptr), bActiveNode(false)\n\t{}\n// added-end\n\n...\n\n// removed-start\n\tvirtual FLinearColor GetGraphNodeColor() const { return FLinearColor(0.15f, 0.15f, 0.15f); };\n\n// removed-end\n// added-start\n\tvirtual FLinearColor GetGraphNodeColor() const { return FLinearColor(0.15f, 0.15f, 0.15f); }\n\tvirtual FLinearColor GetGraphBorderNodeColor() const { return bActiveNode? FLinearColor::Yellow : FLinearColor::Transparent; }\n\t\n\tuint8 bActiveNode : 1;\n// added-end\n \n };\n\n\n"})}),"\n",(0,r.jsx)(t.h3,{id:"questeditortypescpp",children:"QuestEditorTypes.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/QuestEditorTypes.cpp" showLineNumbers',children:' #include "QuestEditorTypes.h"\n \n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questblueprintcompilerh",children:"QuestBlueprintCompiler.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/QuestBlueprintCompiler.h" showLineNumbers',children:' #pragma once\n \n// added-start\n#include "QuestSM.h"\n// added-end\n// added-start\n\tvirtual void CreateClassVariablesFromBlueprint() override;\n// added-end\n// added-start\n\t// Map of properties created for states; to aid in debug data generation\n\tTMap<UQuestState*, FProperty*> StateToMemberVariableMap;\n\n// added-end\n\n...\n\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questeditortoolbarcpp",children:"QuestEditorToolbar.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/QuestEditorToolbar.cpp" showLineNumbers',children:' #include "QuestEditorToolbar.h"\n #include "Misc/Attribute.h"\n\n...\n\n// removed-start\n#include "EditorStyleSet.h"\n// removed-end\n #include "Framework/MultiBox/MultiBoxBuilder.h"\n #include "QuestGraphEditor.h"\n #include "WorkflowOrientedApp/SModeWidget.h"\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questnodeuserwidgetcpp",children:"QuestNodeUserWidget.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/QuestNodeUserWidget.cpp" showLineNumbers',children:'\n //  Copyright Narrative Tools 2022.\n// removed-start\n\n// removed-end\n \n #include "QuestNodeUserWidget.h"\n// added-start\n#include "DialogueBlueprint.h"\n#include "IDialogueEditor.h"\n#include "Dialogue.h"\n#include "Quest.h"\n// added-end\n// added-start\n\nvoid UQuestNodeUserWidget::AddOrJumpToMatchingDialogueNode()\n{\n\tUAssetEditorSubsystem* AssetEditorSubsystem = GEditor->GetEditorSubsystem<UAssetEditorSubsystem>();\n\tUBlueprint* DialogueBP = UBlueprint::GetBlueprintFromClass(Quest->GetQuestDialogueClass());\n\tif (AssetEditorSubsystem && DialogueBP)\n\t{\n\t\t// find or open graph editor for bp\n\t\tIDialogueEditor* DialogueEditor = static_cast<IDialogueEditor*>(AssetEditorSubsystem->FindEditorForAsset(DialogueBP, true));\n\t\tif (!DialogueEditor)\n\t\t{\n\t\t\tAssetEditorSubsystem->OpenEditorForAsset(DialogueBP);\n\t\t\tDialogueEditor = static_cast<IDialogueEditor*>(AssetEditorSubsystem->FindEditorForAsset(DialogueBP, true));\n\t\t}\n\t\t\n\t\tif (DialogueEditor)\n\t\t{\n\t\t\tDialogueEditor->JumpOrAddDialogueNode(Node->GetID());\n\t\t}\n\t}\n}\n\nbool UQuestNodeUserWidget::DoesMatchingDialogueNodeExist()\n{\n\tconst FName NodeID = Node->GetID();\n\tif (UDialogueBlueprint* DialogueBP = Quest? Cast<UDialogueBlueprint>(UBlueprint::GetBlueprintFromClass(Quest->GetQuestDialogueClass())) : nullptr)\n\t{\n\t\treturn DialogueBP->DialogueTemplate->GetNodes().FindByPredicate([&NodeID](UDialogueNode* DialogueNode)\n\t\t{\n\t\t\treturn DialogueNode->GetID() == NodeID;\n\t\t}) != nullptr;\n\t}\n\n\treturn false;\n}\n\n...\n\n// added-end\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questgraphschemacpp",children:"QuestGraphSchema.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/NarrativeQuestEditor/Private/QuestGraphSchema.cpp" showLineNumbers',children:' #include "QuestGraphSchema.h"\n #include "QuestGraphNode_Root.h"\n\n...\n\n// removed-start\n#include "IQuestEditor.h"\n// removed-end\n #include "QuestBlueprint.h"\n// removed-start\n#include "Toolkits/ToolkitManager.h"\n// removed-end\n #include "QuestConnectionDrawingPolicy.h"\n #include "QuestGraph.h"\n// removed-start\n#include "GraphEditorActions.h"\n#include "Framework/Commands/GenericCommands.h"\n#include "QuestEditorCommands.h"\n#include "AssetRegistry/AssetRegistryModule.h"\n#include "NarrativeDataTask.h"\n// removed-end\n\n...\n\n// removed-start\n\t\t\t\t\tFCategorizedGraphActionListBuilder ActionCategoryBuilder("Tasks: " + TaskCategory);\n\n\t\t\t\t\tTSharedPtr<FQuestSchemaAction_NewNode> AddAction = UQuestGraphSchema::AddNewNodeAction(ActionCategoryBuilder, FText::GetEmpty(), FText::FromString(TaskDescription), FText::FromString(TaskDescription));\n\n\t\t\t\t\tAddAction->UpdateSearchData(FText::FromString(TaskName), FText::FromString(TaskDescription), FText::GetEmpty(), FText::GetEmpty());\n// removed-end\n// added-start\n\t\t\t\t\tFString Category = "Tasks: " + TaskCategory;\n\t\t\t\t\tFCategorizedGraphActionListBuilder ActionCategoryBuilder(Category);\n\n\t\t\t\t\tTSharedPtr<FQuestSchemaAction_NewNode> AddAction = UQuestGraphSchema::AddNewNodeAction(ActionCategoryBuilder, FText::GetEmpty(), FText::FromString(TaskName), FText::FromString(TaskDescription));\n\n\t\t\t\t\t//AddAction->UpdateSearchData(FText::FromString(TaskName), FText::FromString(TaskDescription), FText::GetEmpty(), FText::GetEmpty());\n// added-end\n \t\t\t\t\t//AddAction->TaskClass = QuestTaskClass;\n \n \t\t\t\t\tUQuestGraphNode_Action* Node = NewObject<UQuestGraphNode_Action>(ContextMenuBuilder.OwnerOfTemporaries, UQuestGraphNode_Action::StaticClass());\n// added-start\nvoid UQuestGraphSchema::BreakPinLinks(UEdGraphPin& TargetPin, bool bSendsNodeNotifcation) const\n{\n\tconst FScopedTransaction Transaction(NSLOCTEXT("QuestGraphSchema", "QuestGraphSchema_BreakPinLinks", "Break Pin Links"));\n\t\n\tSuper::BreakPinLinks(TargetPin, bSendsNodeNotifcation);\n}\n\n// added-end\n\n...\n\n// removed-start\n#undef LOCTEXT_NAMESPACE// removed-end\n// added-start\n#undef LOCTEXT_NAMESPACE\n// added-end\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"narrativebuildcs",children:"Narrative.Build.cs"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Narrative.Build.cs" showLineNumbers',children:' using UnrealBuildTool;\n \n// added-start\n                "GameplayTags"\n// added-end\n\n...\n\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"narrativeh",children:"Narrative.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Public/Narrative.h" showLineNumbers',children:"#pragma once\n \n...\n\n// removed-start\n\nDECLARE_LOG_CATEGORY_EXTERN(LogNarrativeRuntime, All, All);\n// removed-end\n \n //Runtime module for narrative \n class FNarrativeModule : public IModuleInterface\n\n\n"})}),"\n",(0,r.jsx)(t.h3,{id:"narrativequestsettingsh",children:"NarrativeQuestSettings.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Public/NarrativeQuestSettings.h" showLineNumbers',children:'\n// removed-start\n// Fill out your copyright notice in the Description page of Project Settings.\n// removed-end\n// added-start\n// Copyright Narrative Tools 2025. \n// added-end\n \n #pragma once\n \n\n...\n\n// removed-start\n#include "UObject/NoExportTypes.h"\n// removed-end\n #include "NarrativeQuestSettings.generated.h"\n \n /**\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questh",children:"Quest.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Public/Quest.h" showLineNumbers',children:'#pragma once\n \n...\n\n// removed-start\n#include "UObject/NoExportTypes.h"\n// removed-end\n #include "QuestSM.h"\n #include "QuestTask.h"\n #include "Quest.generated.h"\n// added-start\nclass UDialogue;\n// added-end\n// added-start\nDECLARE_DYNAMIC_MULTICAST_DELEGATE_OneParam(FOnQuestPostLoad, const UQuest*, Quest);\n// added-end\n// added-start\nclass UQuest; \n\n//Allows blueprints to define instanced quest requirements. \nUSTRUCT(BlueprintType)\nstruct NARRATIVE_API FInstancedQuestRequirement\n{\n\tGENERATED_BODY()\n\n\n\tFInstancedQuestRequirement(){};\n\n\t//The instanced goal\n\tUPROPERTY(Instanced, EditAnywhere, BlueprintReadOnly, Category = "Requirement")\n\tTObjectPtr<UQuestRequirement> Requirement;\n\n};\n\n/** Quest Requirements can be added/removed by quests at any time to define requirements the player needs to adhere to.\nFor example, you could add a \'Stay Near Actor\' requirement that specifies we need to stay near a certain NPC or the quest fails. \nAnother example might be a \'Keep NPC Alive\' requirement that fails the quest if a certain NPC dies. */\nUCLASS(abstract, Blueprintable, BlueprintType, EditInlineNew)\nclass NARRATIVE_API UQuestRequirement : public UObject\n{\n\n\tGENERATED_BODY()\n\nprotected:\n\n\tfriend class UQuest; \n\n\tUQuestRequirement();\n\n\n\t// Allows the Object to get a valid UWorld from it\'s outer.\n\tvirtual UWorld* GetWorld() const override\n\t{\n\t\tif (HasAllFlags(RF_ClassDefaultObject))\n\t\t{\n\t\t\t// If we are a CDO, we must return nullptr instead of calling Outer->GetWorld() to fool UObject::ImplementsGetWorld.\n\t\t\treturn nullptr;\n\t\t}\n\n\t\tUObject* Outer = GetOuter();\n\n\t\twhile (Outer)\n\t\t{\n\t\t\tUWorld* World = Outer->GetWorld();\n\t\t\tif (World)\n\t\t\t{\n\t\t\t\treturn World;\n\t\t\t}\n\n\t\t\tOuter = Outer->GetOuter();\n\t\t}\n\n\t\treturn nullptr;\n\t};\n\n\t//Called when this requirement is added to the quest. \n\tUFUNCTION(BlueprintNativeEvent, Category = "Requirement")\n\tvoid OnAdded(UQuest* Quest);\n\tvirtual void OnAdded_Implementation(UQuest* Quest);\n\n\t//Called when this requirement is removed from the quest. \n\tUFUNCTION(BlueprintNativeEvent, Category = "Requirement")\n\tvoid OnRemoved(UQuest* Quest);\n\tvirtual void OnRemoved_Implementation(UQuest* Quest);\n\npublic:\n\n\t//Get the quest that owns this requirement.  \n\tUFUNCTION(BlueprintPure, Category = "Requirement")\n\tvirtual UQuest* GetOwningQuest() const;\n\n};\n\n// added-end\n\n...\n\n// removed-start\n\n// removed-end\n protected:\n// added-start\n\n#if WITH_EDITOR\n\tvirtual void PostLoad() override;\n\tvirtual void PreEditChange(FProperty* PropertyAboutToChange) override;\n\tvirtual void PostEditChangeProperty(struct FPropertyChangedEvent& PropertyChangedEvent) override;\n\tvoid UpdateDialogueConnection();\n\n#endif\n\t\n\t//Called when the quest is loaded back in from disk\n\tUFUNCTION(BlueprintImplementableEvent, meta = (DisplayName="On Quest Post Load"))\n\tvoid BPQuestPostLoad();\n\n\t//Called when the quest is loaded back in from disk - allows you to set any quest state back up \n\tvirtual void QuestPostLoad();\n// added-end\n \n \t//Called before tasks are ready - a good place to set up data tasks depend on \n\n...\n\n// removed-start\n\t\tvoid BPPreQuestStarted(const UQuest* Quest);\n// removed-end\n// added-start\n\tvoid BPPreQuestStarted(const UQuest* Quest);\n// added-end\n \n \tUFUNCTION(BlueprintImplementableEvent, meta = (DisplayName="On Quest Started"))\n// removed-start\n\t\tvoid BPOnQuestStarted(const UQuest* Quest);\n\n\tUFUNCTION()\n\t\tvoid FailQuest(FText QuestFailedMessage);\n// removed-end\n// added-start\n\tvoid BPOnQuestStarted(const UQuest* Quest);\n\n\tUFUNCTION(BlueprintCallable, Category = "Quests")\n\tvirtual void FailQuest(FText QuestFailedMessage);\n// added-end\n \n\n...\n\n// removed-start\n\t\tvoid BPOnQuestFailed(const UQuest* Quest, const FText& QuestFailedMessage);\n// removed-end\n// added-start\n\tvoid BPOnQuestFailed(const UQuest* Quest, const FText& QuestFailedMessage);\n// added-end\n \n \t/**Manually set the quest as succeeded. You\'ll need to provide some text for the UI as theres no node  the quest, you\'re manually succeeding it.*/\n// removed-start\n\tUFUNCTION()\n\t\tvoid SucceedQuest(FText QuestSucceededMessage);\n// removed-end\n// added-start\n\tUFUNCTION(BlueprintCallable, Category = "Quests")\n\tvirtual void SucceedQuest(FText QuestSucceededMessage);\n// added-end\n \n\n...\n\n// removed-start\n\t\tvoid OnQuestTaskProgressChanged(const UNarrativeTask* Task, const class UQuestBranch* Step, int32 CurrentProgress, int32 RequiredProgress);\n// removed-end\n// added-start\n\tvirtual void OnQuestTaskProgressChanged(const UNarrativeTask* Task, const class UQuestBranch* Step, int32 CurrentProgress, int32 RequiredProgress);\n// added-end\n \n \tUFUNCTION(BlueprintImplementableEvent, meta = (DisplayName = "On Quest Objective Progress Made"))\n// removed-start\n\t\tvoid BPOnQuestTaskProgressChanged(const UQuest* Quest, const UNarrativeTask* Task, const class UQuestBranch* Step, int32 CurrentProgress, int32 RequiredProgress);\n// removed-end\n// added-start\n\tvoid BPOnQuestTaskProgressChanged(const UQuest* Quest, const UNarrativeTask* Task, const class UQuestBranch* Step, int32 CurrentProgress, int32 RequiredProgress);\n// added-end\n \n\n...\n\n// removed-start\n\t\tvoid OnQuestBranchCompleted(const class UQuestBranch* Branch);\n// removed-end\n// added-start\n\tvirtual void OnQuestBranchCompleted(const class UQuestBranch* Branch);\n// added-end\n \n \tUFUNCTION(BlueprintImplementableEvent, meta = (DisplayName = "On Branch Taken"))\n \t\tvoid BPOnQuestBranchCompleted(const UQuest* Quest, const class UQuestBranch* Branch);\n\n...\n\n// removed-start\n\n// removed-end\n// added-start\n\t\n// added-end\n \tvirtual void EnterState_Internal(UQuestState* NewState);\n \tvirtual void TakeBranch(UQuestBranch* Branch);\n \n\n...\n\n// removed-start\n\n\n// removed-end\n// added-start\n\t\n// added-end\n \tvirtual void BeginQuest(const FName& OptionalStartFromID = NAME_None);\n \n// added-start\n\tvoid HandleBeginDialogue();\n\t\n// added-end\n \tUPROPERTY(EditAnywhere, BlueprintReadOnly, Category = "Quest Details")\n// added-start\n\n\t// A dialogue asset holding all dialogue from the quest. \n\tUPROPERTY(EditDefaultsOnly, BlueprintReadOnly, Category="Dialogue")\n\tTSubclassOf<UDialogue> QuestDialogue;\n\nprivate:\n\t\n#if WITH_EDITORONLY_DATA\n\n\t// use to check if the QuestDialogue was cleared and to know what it was to remove refs \n\tUPROPERTY()\n\tTSubclassOf<UDialogue> LastQuestDialogue;\n\t\n#endif\n\nprotected:\n\t\n\t// if true, the quest dialogue will resume when you load back into the game\n\tUPROPERTY(EditDefaultsOnly, BlueprintReadOnly, Category="Dialogue")\n\tbool bResumeDialogueAfterLoad;\n// added-end\n// added-start\n\t//Holds all the quest requirements \n\tUPROPERTY()\n\tTArray<TObjectPtr<UQuestRequirement>> QuestRequirements;\n\n// added-end\n\n...\n\n// removed-start\n\t\tFOnQuestStarted QuestStarted;\n// removed-end\n// added-start\n\tFOnQuestStarted QuestStarted;\n\n\t/**Called when the quest has been loaded back in.*/\n\tUPROPERTY(BlueprintAssignable, Category = "Quests")\n\tFOnQuestPostLoad OnQuestPostLoad;\n// added-end\n \n \t/**Called when a quest is forgotten.*/\n \tUPROPERTY(BlueprintAssignable, Category = "Quests")\n// removed-start\n\t\tFOnQuestForgotten QuestForgotten;\n// removed-end\n// added-start\n\tFOnQuestForgotten QuestForgotten;\n// added-end\n\n...\n\n// removed-start\n\tUFUNCTION(BlueprintNativeEvent, BlueprintCallable, Category = "Dialogue")\n// removed-end\n// added-start\n\tUFUNCTION(BlueprintNativeEvent, BlueprintCallable, Category = "Quest")\n// added-end\n \tAActor* SpawnQuestActor(TSubclassOf<class AActor> ActorClass, const FTransform& ActorTransform);\n \tvirtual AActor* SpawnQuestActor_Implementation(TSubclassOf<class AActor> ActorClass, const FTransform& ActorTransform);\n \n// added-start\n\t/* Add a requirement to the quest. */\n\tUFUNCTION(BlueprintNativeEvent, BlueprintCallable, Category = "Quest")\n\tvoid AddQuestRequirement(UQuestRequirement* Requirement);\n\tvirtual void AddQuestRequirement_Implementation(UQuestRequirement* Requirement);\n\n\t/* Remove a requirement from the quest. */\n\tUFUNCTION(BlueprintNativeEvent, BlueprintCallable, Category = "Quest")\n\tvoid RemoveQuestRequirement(UQuestRequirement* Requirement);\n\tvirtual void RemoveQuestRequirement_Implementation(UQuestRequirement* Requirement);\n\n// added-end\n\n...\n\n// removed-start\n\tTArray<class APlayerController*> GetGroupMembers() const; \n\n// removed-end\n// added-start\n\tTArray<class APlayerController*> GetGroupMembers() const;\n\n\tTSubclassOf<UDialogue> GetQuestDialogueClass() { return QuestDialogue; }\n// added-end\n };\n// added-start\n\nstruct NARRATIVE_API FQuestDelegates final\n{\n\n\tDECLARE_MULTICAST_DELEGATE_ThreeParams(FOnQuestStartedSignature, UNarrativeComponent*, UQuest*, const FName& OptionalStartFromID);\n\tDECLARE_MULTICAST_DELEGATE_TwoParams(FOnQuestEndSignature, UNarrativeComponent*, UQuest*);\n\t\n\t// called when a quest starts\n\tstatic FOnQuestStartedSignature OnQuestStarted;\n\t\n\t// called when a quest ends\n\tstatic FOnQuestEndSignature OnQuestEnd;\n};\n// added-end\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"narrativeeventh",children:"NarrativeEvent.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Public/NarrativeEvent.h" showLineNumbers',children:'#pragma once\n \n...\n\n// removed-start\n#include "UObject/NoExportTypes.h"\n// removed-end\n #include "NarrativeEvent.generated.h"\n \n \n// added-start\n\t/**\n\tThis event will only fire if the following conditions are met \n\t*/\n\tUPROPERTY(EditAnywhere, BlueprintReadOnly, Instanced, Category = "Events & Conditions")\n\tTArray<class UNarrativeCondition*> Conditions;\n\n// added-end\n\n...\n\n// removed-start\n\tvoid ExecuteEvent(APawn* Pawn, APlayerController* Controller, class UNarrativeComponent* NarrativeComponent);\n\tvirtual void ExecuteEvent_Implementation(APawn* Pawn, APlayerController* Controller, class UNarrativeComponent* NarrativeComponent);\n// removed-end\n// added-start\n\tvoid OnActivate(APawn* Target, APlayerController* Controller, class UNarrativeComponent* NarrativeComponent);\n\tvirtual void OnActivate_Implementation(APawn* Target, APlayerController* Controller, class UNarrativeComponent* NarrativeComponent);\n\n\tUFUNCTION(BlueprintNativeEvent, Category = "Event")\n\tvoid OnDeactivate(APawn* Target, APlayerController* Controller, class UNarrativeComponent* NarrativeComponent);\n\tvirtual void OnDeactivate_Implementation(APawn* Target, APlayerController* Controller, class UNarrativeComponent* NarrativeComponent);\n\n\t/**Execute the event.\n\t@param Target this is the target that the event was specified to run on. \n\t*/\n\tUFUNCTION(BlueprintNativeEvent, Category = "Event")\n\tvoid ExecuteEvent(APawn* Target, APlayerController* Controller, class UNarrativeComponent* NarrativeComponent);\n\tvirtual void ExecuteEvent_Implementation(APawn* Target, APlayerController* Controller, class UNarrativeComponent* NarrativeComponent);\n// added-end\n \n \t/**Define the text that will show up on a node if this event is added to it */\n \tUFUNCTION(BlueprintNativeEvent, BlueprintCallable, Category = "Event")\n// added-start\n\t\n\t//Check if all the conditions are met on this quest/dialogue node\n\tUFUNCTION(BlueprintCallable, Category = "Events & Conditions")\n\tbool AreConditionsMet(APawn* Pawn, APlayerController* Controller, class UNarrativeComponent* NarrativeComponent);\n// added-end\n\n...\n\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"narrativedialoguesequenceh",children:"NarrativeDialogueSequence.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Public/NarrativeDialogueSequence.h" showLineNumbers',children:'#pragma once\n \n...\n\n// removed-start\n#include "UObject/NoExportTypes.h"\n// removed-end\n #include "LevelSequencePlayer.h"\n// removed-start\n#include "DialogueSM.h"\n// removed-end\n #include <MovieSceneSequencePlayer.h>\n #include <CineCameraSettings.h>\n\n...\n\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"narrativecomponenth",children:"NarrativeComponent.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Public/NarrativeComponent.h" showLineNumbers',children:'#pragma once\n \n...\n\n// removed-start\nDECLARE_DYNAMIC_MULTICAST_DELEGATE_TwoParams(FOnDialogueFinished, class UDialogue*, Dialogue, const bool, bStartingNewDialogue);\n// removed-end\n// added-start\nDECLARE_DYNAMIC_MULTICAST_DELEGATE_ThreeParams(FOnDialogueFinished, class UDialogue*, Dialogue, const bool, bStartingNewDialogue, const EExitDialogueReason, Reason);\n// added-end\n DECLARE_DYNAMIC_MULTICAST_DELEGATE_TwoParams(FDialogueOptionSelected, class UDialogue*, Dialogue, class UDialogueNode_Player*, PlayerReply);\n DECLARE_DYNAMIC_MULTICAST_DELEGATE_TwoParams(FDialogueRepliesAvailable, class UDialogue*, Dialogue, const TArray<UDialogueNode_Player*>&, PlayerReplies);\n DECLARE_DYNAMIC_MULTICAST_DELEGATE_FourParams(FNPCDialogueLineStarted, class UDialogue*, Dialogue, class UDialogueNode_NPC*, Node, const FDialogueLine&, DialogueLine, const FSpeakerInfo&, Speaker);\n\n...\n\n// removed-start\nUCLASS( ClassGroup=(Narrative), DisplayName = "Narrative Component", meta=(BlueprintSpawnableComponent) )\n// removed-end\n// added-start\nUCLASS( ClassGroup=(Narrative), DisplayName = "Narrative Tales Component", meta=(BlueprintSpawnableComponent) )\n// added-end\n class NARRATIVE_API UNarrativeComponent : public UActorComponent\n {\n \tGENERATED_BODY()\n// added-start\n\n\t/*A map of every narrative task the player has ever completed, where the key is the amount of times the action has been completed\n\ta TMap means we can very efficiently track large numbers of actions, such as shooting where the player may shoot a gun thousands of times */\n\tUPROPERTY(EditAnywhere, SaveGame, Category = "Quests")\n\tTMap<FString, int32> MasterTaskList;\n// added-end\n\n...\n\n// removed-start\n\t/*A map of every narrative task the player has ever completed, where the key is the amount of times the action has been completed\n\ta TMap means we can very efficiently track large numbers of actions, such as shooting where the player may shoot a gun thousands of times\n\t\n\t*/\n\tUPROPERTY(EditAnywhere, Category = "Quests")\n\tTMap<FString, int32> MasterTaskList;\n\n// removed-end\n \t//We set this flag to true during loading so we don\'t broadcast any quest update delegates as we load quests back in\n \tbool bIsLoading;\n \n// added-start\n\tvirtual void DialogueRepliesAvailable(class UDialogue* Dialogue, const TArray<UDialogueNode_Player*>& PlayerReplies);\n\n\tUFUNCTION()\n\tvirtual void DialogueLineStarted(class UDialogue* Dialogue, UDialogueNode* Node, const FDialogueLine& DialogueLine);\n\n\tUFUNCTION()\n\tvirtual void DialogueLineFinished(class UDialogue* Dialogue, UDialogueNode* Node, const FDialogueLine& DialogueLine);\n\n\tUFUNCTION()\n\tvirtual void DialogueBegan(class UDialogue* Dialogue);\n\n\tUFUNCTION()\n\tvirtual void DialogueFinished(class UDialogue* Dialogue, const bool bStartingNewDialogue, const EExitDialogueReason Reason);\n\n\tUFUNCTION()\n// added-end\n\n...\n\n// removed-start\n\tUFUNCTION()\n\tvirtual void DialogueRepliesAvailable(class UDialogue* Dialogue, const TArray<UDialogueNode_Player*>& PlayerReplies);\n\n\tUFUNCTION()\n\tvirtual void DialogueLineStarted(class UDialogue* Dialogue, UDialogueNode* Node, const FDialogueLine& DialogueLine);\n\n\tUFUNCTION()\n\tvirtual void DialogueLineFinished(class UDialogue* Dialogue, UDialogueNode* Node, const FDialogueLine& DialogueLine);\n\n\tUFUNCTION()\n\tvirtual void DialogueBegan(class UDialogue* Dialogue);\n\n\tUFUNCTION()\n\tvirtual void DialogueFinished(class UDialogue* Dialogue, const bool bStartingNewDialogue);\n// removed-end\n \n \n public:\n\n...\n\n// removed-start\n\tvirtual void ClientExitDialogue();\n// removed-end\n// added-start\n\tvirtual void ClientExitDialogue(const EExitDialogueReason Reason);\n// added-end\n \n \t/**Used by the server to tell client to end dialogue*/\n \tUFUNCTION(Client, Reliable, Category = "Dialogues")\n// removed-start\n\tvirtual void ClientExitPartyDialogue();\n// removed-end\n// added-start\n\tvirtual void ClientExitPartyDialogue(const EExitDialogueReason Reason);\n// added-end\n\n...\n\n// removed-start\n\tvirtual void TryExitDialogue();\n// removed-end\n// added-start\n\tvirtual bool TryExitDialogue(const EExitDialogueReason Reason);\n// added-end\n \n \t/**Exit the dialogue, will never fail*/\n// removed-start\n\tvirtual void ExitDialogue();\n// removed-end\n// added-start\n\tvirtual void ExitDialogue(const EExitDialogueReason Reason);\n// added-end\n \n\n...\n\n// removed-start\n\tvirtual void ServerTryExitDialogue();\n// removed-end\n// added-start\n\tvirtual void ServerTryExitDialogue(const EExitDialogueReason Reason);\n// added-end\n \n \t/**Return true if we\'re in a dialogue \n \n\n...\n\n// removed-start\n\n\n\n};// removed-end\n// added-start\n};\n// added-end\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"narrativeconditionh",children:"NarrativeCondition.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Public/NarrativeCondition.h" showLineNumbers',children:'#pragma once\n \n...\n\n// removed-start\n#include "UObject/NoExportTypes.h"\n// removed-end\n #include "NarrativeCondition.generated.h"\n \n //How do we handle running this condition on a party dialogue?\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questtaskh",children:"QuestTask.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Public/QuestTask.h" showLineNumbers',children:'\n #pragma once\n \n #include "CoreMinimal.h"\n// removed-start\n#include "UObject/NoExportTypes.h"\n// removed-end\n\n...\n\n// removed-start\n * Tasks are blueprints that manage a task for the player to complete. This is mostly used by the quest editor. \n// removed-end\n// added-start\n * Tasks are blueprints that manage a task for the player to complete. This is mostly used by the quest system  \n// added-end\n  * This is different from Data Tasks which are just data assets: a TaskName and Argument, ie "FindItem:Sword", \n  * \n  * A good example is the GoToLocation task that comes with narrative, which checks if the player has reached a goal location. This type\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"narrativedefaultcinecamh",children:"NarrativeDefaultCinecam.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Public/NarrativeDefaultCinecam.h" showLineNumbers',children:"\n// removed-start\n// Fill out your copyright notice in the Description page of Project Settings.\n// removed-end\n// added-start\n// Copyright Narrative Tools 2025. \n// added-end\n \n #pragma once\n \n\n\n"})}),"\n",(0,r.jsx)(t.h3,{id:"narrativepartycomponenth",children:"NarrativePartyComponent.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Public/NarrativePartyComponent.h" showLineNumbers',children:"#pragma once\n \n...\n\n// removed-start\n\tvirtual void ExitDialogue() override;\n// removed-end\n// added-start\n\tvirtual void ExitDialogue(const EExitDialogueReason Reason);\n// added-end\n \n \t/**Parties dont have owning controllers or pawns so we iterate our party members and find them that way*/\n \tvirtual APawn* GetOwningPawn() const override;\n\n\n"})}),"\n",(0,r.jsx)(t.h3,{id:"dialogueh",children:"Dialogue.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Public/Dialogue.h" showLineNumbers',children:'#pragma once\n \n...\n\n// removed-start\n#include "UObject/NoExportTypes.h"\n// removed-end\n #include "LevelSequencePlayer.h"\n #include "DialogueSM.h"\n// removed-start\n#include "MovieSceneSequencePlayer.h"\n// removed-end\n// added-start\n#include <Misc/Optional.h>\n#include <GameplayTagContainer.h>\n// added-end\n #include "Dialogue.generated.h"\n// added-start\n\nclass UQuest;\n//The reason why a dialogue ended. \nUENUM(BlueprintType)\nenum class EExitDialogueReason : uint8\n{\n\tEDR_NoLines,\n\tEDR_PlayerExited,\n\tEDR_TooFarAway,\n\tEDR_NewDialogueStarted,\n\tEDR_StoppedByCinematic\n};\n// added-end\n// added-start\n\n\t\tOwnedTags.AddTag(FGameplayTag::RequestGameplayTag("Narrative.State.DialogueControlled", false));\n// added-end\n// added-start\n\t\n\t//Tags to apply to this speaker for the duration of the dialogue \n\tUPROPERTY(EditAnywhere, BlueprintReadOnly, Category = "Speaker Details")\n\tFGameplayTagContainer OwnedTags;\n// added-end\n// added-start\n\t\tbOverride_bFreeMovement = false;\n\t\tbFreeMovement = true; \n\t\tbOverride_bStopMovement = false;\n\t\tbStopMovement = false;\n\t\tbOverride_bUnskippable = false;\n\t\tbUnskippable = false; \n// added-end\n\n...\n\n// removed-start\n\tUPROPERTY(EditAnywhere, BlueprintReadWrite, Category = "Play Params")\n// removed-end\n// added-start\n\tUPROPERTY(EditDefaultsOnly, BlueprintReadWrite, Category = "Play Params")\n// added-end\n \tFName StartFromID;\n \n \t//The priority we want to play this dialogue at. -1 means use the dialogues default priority. \n// removed-start\n\tUPROPERTY(EditAnywhere, BlueprintReadWrite, Category = "Play Params")\n// removed-end\n// added-start\n\tUPROPERTY(EditDefaultsOnly, BlueprintReadWrite, Category = "Play Params")\n// added-end\n// added-start\n\n\tUPROPERTY(EditDefaultsOnly, BlueprintReadWrite, Category = Overrides, meta = (PinHiddenByDefault, InlineEditConditionToggle))\n\tuint32 bOverride_bFreeMovement : 1;\n\n\t//Do we want the dialogue to be free movement? \n\tUPROPERTY(EditDefaultsOnly, BlueprintReadWrite, Category = "Play Params", meta = (editcondition = "bOverride_bFreeMovement"))\n\tbool bFreeMovement;\n\n\tUPROPERTY(EditDefaultsOnly, BlueprintReadWrite, Category = Overrides, meta = (PinHiddenByDefault, InlineEditConditionToggle))\n\tuint32 bOverride_bStopMovement : 1;\n\n\t//Do we want the dialogue to stop the characters in it from moving when it begins? \n\tUPROPERTY(EditDefaultsOnly, BlueprintReadWrite, Category = "Play Params", meta = (editcondition = "bOverride_bStopMovement"))\n\tbool bStopMovement;\n\t\n\tUPROPERTY(EditDefaultsOnly, BlueprintReadWrite, Category = Overrides, meta = (PinHiddenByDefault, InlineEditConditionToggle))\n\tuint32 bOverride_bUnskippable : 1;\n\n\t//Whether we want to allow the player to skip lines in this dialogue. \n\tUPROPERTY(EditDefaultsOnly, BlueprintReadWrite, Category = "Play Params", meta = (editcondition = "bOverride_bUnskippable"))\n\tbool bUnskippable;\n// added-end\n\n...\n\n// removed-start\n\tbool IsNameStableForNetworking() const override { return true; };\n// removed-end\n// added-start\n\tbool IsNameStableForNetworking() const override { return true; }\n// added-end\n \tbool IsSupportedForNetworking() const override { return true; };\n \n \t#if WITH_EDITOR\n// added-start\n\tvirtual void PostLoad() override;\n// added-end\n// added-start\n\n\tUDialogueNode* GetCurrentNode() { return CurrentNode; }\n// added-end\n// added-start\n\t// if > 0, Dialogue will auto-end if player goes greater than this distance from any speaker in the dialgue. \n\tUPROPERTY(EditAnywhere, BlueprintReadOnly, Category = "Configuration")\n\tfloat EndDialogueDist;\n\n\t//If true, the player won\'t be able to skip lines in this dialogue. \n\tUPROPERTY(EditAnywhere, BlueprintReadOnly, Category = "Configuration")\n\tbool bUnskippable;\n\n// added-end\n\n...\n\n// removed-start\n\tUPROPERTY()\n// removed-end\n// added-start\n\tUPROPERTY(VisibleAnywhere, Category = "Debug")\n// added-end\n \tclass UDialogueNode_NPC* RootDialogue;\n \n \t//Holds all of the npc replies in the dialogue\n// removed-start\n\tUPROPERTY()\n// removed-end\n// added-start\n\tUPROPERTY(VisibleAnywhere, Category = "Debug")\n// added-end\n\n...\n\n// removed-start\n\tUPROPERTY()\n// removed-end\n// added-start\n\tUPROPERTY(VisibleAnywhere, Category = "Debug")\n// added-end\n \tTArray<class UDialogueNode_Player*> PlayerReplies;\n \n \t//Ends the current dialogue line \n// added-start\n\n\t/*\n\t* Return whether or not we can skip lines in this dialogue or not\n\t*/\n\tUFUNCTION(BlueprintNativeEvent, BlueprintCallable, Category = "Dialogue")\n\tbool CanSkipDialogue() const;\n\tvirtual bool CanSkipDialogue_Implementation() const;\n// added-end\n\n...\n\n// removed-start\n\tAActor* LinkSpeakerAvatar(const FSpeakerInfo& Info);\n\tvirtual AActor* LinkSpeakerAvatar_Implementation(const FSpeakerInfo& Info);\n// removed-end\n// added-start\n\tAActor* LinkSpeakerAvatar(const FSpeakerInfo& Info, const int32 Idx);\n\tvirtual AActor* LinkSpeakerAvatar_Implementation(const FSpeakerInfo& Info, const int32 Idx);\n// added-end\n \t\n \t/*\n \t* Clean up a given actor from the world\n\n...\n\n// removed-start\n\tvirtual void ExitDialogue();\n// removed-end\n// added-start\n\tvirtual void ExitDialogue(const EExitDialogueReason Reason);\n// added-end\n \n \tUFUNCTION()\n \tvirtual void BlendingOutFinished();\n// added-start\n\t\n#if WITH_EDITORONLY_DATA\n\n\t// editor only ref to quest that directly uses this dialogue.\n\tUPROPERTY()\n\tTSubclassOf<UQuest> EditorLinkedQuest;\n\n#endif\n// added-end\n\n...\n\n// removed-start\n};// removed-end\n// added-start\n};\n\nstruct NARRATIVE_API FDialogueDelegates final\n{\n\tDECLARE_MULTICAST_DELEGATE_ThreeParams(FOnDialogueStartedSignature, UNarrativeComponent*, UDialogue*, const FName& OptionalStartFromID);\n\tDECLARE_MULTICAST_DELEGATE_TwoParams(FOnDialogueEndSignature, UNarrativeComponent*, UDialogue*);\n\t\n\t// called when a dialogue starts\n\tstatic FOnDialogueStartedSignature OnDialogueStarted;\n\t\n\t// called when a dialogue ends\n\tstatic FOnDialogueEndSignature OnDialogueEnd;\n};\n// added-end\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"narrativenodebaseh",children:"NarrativeNodeBase.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Public/NarrativeNodeBase.h" showLineNumbers',children:'#pragma once\n \n...\n\n// removed-start\n#include "UObject/NoExportTypes.h"\n// removed-end\n #include "NarrativeEvent.h"\n #include "NarrativeNodeBase.generated.h"\n \n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"narrativedialoguesettingsh",children:"NarrativeDialogueSettings.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Public/NarrativeDialogueSettings.h" showLineNumbers',children:'#pragma once\n \n...\n\n// removed-start\n#include "UObject/NoExportTypes.h"\n// removed-end\n #include "NarrativeDialogueSettings.generated.h"\n \n /**\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"narrativefunctionlibraryh",children:"NarrativeFunctionLibrary.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Public/NarrativeFunctionLibrary.h" showLineNumbers',children:' #pragma once\n \n// added-start\n#include "NarrativeNodeSelector.h"\n// added-end\n// added-start\n\t/* dialogue selector */\n\t// makes a dialogue node selector, guaranteeing the use of the node selection list\n\tUFUNCTION(BlueprintCallable, BlueprintPure, Category = "Narrative", meta=(Keywords="Dialogue Make Selector"))\n\tstatic FDialogueNodeSelector MakeDialogueNodeSelector(FDialogueNodeSelector Selector);\n\t\n\t// makes a dialogue node selector from a specific node ID\n\tUFUNCTION(BlueprintCallable, BlueprintPure, Category = "Narrative", meta=(CompactNodeTitle="From ID", Keywords="Dialogue Make From ID Selector"))\n\tstatic FDialogueNodeSelector MakeDialogueNodeSelectorFromID(FName NodeID);\n\t\n\t// takes a dialogue selector, and get the node ID from it\n\tUFUNCTION(BlueprintCallable, BlueprintPure, Category = "Narrative", meta=(CompactNodeTitle="Get ID", Keywords="Dialogue Get ID Selector"))\n\tstatic void BreakDialogueNodeSelector(const FDialogueNodeSelector& Selector, FName& NodeID);\n\n\t// Gets the node ID for a given dialogue node selector\n\tUFUNCTION(BlueprintPure, DisplayName="Dialogue Node Selector To Name", Category = "Utilities", meta=(CompactNodeTitle = "->", BlueprintThreadSafe, BlueprintAutocast))\n\tstatic FName Conv_DialogueNodeSelectorToName(const FDialogueNodeSelector& Selector);\n\n\t// Gets a dialogue node selector from a given node ID\n\tUFUNCTION(BlueprintPure, DisplayName="Name To Dialogue Node Selector", Category = "Utilities", meta=(CompactNodeTitle = "->", BlueprintThreadSafe, BlueprintAutocast))\n\tstatic FDialogueNodeSelector Conv_NameToDialogueNodeSelector(const FName& NodeID);\n\t/* dialogue selector */\n\t\n\t/* quest state selector */\n\t// makes a quest node selector, guaranteeing the use of the node selection list\n\tUFUNCTION(BlueprintCallable, BlueprintPure, Category = "Narrative", meta=(Keywords="Quest Make Selector"))\n\tstatic FQuestStateSelector MakeQuestStateSelector(FQuestStateSelector Selector);\n\t\n\t// makes a quest state selector from a specific node ID\n\tUFUNCTION(BlueprintCallable, BlueprintPure, Category = "Narrative", meta=(CompactNodeTitle="From ID", Keywords="Quest Make From ID Selector"))\n\tstatic FQuestStateSelector MakeQuestStateSelectorFromID(FName NodeID);\n\t\n\t// takes a quest state selector, and get the node ID from it\n\tUFUNCTION(BlueprintCallable, BlueprintPure, Category = "Narrative", meta=(CompactNodeTitle="Get ID", Keywords="Quest Get ID Selector"))\n\tstatic void BreakQuestStateSelector(const FQuestStateSelector& Selector, FName& NodeID);\n\n\t// Gets the state ID for a given quest node selector\n\tUFUNCTION(BlueprintPure, DisplayName="Quest State Selector To Name", Category = "Utilities", meta=(CompactNodeTitle = "->", BlueprintThreadSafe, BlueprintAutocast))\n\tstatic FName Conv_QuestStateSelectorToName(const FQuestStateSelector& Selector);\n\n\t// Gets a quest state selector from a given node ID\n\tUFUNCTION(BlueprintPure, DisplayName="Name To Quest State Selector", Category = "Utilities", meta=(CompactNodeTitle = "->", BlueprintThreadSafe, BlueprintAutocast))\n\tstatic FQuestStateSelector Conv_NameToQuestStateSelector(const FName& NodeID);\n\t/* quest state selector */\n\n\t/* quest branch selector */\n\t// makes a quest branch selector, guaranteeing the use of the node selection list\n\tUFUNCTION(BlueprintCallable, BlueprintPure, Category = "Narrative", meta=(Keywords="Quest Make Selector"))\n\tstatic FQuestBranchSelector MakeQuestBranchSelector(FQuestBranchSelector Selector);\n\t\n\t// makes a quest branch selector from a specific node ID\n\tUFUNCTION(BlueprintCallable, BlueprintPure, Category = "Narrative", meta=(CompactNodeTitle="From ID", Keywords="Quest Make From ID Selector"))\n\tstatic FQuestBranchSelector MakeQuestBranchSelectorFromID(FName NodeID);\n\t\n\t// takes a quest branch selector, and get the node ID from it\n\tUFUNCTION(BlueprintCallable, BlueprintPure, Category = "Narrative", meta=(CompactNodeTitle="Get ID", Keywords="Quest Get ID Selector"))\n\tstatic void BreakQuestBranchSelector(const FQuestBranchSelector& Selector, FName& NodeID);\n\n\t// Gets the branch ID for a given quest node selector\n\tUFUNCTION(BlueprintPure, DisplayName="Quest Branch Selector To Name", Category = "Utilities", meta=(CompactNodeTitle = "->", BlueprintThreadSafe, BlueprintAutocast))\n\tstatic FName Conv_QuestBranchSelectorToName(const FQuestBranchSelector& Selector);\n\n\t// Gets a quest branch selector from a given node ID\n\tUFUNCTION(BlueprintPure, DisplayName="Name To Quest Branch Selector", Category = "Utilities", meta=(CompactNodeTitle = "->", BlueprintThreadSafe, BlueprintAutocast))\n\tstatic FQuestBranchSelector Conv_NameToQuestBranchSelector(const FName& NodeID);\n\t/* quest branch selector */\n\t\n// added-end\n\n...\n\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"dialoguesmh",children:"DialogueSM.h"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Public/DialogueSM.h" showLineNumbers',children:'#pragma once\n \n...\n\n// removed-start\n#include "MovieSceneSequencePlayer.h"\n// removed-end\n #include "DialogueSM.generated.h"\n \n DECLARE_DYNAMIC_MULTICAST_DELEGATE(FOnDialogueNodeFinishedPlaying);\n\n...\n\n// removed-start\n\t\tFacialAnimation = nullptr;\n// removed-end\n \t\tDialogueSound = nullptr;\n \t\tDialogueMontage = nullptr;\n// added-start\n\t\tFacialAnimation = nullptr;\n// added-end\n \t\tShot = nullptr;\n\n...\n\n// removed-start\n\tclass USoundBase* DialogueSound;\n// removed-end\n// added-start\n\tTObjectPtr<class USoundBase> DialogueSound;\n// added-end\n \n \t/**\n \tNarrative will play this montage on the first skeletalmeshcomponent found on your speaker with the tag "Body" added to it.\n\n...\n\n// removed-start\n\tclass UAnimMontage* DialogueMontage;\n// removed-end\n// added-start\n\tTObjectPtr<class UAnimMontage> DialogueMontage;\n// added-end\n \n \t/**\n \tNarrative will play this montage on the first skeletalmeshcomponent found on your speaker with the tag "Face" added to it. \n\n...\n\n// removed-start\n\tUPROPERTY(EditAnywhere, BlueprintReadWrite, Category = "Dialogue Line")\n\tclass UAnimMontage* FacialAnimation;\n// removed-end\n// added-start\n\tUPROPERTY(EditAnywhere, BlueprintReadWrite, Category = "Dialogue Line", meta = (DisplayName = "Facial Animation"))\n\tTObjectPtr<class UAnimMontage> FacialAnimation;\n// added-end\n \n \t/**\n \t* Shot to play for this line. Overrides speaker shot if one is set \n\n...\n\n// removed-start\n\tclass UNarrativeDialogueSequence* Shot;\n// removed-end\n// added-start\n\tTObjectPtr<class UNarrativeDialogueSequence> Shot;\n\n\t/**\n\t* Optional conditions the line must pass for it to be selected \n\t*/\n\tUPROPERTY(EditAnywhere, Instanced, BlueprintReadWrite, Category = "Dialogue Line")\n\tTArray<TObjectPtr<class UNarrativeCondition>> Conditions;\n// added-end\n };\n \n /**Base class for states and branches in the Dialogues state machine*/\n// added-start\n\t //Returns a line with all conditions passing \n// added-end\n// added-start\npublic:\n \t\n// added-end\n// added-start\n\n \tUFUNCTION(BlueprintCallable, Category="DialogueNode")\n \tFText GetDialogueText() const;\n// added-end\n// added-start\n\tFORCEINLINE bool IsAutoSelectIfOnlyReply() const { return bAutoSelectIfOnlyReply || IsRoutingNode(); };\n// added-end\n\n...\n\n// removed-start\n};// removed-end\n// added-start\n\n\t/**If true, this dialogue option will be automatically selected if it is the only reply available. */\n\tUPROPERTY(EditAnywhere, BlueprintReadOnly, Category = "Details - Player Dialogue Node")\n\tbool bAutoSelectIfOnlyReply = true;\n};\n// added-end\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questtaskcpp",children:"QuestTask.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Private/QuestTask.cpp" showLineNumbers',children:'\n #include "Quest.h"\n #include "NarrativeComponent.h"\n #include <TimerManager.h>\n// added-start\n#include <GameFramework/PlayerController.h>\n#include "UObject/ConstructorHelpers.h"\n// added-end\n\n...\n\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"dialogueblueprintgeneratedclasscpp",children:"DialogueBlueprintGeneratedClass.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Private/DialogueBlueprintGeneratedClass.cpp" showLineNumbers',children:' #include "DialogueBlueprintGeneratedClass.h"\n #include "Dialogue.h"\n// removed-start\n#include "DialogueSM.h"\n// removed-end\n\n...\n\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"narrativedialoguesequencecpp",children:"NarrativeDialogueSequence.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Private/NarrativeDialogueSequence.cpp" showLineNumbers',children:' \n #include "NarrativeDialogueSequence.h"\n\n...\n\n// removed-start\n\t\tif (SelectedSequence)\n// removed-end\n// added-start\n\t\tif (SelectedSequence && SequenceActor.IsValid())\n// added-end\n \t\t{\n \t\t\tSequenceActor->PlaybackSettings = PlaybackSettings;\n \t\t\tSequenceActor->SetSequence(SelectedSequence);\n\n...\n\n// removed-start\n\t\t\tif (SequenceActor->SequencePlayer)\n\t\t\t{\n\t\t\t\tSequenceActor->bOverrideInstanceData = AnchorOriginRule != EAnchorOriginRule::AOR_Disabled;\n\n\t\t\t\tif (UDefaultLevelSequenceInstanceData* InstanceData = Cast<UDefaultLevelSequenceInstanceData>(SequenceActor->DefaultInstanceData))\n\t\t\t\t{\n\t\t\t\t\tInstanceData->TransformOrigin = AnchorOriginRule != EAnchorOriginRule::AOR_Disabled ? GetShotAnchorTransform() : FTransform();\n\t\t\t\t}\n\n\t\t\t\tSequenceActor->SequencePlayer->Play();\n// removed-end\n// added-start\n\t\t\tif (ULevelSequencePlayer* SP = SequenceActor->GetSequencePlayer())\n\t\t\t{\n\t\t\t\tSP->Stop();\n\t\t\t\tSP->SetPlaybackPosition(FMovieSceneSequencePlaybackParams(0, EUpdatePositionMethod::Jump));\n\t\t\t}\n\n\t\t\tSequenceActor->bOverrideInstanceData = AnchorOriginRule != EAnchorOriginRule::AOR_Disabled;\n\n\t\t\tif (UDefaultLevelSequenceInstanceData* InstanceData = Cast<UDefaultLevelSequenceInstanceData>(SequenceActor->DefaultInstanceData))\n\t\t\t{\n\t\t\t\tInstanceData->TransformOrigin = AnchorOriginRule != EAnchorOriginRule::AOR_Disabled ? GetShotAnchorTransform() : FTransform();\n\t\t\t}\n\n\t\t\tSequenceActor->PlaybackSettings = PlaybackSettings;\n\t\t\tSequenceActor->SetSequence(SelectedSequence);\n\n\t\t\tif (ULevelSequencePlayer* SP = SequenceActor->GetSequencePlayer())\n\t\t\t{\n\t\t\t\tSP->Play();\n// added-end\n \n \t\t\t\t//Go in, and tell the cinecam to focus/track the speaker \n// removed-start\n\t\t\t\tfor (auto& BoundObject : SequenceActor->SequencePlayer->GetBoundObjects(SequenceActor->FindNamedBinding(NAME_CinecamTag)))\n// removed-end\n// added-start\n\t\t\t\tfor (auto& BoundObject : SP->GetBoundObjects(SequenceActor->FindNamedBinding(NAME_CinecamTag)))\n// added-end\n \t\t\t\t{\n\n...\n\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"narrativeconditioncpp",children:"NarrativeCondition.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Private/NarrativeCondition.cpp" showLineNumbers',children:' \n #include "NarrativeCondition.h"\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"narrativedatataskcpp",children:"NarrativeDataTask.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Private/NarrativeDataTask.cpp" showLineNumbers',children:' #include "NarrativeDataTask.h"\n \n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"dialoguesmcpp",children:"DialogueSM.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Private/DialogueSM.cpp" showLineNumbers',children:' #include "DialogueSM.h"\n #include "Dialogue.h"\n\n...\n\n// removed-start\n#include "NarrativePartyComponent.h"\n// removed-end\n #include "Animation/AnimInstance.h"\n// removed-start\n#include "Components/AudioComponent.h"\n// removed-end\n #include "Components/SkeletalMeshComponent.h"\n// removed-start\n#include "GameFramework/Character.h"\n// removed-end\n #include "TimerManager.h"\n// removed-start\n#include "Kismet/GameplayStatics.h"\n#include "LevelSequencePlayer.h"\n#include "LevelSequenceActor.h"\n// removed-end\n// added-start\n#include "Sound/SoundWave.h"\n\n// added-end\n\n...\n\n// removed-start\n\tFDialogueLine NewLine = Line;\n\n\t//Construct the line instead of adding it as a member as to not break dialogues made pre 2.2\n\tif (AlternativeLines.Num())\n\t{\n\t\tTArray<FDialogueLine> AllLines = AlternativeLines;\n\t\tAllLines.Add(Line);\n\t\tNewLine = AllLines[FMath::RandRange(0, AllLines.Num() - 1)];\n// removed-end\n// added-start\n\tFDialogueLine NewLine;\n\n\tTArray<FDialogueLine> AllLines = AlternativeLines;\n\tAllLines.Add(Line);\n\n\tTArray<FDialogueLine> AllPassingLines;\n\n\tif (OwningComponent)\n\t{\n\t\tfor (auto& LineToCheck : AllLines)\n\t\t{\n\t\t\tbool bAllConditionsPass = true;\n\n\t\t\t//TODO consolidate the Character checking stuff into UNarrativeConditions as we\'re violating dont repeat yourself here - dialogue node base has something similar to this \n\t\t\tfor (auto& Cond : LineToCheck.Conditions)\n\t\t\t{\n\t\t\t\tif (Cond->CheckCondition(OwningComponent->GetOwningPawn(), OwningComponent->GetOwningController(), OwningComponent) == Cond->bNot)\n\t\t\t\t{\n\t\t\t\t\tbAllConditionsPass = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (bAllConditionsPass)\n\t\t\t{\n\t\t\t\tAllPassingLines.Add(LineToCheck);\n\t\t\t}\n\t\t}\n\t}\n\n\t//Randomly select a valid dialogue line \n\tif (AllPassingLines.Num())\n\t{\n\t\tNewLine = AllPassingLines[FMath::RandRange(0, AllPassingLines.Num() - 1)];\n// added-end\n \t}\n \n \tif (NewLine.Duration == ELineDuration::LD_Default)\n// added-start\nFText UDialogueNode::GetDialogueText() const\n{\n\tFText LineText = Line.Text.IsEmpty()? FText::GetEmpty() : Line.Text;\n\n\t// if text is empty, check the sound wave if there are dialogue lines.\n\tconst USoundWave* LineSound = Cast<USoundWave>(Line.DialogueSound);\n\tif (LineSound && LineSound->SupportsSubtitles() && LineText.IsEmpty())\n\t{\n\t\t// append each text item\n\t\tFString Str;\n\t\tfor (const FSubtitleCue& SubtitleCue : LineSound->Subtitles)\n\t\t{\n\t\t\tStr.Append(SubtitleCue.Text.ToString() + ". ");\n\t\t}\n\t\t\t\n\t\tLineText = FText::FromString(Str);\n\t}\n\t\n\treturn LineText;\n}\n\n// added-end\n\n...\n\n// removed-start\n\tif (PropertyChangedEvent.MemberProperty)\n\t{ \n\t\t//If we changed the ID, make sure it doesn\'t conflict with any other IDs in the Dialogue\n\t\tif (PropertyChangedEvent.MemberProperty->GetFName() == GET_MEMBER_NAME_CHECKED(FDialogueLine, Text))\n\t\t{\n\t\t\tFString DialogueAssetName = "";\n\n\t\t\tif (UDialogue* Dialogue = Cast<UDialogue>(GetOuter()))\n\t\t\t{\n\t\t\t\tif (UObject* DialogueBP = Cast<UObject>(Dialogue->GetOuter()))\n\t\t\t\t{\n\t\t\t\t\tDialogueAssetName = DialogueBP->GetFName().ToString();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//Only autogenerate the ID if an ID hasn\'t been assigned yet \n\t\t\tif (HasDefaultID())\n\t\t\t{\n\t\t\t\tGenerateIDFromText();\n\t\t\t}\n// removed-end\n// added-start\n\tconst FName PropertyName = (PropertyChangedEvent.Property != nullptr) ? PropertyChangedEvent.Property->GetFName() : NAME_None;\n\t\n\t//If we changed the ID, make sure it doesn\'t conflict with any other IDs in the Dialogue\n\tif (PropertyName == GET_MEMBER_NAME_CHECKED(FDialogueLine, Text))\n\t{\n\t\tFString DialogueAssetName = "";\n\n\t\tif (UDialogue* Dialogue = Cast<UDialogue>(GetOuter()))\n\t\t{\n\t\t\tif (UObject* DialogueBP = Cast<UObject>(Dialogue->GetOuter()))\n\t\t\t{\n\t\t\t\tDialogueAssetName = DialogueBP->GetFName().ToString();\n\t\t\t}\n\t\t}\n\t\t\n\t\t//Only autogenerate the ID if an ID hasn\'t been assigned yet \n\t\tif (HasDefaultID())\n\t\t{\n\t\t\tGenerateIDFromText();\n// added-end\n \t\t}\n \t}\n }\n\n...\n\n// removed-start\n\tFString TextString = Line.Text.ToString();\n// removed-end\n// added-start\n\tFString TextString = GetDialogueText().ToString();\n// added-end\n \n \tTArray<FString> ContentArray;\n \tFString ContentString = "";\n// added-start\n\n\t\tif (Dialogue->RootDialogue == this)\n\t\t{\n\t\t\tFinalString.Append("_Root");\n\t\t}\n// added-end\n// added-start\n\tconst FString DefaultNodeID = DialogueAssetName + "_" + GetName();\n\tconst FString DefaultRootNodeID = DialogueAssetName + "_Root";\n\t\n// added-end\n\n...\n\n// removed-start\n\treturn (ID.ToString() == DialogueAssetName + "_" + GetName());\n// removed-end\n// added-start\n\treturn ID.ToString() == DefaultNodeID || ID.ToString() == DefaultRootNodeID || ID.IsNone();\n// added-end\n }\n \n #endif\n\n...\n\n// removed-start\n#undef LOCTEXT_NAMESPACE// removed-end\n// added-start\n#undef LOCTEXT_NAMESPACE\n// added-end\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"narrativenodebasecpp",children:"NarrativeNodeBase.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Private/NarrativeNodeBase.cpp" showLineNumbers',children:' \n #include "NarrativeNodeBase.h"\n\n...\n\n// removed-start\n\t\t\t\t\tEvent->ExecuteEvent(Comp->GetOwningPawn(), Comp->GetOwningController(), Comp);\n// removed-end\n// added-start\n\t\t\t\t\tif (Event->AreConditionsMet(Pawn, Controller, NarrativeComponent))\n\t\t\t\t\t{\n\t\t\t\t\t\tEvent->OnActivate(Comp->GetOwningPawn(), Comp->GetOwningController(), Comp); //execute event\n\t\t\t\t\t\tEvent->OnDeactivate(Comp->GetOwningPawn(), Comp->GetOwningController(), Comp); //deactivate event\n\t\t\t\t\t}\n// added-end\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n...\n\n// removed-start\n\n// removed-end\n \tif (!NarrativeComponent)\n \t{\n \t\tUE_LOG(LogNarrative, Warning, TEXT("Tried running conditions on node %s but Narrative Comp was null."), *GetNameSafe(this));\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"narrativecpp",children:"Narrative.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Private/Narrative.cpp" showLineNumbers',children:' #include "Narrative.h"\n \n// removed-start\nDEFINE_LOG_CATEGORY(LogNarrativeRuntime);\n// removed-end\n// added-start\n#include "GameplayTagsManager.h"\n#include "NarrativeGameplayTags.h"\n// added-end\n\n...\n\n// removed-start\n\tUE_LOG(LogNarrativeRuntime, Log, TEXT("Narrative Runtime loaded."));\n// removed-end\n// added-start\n\t// This code will execute after your module is loaded into memory; the exact timing is specified in the .uplugin file per-module\n\n\tFNarrativeGameplayTags::Get().InitializeNativeTags();\n\tUGameplayTagsManager::Get().DoneAddingNativeTags(); \n\t\n// added-end\n }\n \n void FNarrativeModule::ShutdownModule()\n\n...\n\n// removed-start\n\tUE_LOG(LogNarrativeRuntime, Log, TEXT("Narrative Runtime unloaded."));\n// removed-end\n// added-start\n\t\n// added-end\n }\n \n #undef LOCTEXT_NAMESPACE\n\n...\n\n// removed-start\nIMPLEMENT_MODULE(FNarrativeModule, Narrative)// removed-end\n// added-start\nIMPLEMENT_MODULE(FNarrativeModule, Narrative)\n// added-end\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"narrativecomponentcpp",children:"NarrativeComponent.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Private/NarrativeComponent.cpp" showLineNumbers',children:' #include "NarrativeComponent.h"\n #include "NarrativePartyComponent.h"\n\n...\n\n// removed-start\n#include "NarrativeCondition.h"\n#include "NarrativeEvent.h"\n#include "NarrativeDialogueSettings.h"\n// removed-end\n #include "QuestTask.h"\n #include "Engine/Engine.h"\n #include "Kismet/GameplayStatics.h"\n\n...\n\n// removed-start\n#include "Engine/ActorChannel.h"\n// removed-end\n \n DEFINE_LOG_CATEGORY(LogNarrative);\n \n// added-start\n\n// added-end\n\n...\n\n// removed-start\n\t\t\tOnDialogueFinished.Broadcast(CurrentDialogue, true);\n// removed-end\n// added-start\n\t\t\tOnDialogueFinished.Broadcast(CurrentDialogue, true, EExitDialogueReason::EDR_NewDialogueStarted);\n// added-end\n \n \t\t\tCurrentDialogue->Deinitialize();\n \t\t\tCurrentDialogue = nullptr;\n// added-start\n\t\t\t\t// notify external listeners\n\t\t\t\tFDialogueDelegates::OnDialogueStarted.Broadcast(this, CurrentDialogue, PlayParams.StartFromID);\n\t\t\t\t\n// added-end\n\n...\n\n// removed-start\nvoid UNarrativeComponent::ClientExitDialogue_Implementation()\n// removed-end\n// added-start\nvoid UNarrativeComponent::ClientExitDialogue_Implementation(const EExitDialogueReason Reason)\n// added-end\n {\n \tif (CurrentDialogue)\n \t{\n// removed-start\n\t\tOnDialogueFinished.Broadcast(CurrentDialogue, false);\n// removed-end\n// added-start\n\t\tOnDialogueFinished.Broadcast(CurrentDialogue, false, Reason);\n// added-end\n\n...\n\n// removed-start\nvoid UNarrativeComponent::ClientExitPartyDialogue_Implementation()\n// removed-end\n// added-start\nvoid UNarrativeComponent::ClientExitPartyDialogue_Implementation(const EExitDialogueReason Reason)\n// added-end\n {\n \tif (PartyComponent)\n \t{\n// removed-start\n\t\tPartyComponent->ClientExitDialogue();\n// removed-end\n// added-start\n\t\tPartyComponent->ClientExitDialogue(Reason);\n// added-end\n\n...\n\n// removed-start\nvoid UNarrativeComponent::TryExitDialogue()\n// removed-end\n// added-start\nbool UNarrativeComponent::TryExitDialogue(const EExitDialogueReason Reason)\n// added-end\n {\n \tif (CurrentDialogue && CurrentDialogue->bCanBeExited)\n \t{\n\n...\n\n// removed-start\n\t\t\t\tCurrentDialogue->OwningComp->ExitDialogue();\n// removed-end\n// added-start\n\t\t\t\tCurrentDialogue->OwningComp->ExitDialogue(Reason);\n// added-end\n \t\t\t}\n \t\t}\n \t\telse\n\n...\n\n// removed-start\n\t\t\tServerTryExitDialogue();\n\t\t}\n\t}\n}\n\nvoid UNarrativeComponent::ExitDialogue()\n// removed-end\n// added-start\n\t\t\tServerTryExitDialogue(Reason);\n\t\t}\n\n\t\tif (!CurrentDialogue)\n\t\t{\n\t\t\treturn true; \n\t\t}\n\t}\n\n\treturn false; \n}\n\nvoid UNarrativeComponent::ExitDialogue(const EExitDialogueReason Reason)\n// added-end\n {\n \tif (HasAuthority())\n \t{\n// removed-start\n\t\tClientExitDialogue();\n\t}\n}\n\nvoid UNarrativeComponent::ServerTryExitDialogue_Implementation()\n{\n\tTryExitDialogue();\n// removed-end\n// added-start\n\t\tClientExitDialogue(Reason);\n\t}\n}\n\nvoid UNarrativeComponent::ServerTryExitDialogue_Implementation(const EExitDialogueReason Reason)\n{\n\tTryExitDialogue(Reason);\n// added-end\n\n...\n\n// removed-start\nvoid UNarrativeComponent::BeginSave(FString SaveName)\n{\n\tUE_LOG(LogNarrative, Verbose, TEXT("Begun saving using save name: %s"), *SaveName);\n}\n\nvoid UNarrativeComponent::BeginLoad(FString SaveName)\n{\n\tUE_LOG(LogNarrative, Verbose, TEXT("Begun loading using save name: %s"), *SaveName);\n}\n\nvoid UNarrativeComponent::SaveComplete(FString SaveName)\n{\n\tUE_LOG(LogNarrative, Verbose, TEXT("Save complete for save name: %s"), *SaveName);\n}\n\nvoid UNarrativeComponent::LoadComplete(FString SaveName)\n{\n\tUE_LOG(LogNarrative, Verbose, TEXT("Load complete for save name: %s"), *SaveName);\n}\n\n// removed-end\n void UNarrativeComponent::DialogueRepliesAvailable(class UDialogue* Dialogue, const TArray<UDialogueNode_Player*>& PlayerReplies)\n {\n \n\n...\n\n// removed-start\nvoid UNarrativeComponent::DialogueFinished(UDialogue* Dialogue, const bool bStartingNewDialogue)\n// removed-end\n// added-start\nvoid UNarrativeComponent::DialogueFinished(UDialogue* Dialogue, const bool bStartingNewDialogue, const EExitDialogueReason Reason)\n// added-end\n {\n \n }\n// added-start\n}\n\nvoid UNarrativeComponent::BeginSave(FString SaveName)\n{\n\tUE_LOG(LogNarrative, Verbose, TEXT("Begun saving using save name: %s"), *SaveName);\n}\n\nvoid UNarrativeComponent::BeginLoad(FString SaveName)\n{\n\tUE_LOG(LogNarrative, Verbose, TEXT("Begun loading using save name: %s"), *SaveName);\n}\n\nvoid UNarrativeComponent::SaveComplete(FString SaveName)\n{\n\tUE_LOG(LogNarrative, Verbose, TEXT("Save complete for save name: %s"), *SaveName);\n}\n\nvoid UNarrativeComponent::LoadComplete(FString SaveName)\n{\n\tUE_LOG(LogNarrative, Verbose, TEXT("Load complete for save name: %s"), *SaveName);\n// added-end\n// added-start\n\n\t\t\tBegunQuest->QuestPostLoad();\n// added-end\n// added-start\n\n\n...\n\n// added-end\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"narrativeeventcpp",children:"NarrativeEvent.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Private/NarrativeEvent.cpp" showLineNumbers',children:' \n #include "NarrativeEvent.h"\n// added-start\n\n#include "NarrativeComponent.h"\n#include "NarrativeCondition.h"\n#include "NarrativePartyComponent.h"\n#include "Chaos/PBDSuspensionConstraintData.h"\n// added-end\n// added-start\n}\n\nvoid UNarrativeEvent::OnActivate_Implementation(APawn* Target, APlayerController* Controller, class UNarrativeComponent* NarrativeComponent)\n{\n\tExecuteEvent(Target, Controller, NarrativeComponent);\n}\n\nvoid UNarrativeEvent::OnDeactivate_Implementation(APawn* Target, APlayerController* Controller, class UNarrativeComponent* NarrativeComponent)\n{\n\n// added-end\n// added-start\n\nbool UNarrativeEvent::AreConditionsMet(APawn* Pawn, APlayerController* Controller, class UNarrativeComponent* NarrativeComponent)\n{\n\n\tif (!NarrativeComponent)\n\t{\n\t\tUE_LOG(LogNarrative, Warning, TEXT("Tried running conditions on node %s but Narrative Comp was null."), *GetNameSafe(this));\n\t\treturn false;\n\t}\n\t  \n\t//Ensure all conditions are met\n\tfor (auto& Cond : Conditions)\n\t{\t\n\t\tif (Cond)\n\t\t{\n\t\t\t//We\'re running a condition on a party! Figure out who we need to run the condition on\n\t\t\tif (UNarrativePartyComponent* PartyComp = Cast<UNarrativePartyComponent>(NarrativeComponent))\n\t\t\t{\n\t\t\t\tTArray<UNarrativeComponent*> ComponentsToCheck;\n\n\t\t\t\tUE_LOG(LogNarrative, Warning, TEXT("Running on party..."));\n\t\t\t\t//We need to check everyone in the party\n\t\t\t\tif (Cond->PartyConditionPolicy == EPartyConditionPolicy::AllPlayersPass || Cond->PartyConditionPolicy == EPartyConditionPolicy::AnyPlayerPasses)\n\t\t\t\t{\n\t\t\t\t\tComponentsToCheck.Append(PartyComp->GetPartyMembers());\n\t\t\t\t}//We need to check the party leader\n\t\t\t\telse if (Cond->PartyConditionPolicy == EPartyConditionPolicy::PartyLeaderPasses)\n\t\t\t\t{\n\t\t\t\t\tComponentsToCheck.Add(PartyComp->GetPartyLeader());\n\t\t\t\t}\n\t\t\t\telse if (Cond->PartyConditionPolicy == EPartyConditionPolicy::PartyPasses)\n\t\t\t\t{\n\t\t\t\t\tComponentsToCheck.Add(PartyComp);\n\t\t\t\t}\n\n\t\t\t\tbool bAnyonePassed = false;\n\n\t\t\t\t//If any of our comps to check fail, return false \n\t\t\t\tfor (auto& ComponentToCheck : ComponentsToCheck)\n\t\t\t\t{\t\n\t\t\t\t\tconst bool bConditionPassed = Cond && Cond->CheckCondition(ComponentToCheck->GetOwningPawn(), ComponentToCheck->GetOwningController(), ComponentToCheck) != Cond->bNot;\n\t\t\t\t\tFString CondString = bConditionPassed ? "passed" : "failed";\n\n\t\t\t\t\tif (bConditionPassed)\n\t\t\t\t\t{\n\t\t\t\t\t\t//We\'ll check the next condition since someone passed\n\t\t\t\t\t\tif (Cond->PartyConditionPolicy == EPartyConditionPolicy::AnyPlayerPasses)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbAnyonePassed = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (Cond->PartyConditionPolicy != EPartyConditionPolicy::AnyPlayerPasses)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tUE_LOG(LogNarrative, Warning, TEXT("Checking %s event condition, and they: %s"), *GetNameSafe(ComponentToCheck), *CondString);\n\t\t\t\t}\n\n\t\t\t\t//If we didn\'t break, no players passed \n\t\t\t\tif (!bAnyonePassed && Cond->PartyConditionPolicy == EPartyConditionPolicy::AnyPlayerPasses)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (Cond && Cond->CheckCondition(Pawn, Controller, NarrativeComponent) == Cond->bNot)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}\n\n\treturn true;\n}\n\n...\n\n// added-end\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"narrativepartycomponentcpp",children:"NarrativePartyComponent.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Private/NarrativePartyComponent.cpp" showLineNumbers',children:' \n #include "NarrativePartyComponent.h"\n\n...\n\n// removed-start\nvoid UNarrativePartyComponent::ExitDialogue()\n// removed-end\n// added-start\nvoid UNarrativePartyComponent::ExitDialogue(const EExitDialogueReason Reason)\n// added-end\n {\n \tif (HasAuthority())\n \t{\n\n...\n\n// removed-start\n\t\t\t\tGroupMemberComp->ClientExitPartyDialogue();\n// removed-end\n// added-start\n\t\t\t\tGroupMemberComp->ClientExitPartyDialogue(Reason);\n// added-end\n \t\t\t}\n \t\t}\n \n// removed-start\n\t\tClientExitDialogue();\n// removed-end\n// added-start\n\t\tClientExitDialogue(Reason);\n// added-end\n\n...\n\n// removed-start\n}// removed-end\n// added-start\n}\n// added-end\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"narrativedialoguesettingscpp",children:"NarrativeDialogueSettings.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Private/NarrativeDialogueSettings.cpp" showLineNumbers',children:' #include "NarrativeDialogueSettings.h"\n \n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questblueprintgeneratedclasscpp",children:"QuestBlueprintGeneratedClass.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Private/QuestBlueprintGeneratedClass.cpp" showLineNumbers',children:' \n #include "QuestBlueprintGeneratedClass.h"\n\n...\n\n// removed-start\n#include "QuestSM.h"\n// removed-end\n \n void UQuestBlueprintGeneratedClass::InitializeQuest(class UQuest* Quest)\n {\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"narrativesavegamecpp",children:"NarrativeSaveGame.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Private/NarrativeSaveGame.cpp" showLineNumbers',children:' \n #include "NarrativeSaveGame.h"\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questsmcpp",children:"QuestSM.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Private/QuestSM.cpp" showLineNumbers',children:' #include "QuestSM.h"\n #include "Quest.h"\n\n...\n\n// removed-start\n#include "NarrativeDataTask.h"\n// removed-end\n #include "NarrativeComponent.h"\n// removed-start\n#include "NarrativeQuestSettings.h"\n// removed-end\n #include "QuestTask.h"\n \n\n...\n\n// removed-start\n\tif (OwningQuest)\n// removed-end\n// added-start\n\tif (OwningQuest && OwningQuest->GetQuestCompletion() == EQuestCompletion::QC_Started)\n// added-end\n \t{\n \t\tstruct SOnEnteredStruct\n \t\t{\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"narrativetaskmanagercpp",children:"NarrativeTaskManager.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Private/NarrativeTaskManager.cpp" showLineNumbers',children:' \n #include "NarrativeTaskManager.h"\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"narrativedefaultcinecamcpp",children:"NarrativeDefaultCinecam.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Private/NarrativeDefaultCinecam.cpp" showLineNumbers',children:'\n// removed-start\n// Fill out your copyright notice in the Description page of Project Settings.\n// removed-end\n// added-start\n// Copyright Narrative Tools 2025. \n// added-end\n \n \n #include "NarrativeDefaultCinecam.h"\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"narrativefunctionlibrarycpp",children:"NarrativeFunctionLibrary.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Private/NarrativeFunctionLibrary.cpp" showLineNumbers',children:' \n #include "NarrativeFunctionLibrary.h"\n// added-start\n\n#include "NarrativeNodeSelector.h"\n// added-end\n// added-start\n\nFDialogueNodeSelector UNarrativeFunctionLibrary::MakeDialogueNodeSelector(FDialogueNodeSelector Selector)\n{\n\treturn Selector;\n}\n\nFDialogueNodeSelector UNarrativeFunctionLibrary::MakeDialogueNodeSelectorFromID(FName NodeID)\n{\n\tFDialogueNodeSelector Sel;\n\tSel.NodeID = NodeID;\n\tSel.Asset = nullptr;\n\treturn Sel;\n}\n\nvoid UNarrativeFunctionLibrary::BreakDialogueNodeSelector(const FDialogueNodeSelector& Selector, FName& NodeID)\n{\n\tNodeID = Selector.NodeID;\n}\n\nFName UNarrativeFunctionLibrary::Conv_DialogueNodeSelectorToName(const FDialogueNodeSelector& Selector)\n{\n\treturn Selector.NodeID;\n}\n\nFDialogueNodeSelector UNarrativeFunctionLibrary::Conv_NameToDialogueNodeSelector(const FName& NodeID)\n{\n\tFDialogueNodeSelector Sel;\n\tSel.NodeID = NodeID;\n\treturn Sel;\n}\n\nFQuestStateSelector UNarrativeFunctionLibrary::MakeQuestStateSelector(FQuestStateSelector Selector)\n{\n\treturn Selector;\n}\n\nFQuestStateSelector UNarrativeFunctionLibrary::MakeQuestStateSelectorFromID(FName NodeID)\n{\n\tFQuestStateSelector Sel;\n\tSel.NodeID = NodeID;\n\tSel.Asset = nullptr;\n\treturn Sel;\n}\n\nvoid UNarrativeFunctionLibrary::BreakQuestStateSelector(const FQuestStateSelector& Selector, FName& NodeID)\n{\n\tNodeID = Selector.NodeID;\n}\n\nFName UNarrativeFunctionLibrary::Conv_QuestStateSelectorToName(const FQuestStateSelector& Selector)\n{\n\treturn Selector.NodeID;\n}\n\nFQuestStateSelector UNarrativeFunctionLibrary::Conv_NameToQuestStateSelector(const FName& NodeID)\n{\n\tFQuestStateSelector Sel;\n\tSel.NodeID = NodeID;\n\treturn Sel;\n}\n\nFQuestBranchSelector UNarrativeFunctionLibrary::MakeQuestBranchSelector(FQuestBranchSelector Selector)\n{\n\treturn Selector;\n}\n\nFQuestBranchSelector UNarrativeFunctionLibrary::MakeQuestBranchSelectorFromID(FName NodeID)\n{\n\tFQuestBranchSelector Sel;\n\tSel.NodeID = NodeID;\n\tSel.Asset = nullptr;\n\treturn Sel;\n}\n\nvoid UNarrativeFunctionLibrary::BreakQuestBranchSelector(const FQuestBranchSelector& Selector, FName& NodeID)\n{\n\tNodeID = Selector.NodeID;\n}\n\nFName UNarrativeFunctionLibrary::Conv_QuestBranchSelectorToName(const FQuestBranchSelector& Selector)\n{\n\treturn Selector.NodeID;\n}\n\nFQuestBranchSelector UNarrativeFunctionLibrary::Conv_NameToQuestBranchSelector(const FName& NodeID)\n{\n\tFQuestBranchSelector Sel;\n\tSel.NodeID = NodeID;\n\treturn Sel;\n}\n\n...\n\n// added-end\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"questcpp",children:"Quest.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Private/Quest.cpp" showLineNumbers',children:' #include "Quest.h"\n// removed-start\n#include "NarrativeDataTask.h"\n// removed-end\n #include "QuestSM.h"\n\n...\n\n// removed-start\n#include "NarrativeEvent.h"\n// removed-end\n #include "NarrativeComponent.h"\n// removed-start\n#include "NarrativeFunctionLibrary.h"\n// removed-end\n #include "NarrativePartyComponent.h"\n// removed-start\n#include "GameFramework/PlayerController.h"\n#include "Net/UnrealNetwork.h"\n// removed-end\n// added-start\n#include <GameFramework/PlayerController.h>\n\nFQuestDelegates::FOnQuestStartedSignature FQuestDelegates::OnQuestStarted;\nFQuestDelegates::FOnQuestEndSignature FQuestDelegates::OnQuestEnd;\n// added-end\n \n// added-start\n\tbResumeDialogueAfterLoad = true; \n// added-end\n// added-start\n\n\tfor (auto& Req : QuestRequirements)\n\t{\n\t\tif (Req)\n\t\t{\n\t\t\tReq->OnRemoved(this);\n\t\t}\n\t}\n\n\tQuestRequirements.Empty();\n// added-end\n// added-start\n\t\t// notify other listening objects\n\t\tFQuestDelegates::OnQuestStarted.Broadcast(OwningComp, this, QuestStartID);\n\t\t\n// added-end\n// added-start\n\t}\n}\n\nvoid UQuest::HandleBeginDialogue()\n{\n\tif (!QuestDialogue || !OwningComp)\n\t{\n\t\treturn;\n\t}\n\t\n\tFDialoguePlayParams PlayParams;\n\tPlayParams.bOverride_bFreeMovement = true; \n\tPlayParams.bFreeMovement = true;\n\tPlayParams.bOverride_bUnskippable = true;\n\tPlayParams.bUnskippable = true; \n\tPlayParams.StartFromID = CurrentState ? CurrentState->GetID() : NAME_None;\n\tif (OwningComp->HasDialogueAvailable(QuestDialogue, PlayParams))\n\t{\n\t\tOwningComp->BeginDialogue(QuestDialogue, PlayParams);\n// added-end\n// added-start\n\n\t\tif (!OwningComp->bIsLoading)\n\t\t{\n\t\t\tHandleBeginDialogue();\n\t\t}\n// added-end\n\n...\n\n// removed-start\n\t\tif (State->GetID() == ID)\n// removed-end\n// added-start\n\t\tif (State && State->GetID() == ID)\n// added-end\n \t\t{\n \t\t\treturn State;\n \t\t}\n\n...\n\n// removed-start\n\t\tif (Branch->GetID() == ID)\n// removed-end\n// added-start\n\t\tif (Branch && Branch->GetID() == ID)\n// added-end\n \t\t{\n \t\t\treturn Branch;\n \t\t}\n// added-start\n#if WITH_EDITOR\nvoid UQuest::PostLoad()\n{\n\t// fix missing transaction flag on nodes\n\tfor (UQuestNode* Node : GetNodes())\n\t{\n\t\tNode->SetFlags(RF_Transactional);\n\t}\n\n\t// fix dialogue connection\n\tUpdateDialogueConnection();\n\t\n\tSuper::PostLoad();\n}\n\nvoid UQuest::PreEditChange(FProperty* PropertyAboutToChange)\n{\n\tconst FName PropertyName = (PropertyAboutToChange != nullptr) ? PropertyAboutToChange->GetFName() : NAME_None;\n\n\t// update quest asset\n\tif (PropertyName == GET_MEMBER_NAME_CHECKED(UQuest, QuestDialogue))\n\t{\n\t\tLastQuestDialogue = QuestDialogue;\n\t}\n\t\n\tSuper::PreEditChange(PropertyAboutToChange);\n}\n\nvoid UQuest::PostEditChangeProperty(FPropertyChangedEvent& PropertyChangedEvent)\n{\n\tconst FName PropertyName = (PropertyChangedEvent.Property != nullptr) ? PropertyChangedEvent.Property->GetFName() : NAME_None;\n\n\t// update last dialogue connected quest\n\tif (PropertyName == GET_MEMBER_NAME_CHECKED(UQuest, QuestDialogue))\n\t{\n\t\tUpdateDialogueConnection();\n\t}\n\t\n\tSuper::PostEditChangeProperty(PropertyChangedEvent);\n}\n\nvoid UQuest::UpdateDialogueConnection()\n{\n\tif (UDialogue* LastDialogue = Cast<UDialogue>(LastQuestDialogue.GetDefaultObject()))\n\t{\n\t\t// remove connected quest ref\n\t\tif (LastDialogue->EditorLinkedQuest == GetClass()->GetDefaultObject()->GetClass())\n\t\t{\n\t\t\tLastDialogue->Modify();\n\t\t\tLastDialogue->EditorLinkedQuest = nullptr;\n\t\t\tLastDialogue->MarkPackageDirty();\n\t\t}\n\t\tLastQuestDialogue = nullptr;\n\t}\n\n\t// update new dialogue connected quest\n\tif (UDialogue* NewDialogue = Cast<UDialogue>(QuestDialogue.GetDefaultObject()))\n\t{\n\t\t// set connected quest ref\n\t\tif (NewDialogue->EditorLinkedQuest == nullptr)\n\t\t{\n\t\t\tNewDialogue->Modify();\n\t\t\tNewDialogue->EditorLinkedQuest = GetClass()->GetDefaultObject()->GetClass();\n\t\t\tNewDialogue->MarkPackageDirty();\n\t\t}\n\t}\n}\n#endif\n\nvoid UQuest::QuestPostLoad()\n{\n\tif (bResumeDialogueAfterLoad && QuestCompletion == EQuestCompletion::QC_Started)\n\t{\n\t\tHandleBeginDialogue();\n\t}\n\t\n\tBPQuestPostLoad();\n\tOnQuestPostLoad.Broadcast(this);\n}\n\n// added-end\n// added-start\n\t\t// notify listeners this quest has ended \n\t\tFQuestDelegates::OnQuestEnd.Broadcast(OwningComp, this);\n\t\t\n// added-end\n// added-start\n\t\t// notify listeners this quest has ended \n\t\tFQuestDelegates::OnQuestEnd.Broadcast(OwningComp, this);\n\t\t\n// added-end\n// added-start\n\n\t\tQuestDialogue = nullptr;\n// added-end\n// added-start\n}\n\nvoid UQuest::AddQuestRequirement_Implementation(UQuestRequirement* Requirement)\n{\n\tif (!QuestRequirements.Contains(Requirement))\n\t{\n\t\tQuestRequirements.Add(Requirement);\n\t\tRequirement->OnAdded(this);\n\t}\n}\n\nvoid UQuest::RemoveQuestRequirement_Implementation(UQuestRequirement* Requirement)\n{\n\tif (QuestRequirements.Contains(Requirement))\n\t{\n\t\tQuestRequirements.Remove(Requirement);\n\t\tRequirement->OnRemoved(this);\n\t}\n// added-end\n// added-start\n\nUQuestRequirement::UQuestRequirement()\n{\n\n}\n\nvoid UQuestRequirement::OnAdded_Implementation(UQuest* Quest)\n{\n\n}\n\nvoid UQuestRequirement::OnRemoved_Implementation(UQuest* Quest)\n{\n\n}\n\nUQuest* UQuestRequirement::GetOwningQuest() const\n{\n\treturn Cast<UQuest>(GetOuter());\n}\n\n...\n\n// added-end\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"narrativequestsettingscpp",children:"NarrativeQuestSettings.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Private/NarrativeQuestSettings.cpp" showLineNumbers',children:'\n// removed-start\n// Fill out your copyright notice in the Description page of Project Settings.\n// removed-end\n// added-start\n// Copyright Narrative Tools 2025. \n// added-end\n \n \n #include "NarrativeQuestSettings.h"\n\n...\n\n// removed-start\n}// removed-end\n// added-start\n}\n// added-end\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"dialoguecpp",children:"Dialogue.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Private/Dialogue.cpp" showLineNumbers',children:' #include "Dialogue.h"\n #include "NarrativeDialogueSettings.h"\n// added-start\n\n// added-end\n// added-start\n\nFDialogueDelegates::FOnDialogueStartedSignature FDialogueDelegates::OnDialogueStarted;\nFDialogueDelegates::FOnDialogueEndSignature FDialogueDelegates::OnDialogueEnd;\n// added-end\n// added-start\n\tbUnskippable = false;\n// added-end\n// added-start\n\tEndDialogueDist = -1.f; \n// added-end\n// added-start\n\t\t\t\tif (PlayParams.Priority > -1)\n\t\t\t\t{\n\t\t\t\t\tPriority = PlayParams.Priority;\n\t\t\t\t}\n\n// added-end\n// added-start\n\t\t\t\tif (PlayParams.bOverride_bUnskippable)\n\t\t\t\t{\n\t\t\t\t\tbFreeMovement = PlayParams.bUnskippable;\n\t\t\t\t}\n\n\t\t\t\tif (PlayParams.bOverride_bFreeMovement)\n\t\t\t\t{\n\t\t\t\t\tbFreeMovement = PlayParams.bFreeMovement;\n\t\t\t\t}\n\n\t\t\t\tif (PlayParams.bOverride_bStopMovement)\n\t\t\t\t{\n\t\t\t\t\tbAutoStopMovement = PlayParams.bStopMovement;\n\t\t\t\t}\n\n// added-end\n// added-start\n\tStopDialogueSequence();\n\n// added-end\n\n...\n\n// removed-start\n\n\tStopDialogueSequence();\n// removed-end\n \n \tif (DialogueAudio)\n \t{\n// added-start\nvoid UDialogue::PostLoad()\n{\n\t// fix missing transaction flag on nodes\n\tfor (UDialogueNode* Node : GetNodes())\n\t{\n\t\tNode->SetFlags(RF_Transactional);\n\t}\n\t\n\tSuper::PostLoad();\n}\n\n// added-end\n\n...\n\n// removed-start\nvoid UDialogue::ExitDialogue()\n// removed-end\n// added-start\nvoid UDialogue::ExitDialogue(const EExitDialogueReason Reason)\n// added-end\n {\n \tif (OwningComp)\n \t{\n// removed-start\n\t\tOwningComp->ExitDialogue();\n// removed-end\n// added-start\n\t\tOwningComp->ExitDialogue(Reason);\n// added-end\n// added-start\n\n\tif (EndDialogueDist > 0.f && OwningPawn)\n\t{\n\t\tfor (auto& Speaker : Speakers)\n\t\t{\n\t\t\tif (SpeakerAvatars.Contains(Speaker.GetSpeakerID()))\n\t\t\t{\n\t\t\t\tif (AActor* SpeakerAvatar = *SpeakerAvatars.Find(Speaker.GetSpeakerID()))\n\t\t\t\t{\n\t\t\t\t\tif (OwningPawn->GetDistanceTo(SpeakerAvatar) > EndDialogueDist)\n\t\t\t\t\t{\n\t\t\t\t\t\tOwningComp->ExitDialogue(EExitDialogueReason::EDR_TooFarAway);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nbool UDialogue::CanSkipDialogue_Implementation() const\n{\n\treturn !bUnskippable;\n// added-end\n\n...\n\n// removed-start\n\n\tInitSpeakerAvatars();\n\n\tif (bAdjustPlayerTransform)\n\t{\n\t\tAdjustPlayerTransform();\n\t}\n// removed-end\n \n \tOldViewTarget = OwningController ? OwningController->GetViewTarget() : nullptr;\n \n\n...\n\n// removed-start\n\t\tif (bAutoStopMovement)\n// removed-end\n// added-start\n\t\t//Free movement shouldnt autostop \n\t\tif (bAutoStopMovement && !bFreeMovement)\n// added-end\n \t\t{\n \t\t\tif (const ACharacter* PlayerChar = Cast<ACharacter>(OwningPawn))\n \t\t\t{\n// added-start\n\t}\n\n\tInitSpeakerAvatars();\n\n\tif (bAdjustPlayerTransform)\n\t{\n\t\tAdjustPlayerTransform();\n// added-end\n// added-start\n\tint32 Idx = 0;\n\n// added-end\n\n...\n\n// removed-start\n\t\tif (AActor* SpeakerActor = LinkSpeakerAvatar(Speaker))\n// removed-end\n// added-start\n\t\tif (AActor* SpeakerActor = LinkSpeakerAvatar(Speaker, Idx))\n// added-end\n \t\t{\n \t\t\tif (IsValid(SpeakerActor))\n \t\t\t{\t\t\t\n// added-start\n\n\t\t\t++Idx;\n// added-end\n\n...\n\n// removed-start\n\tif (AActor* SpeakerActor = LinkSpeakerAvatar(PlayerSpeakerInfo))\n// removed-end\n// added-start\n\tif (AActor* SpeakerActor = LinkSpeakerAvatar(PlayerSpeakerInfo, -1))\n// added-end\n \t{\n \t\tSpeakerAvatars.Add(PlayerSpeakerInfo.GetSpeakerID(), SpeakerActor);\n \t\tPlayerSpeakerInfo.SpeakerAvatarTransform = SpeakerActor->GetActorTransform();\n// added-start\n\n\t// notify listeners that this dialogue has ended\n\tFDialogueDelegates::OnDialogueEnd.Broadcast(OwningComp, this);\n\t\n// added-end\n\n...\n\n// removed-start\n\t\t\tbool bWantsAutoSelect = bFreeMovement;\n// removed-end\n// added-start\n\t\t\tbool bWantsAutoSelect = false; //bFreeMovement;\n// added-end\n \n \t\t\tif (const UNarrativeDialogueSettings* DialogueSettings = GetDefault<UNarrativeDialogueSettings>())\n \t\t\t{\n// removed-start\n\t\t\t\tif (DialogueSettings->bAutoSelectSingleResponse && AvailableResponses.Num() == 1)\n// removed-end\n// added-start\n\t\t\t\tif (DialogueSettings->bAutoSelectSingleResponse || (AvailableResponses.Num() == 1 && AvailableResponses.IsValidIndex(0) && AvailableResponses[0]->IsAutoSelectIfOnlyReply()))\n// added-end\n\n...\n\n// removed-start\n\n// removed-end\n \n \t\t\t//If a response is autoselect, select it and early out \n \t\t\tfor (auto& AvailableResponse : AvailableResponses)\n\n...\n\n// removed-start\n\t\tExitDialogue();\n// removed-end\n// added-start\n\t\tExitDialogue(EExitDialogueReason::EDR_NoLines);\n// added-end\n \t}\n }\n \n\n...\n\n// removed-start\n\t\n\tFVector EyesLoc;\n// removed-end\n// added-start\n\n\t//We want the head bone, but not where the head bone is as that moves around. We want the default offset the head bone is normally at. Even this is technically not perfect as this is the t-pose \n\tFVector EyesLoc = FVector::ZeroVector;\n// added-end\n \tFRotator EyesRot;\n// added-start\n\n// added-end\n \tActor->GetActorEyesViewPoint(EyesLoc, EyesRot);\n \n// removed-start\n\tconst bool bIsChar = Actor->IsA<ACharacter>();\n\n// removed-end\n// added-start\n\t//Head is located at a different height per character, lets find it... \n// added-end\n\n...\n\n// removed-start\n\t\t\t\tEyesLoc = SkelMesh->GetBoneLocation(DefaultHeadBoneName);\n\t\t\t\t//EyesLoc.Z = SkelMesh->GetBoneLocation(DefaultHeadBoneName).Z;\n\t\t\t\tbreak;\n// removed-end\n// added-start\n\t\t\t\tEyesLoc.Z = SkelMesh->GetBoneLocation(DefaultHeadBoneName).Z;\n// added-end\n \t\t\t}\n \t\t}\n \t}\n\n...\n\n// removed-start\n\t\t\t\t\tExitDialogue();\n// removed-end\n// added-start\n\t\t\t\t\tExitDialogue(EExitDialogueReason::EDR_NoLines);\n// added-end\n \t\t\t\t\treturn;\n \t\t\t\t}\n \n\n...\n\n// removed-start\n\t\t\t\t\tExitDialogue();\n// removed-end\n// added-start\n\t\t\t\t\tExitDialogue(EExitDialogueReason::EDR_NoLines);\n// added-end\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n...\n\n// removed-start\nAActor* UDialogue::LinkSpeakerAvatar_Implementation(const FSpeakerInfo& Info)\n// removed-end\n// added-start\nAActor* UDialogue::LinkSpeakerAvatar_Implementation(const FSpeakerInfo& Info, const int32 Idx)\n// added-end\n {\n \t//Default to using the OwningPawn, or DefaultNPCAvatar, unless something else can be found... \n \tAActor* SpawnedActor = Info.GetSpeakerID() == PlayerSpeakerInfo.GetSpeakerID() ? OwningPawn : nullptr;\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"dialogueassetcpp",children:"DialogueAsset.cpp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cpp",metastring:'title="/Narrative/Source/Narrative/Private/DialogueAsset.cpp" showLineNumbers',children:'\n #include "DialogueAsset.h"\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"w_narrativemenu_dialogueuasset",children:"W_NarrativeMenu_Dialogue.uasset"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.strong,{children:"UPDATED (asset)"})}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"wbp_narrativebutton_dialogueoptionuasset",children:"WBP_NarrativeButton_DialogueOption.uasset"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.strong,{children:"UPDATED (asset)"})}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"bp_narrative3overlayuasset",children:"BP_Narrative3Overlay.uasset"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.strong,{children:"UPDATED (asset)"})}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"w_narrativemenu_questjournaluasset",children:"W_NarrativeMenu_QuestJournal.uasset"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.strong,{children:"UPDATED (asset)"})}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"ne_beginquestuasset",children:"NE_BeginQuest.uasset"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.strong,{children:"UPDATED (asset)"})}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"ne_begindialogueuasset",children:"NE_BeginDialogue.uasset"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.strong,{children:"REMOVED"})}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"bpt_finishdialogueuasset",children:"BPT_FinishDialogue.uasset"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.strong,{children:"UPDATED (asset)"})}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"bpt_playdialoguenodeuasset",children:"BPT_PlayDialogueNode.uasset"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.strong,{children:"UPDATED (asset)"})}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"bpt_gotolocationuasset",children:"BPT_GoToLocation.uasset"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.strong,{children:"UPDATED (asset)"})}),"\n"]})]})}function c(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}}}]);