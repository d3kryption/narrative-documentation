"use strict";(self.webpackChunknarrative_docs=self.webpackChunknarrative_docs||[]).push([[8772],{76181:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>l,frontMatter:()=>a,metadata:()=>r,toc:()=>h});var i=t(74848),s=t(28453);const a={sidebar_label:"NPC Chunking"},o="NPC Chunking",r={id:"tales/dialogue/npc-chunking",title:"NPC Chunking",description:"A performance boosting measure that is used in Narrative Tales is the NPC chunking feature.",source:"@site/docs/tales/dialogue/npc-chunking.md",sourceDirName:"tales/dialogue",slug:"/tales/dialogue/npc-chunking",permalink:"/tales/dialogue/npc-chunking",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{sidebar_label:"NPC Chunking"},sidebar:"tutorialSidebar",previous:{title:"Master Dialogue",permalink:"/tales/dialogue/master-dialogue"},next:{title:"Dialogue Warnings",permalink:"/tales/dialogue/warnings"}},c={},h=[{value:"Potential issues",id:"potential-issues",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",img:"img",p:"p",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"npc-chunking",children:"NPC Chunking"})}),"\n",(0,i.jsx)(n.p,{children:"A performance boosting measure that is used in Narrative Tales is the NPC chunking feature."}),"\n",(0,i.jsx)(n.p,{children:"It pre-determines what nodes need to be run at the start of an NPC's node, so it has less code to run when running each node."}),"\n",(0,i.jsxs)(n.p,{children:["Take the below dialogue from the fictional game just made up: ",(0,i.jsx)(n.code,{children:"Halo: but you are just a trooper"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"npc-chunking-dialogue.webp",src:t(48344).A+"",width:"569",height:"980"})}),"\n",(0,i.jsx)(n.p,{children:"Normally a dialogue system would run each node individually, as and when it needs to. Running the conditions on the fly."}),"\n",(0,i.jsx)(n.p,{children:"However, with NPC Chunking, all the conditions are pre-determined at the start and almost groups the nodes together."}),"\n",(0,i.jsx)(n.p,{children:"This has no impact on camera shots, events, or code - that will all still run when the individual node does."}),"\n",(0,i.jsx)(n.p,{children:"But conditionally, Narrative no longer has to check each node trying to find the correct path to take. It's all pre-determined."}),"\n",(0,i.jsx)(n.p,{children:"Take the below image. Instead of running conditions for 7 nodes each time. Narrative chunks together the NPC nodes and only runs conditions 3 times."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"npc-chunking-dialogue-show.webp",src:t(99158).A+"",width:"569",height:"1191"})}),"\n",(0,i.jsx)(n.p,{children:"In this example, the performance gains are minimal however, if you have a more complicated dialogue with many nodes that all have conditions on, this can be quite a time saver."}),"\n",(0,i.jsx)(n.h2,{id:"potential-issues",children:"Potential issues"}),"\n",(0,i.jsx)(n.p,{children:"The vast majority of the time, this will not impact you nor be an issue."}),"\n",(0,i.jsx)(n.p,{children:"However, in some instances, since all the conditions are run at the start of a chunk, any events that run or changes in gameplay cannot be re-checked mid-chunk."}),"\n",(0,i.jsx)(n.p,{children:"Meaning in the dialogue below, a quest is granted on the first node. but a condition is running on the third node checking if that quest is active."}),"\n",(0,i.jsx)(n.p,{children:"This condition will return false since the conditions were all checked at the start."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"npc-chunking-issues.webp",src:t(14938).A+"",width:"503",height:"502"})}),"\n",(0,i.jsx)(n.p,{children:'A quick fix to get around this is to simply add a "breaker" node in the form of an empty player node which will chunk the first two nodes, then the player node will run, then it will re-chunk the next nodes making the condition - check real time.'}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"npc-chunking-issues-fix.webp",src:t(18292).A+"",width:"483",height:"628"})})]})}function l(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},99158:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/npc-chunking-dialogue-show-af643ad7a13d750cf2493d9db7a0985e.webp"},48344:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/npc-chunking-dialogue-5e2cecb96ec4f86ab2df937cc83868d8.webp"},18292:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/npc-chunking-issues-fix-a1a45632532172a7db15c42c5dacacaa.webp"},14938:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/npc-chunking-issues-beb720124117bdec8b1e44224d1d56a4.webp"},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>r});var i=t(96540);const s={},a=i.createContext(s);function o(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);